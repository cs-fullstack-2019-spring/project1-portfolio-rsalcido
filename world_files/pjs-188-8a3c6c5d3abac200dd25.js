webpackJsonp([188],{"0XFc":function(e,t,n){"use strict";var r=n("d6ZO"),m=n.n(r),i=n("RklN"),o=n.n(i),a=n("OIxG"),c=n("vJNz"),y=n("aC/n"),g=n("W/Cr"),l=n("p58k"),s=n("LQgx"),u=n("r/ec"),d=n("NyaW"),p=n("JyNp"),f=n("MQ2h"),b=n.n(f),v=n("+B8E"),h=n("Otfq"),S=n("gEaE");function E(e){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function _(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function C(e,t,n){return t&&w(e.prototype,t),n&&w(e,n),e}function O(e,t){return!t||"object"!==E(t)&&"function"!=typeof t?T(e):t}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function j(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&k(e,t)}function k(e,t){return(k=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}function T(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function x(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var R=function(e){function o(){var e,a;_(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return x(T(T(a=O(this,(e=P(o)).call.apply(e,[this].concat(n))))),"handleCancel",function(){a.props.dismissHandler()}),x(T(T(a)),"handleSuggestedBoardSelection",function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n=a.props.onChangeBoardName,r=Object(i.findDOMNode)(a.textInput);if(r instanceof HTMLElement){var o=r.querySelector("input");o&&o.focus()}n(e,t)}),x(T(T(a)),"saveTextInputRef",function(e){a.textInput=e}),a}return j(o,e),C(o,[{key:"shouldComponentUpdate",value:function e(t){return!(this.props.saving&&!t.saving)}},{key:"renderFlyoutLoader",value:function e(){return m.a.createElement(S.b,{height:450,width:320,padding:4},m.a.createElement(S.m,{size:"sm"},g.a._("Saving your first pin...","Loading text while we save your first pin")),m.a.createElement(S.b,{marginTop:10},m.a.createElement(S.G,{show:!0,accessibilityLabel:g.a._("Saving your first pin...","Loading text while we save your first pin")})))}},{key:"renderFirstPinText",value:function e(){return m.a.createElement(S.b,{paddingX:4,paddingY:3},m.a.createElement(S.K,{size:"lg",bold:!0},g.a._("Where do you want to save this Pin?","Text asking a user what board they want to save their pin to")),m.a.createElement(S.K,{size:"sm"},g.a._("Click to create your first board!","Text indicating a user can select any of the following board names")))}},{key:"renderRow",value:function e(t){var n=t.item,r=t.hovered,o=t.sectionProps,a=void 0===o?{}:o,i="board_section"===n.type;return m.a.createElement(c.a,{disabled:!1,item:n,isSection:i,saveState:null,searchQuery:null,selected:r,size:"lg"})}},{key:"renderUserBoards",value:function e(t){var n=this.props.onCreate,r=[{items:t}],o=new l.a(r.map(function(e){return e.items}));return o.setSelectItem(n),m.a.createElement(h.a,{indexManager:o,onSelectItem:n,renderItem:this.renderRow,sections:r})}},{key:"renderFlyoutCreate",value:function e(){var t=this.props,n=t.boardResource,r=t.createBoardError,o=t.image,a=t.inputName,i=t.isFirstPin,c=t.nameValidatorErrors,l=t.onBoardCreate,s=t.onChangeBoardName,u=t.pinId,d=t.saving,p=0===c.length,f=!!a&&!d&&p&&!r,b=[];n.isLoaded&&(b=n.data.all_boards.slice(0,5));var h=new v.b(this.props.requestContext,"flyout_v2").getIntParamWithNoActivation(1);return m.a.createElement(S.b,{color:"white",direction:"column",display:"flex",height:"100%",position:"static",width:330},m.a.createElement(S.b,{maxHeight:420,overflow:"auto"},n.isLoaded&&0<b.length?m.a.createElement(S.b,null,m.a.createElement(S.b,{paddingX:4,paddingY:3},m.a.createElement(S.K,{size:"sm"},g.a._("Your boards","Text to indicate the following are the user's boards"))),this.renderUserBoards(b),m.a.createElement(S.j,null)):null,i?this.renderFirstPinText():m.a.createElement(S.b,{paddingX:4,paddingY:3},m.a.createElement(S.K,{size:"sm"},g.a._("Click to create a new board","Text indicating a user can select from the following to create a new board"))),m.a.createElement(y.a,{onBoardSelected:this.handleSuggestedBoardSelection,pinId:u,image:o,minHeight:336,inFlyoutExp:!0,oneTapFlyout:1===h})),m.a.createElement(S.j,null),m.a.createElement(S.b,{alignItems:"center",direction:"row",display:"flex",padding:2},m.a.createElement(S.b,{paddingX:2,flex:"grow"},m.a.createElement(S.M,{id:"boardEditName",onChange:function e(t){var n=t.value;return s(n)},placeholder:g.a._("Name your board","Placeholder text for the user to provide a name for their new board"),ref:this.saveTextInputRef,type:"text",value:a})),m.a.createElement(S.b,null,m.a.createElement(S.c,{disabled:!p||!f,onClick:l,color:"red",size:"md",text:g.a._("Create","button to create board")}))),!p&&m.a.createElement(S.b,{marginBottom:2,marginLeft:4,marginTop:1},c.map(function(e,t){return m.a.createElement(S.K,{color:"red",key:t,size:"sm"},e)})))}},{key:"render",value:function e(){var t=this.props,n=t.anchorRef,r=t.inModal,o=t.isFirstPin,a=t.saving,i;if(t.shownWithinMasonry)return m.a.createElement(u.a,{anchor:n,size:"lg",positionRelativeToAnchor:!r,onDismiss:this.handleCancel},o&&a?this.renderFlyoutLoader():this.renderFlyoutCreate());var c=m.a.createElement(S.k,{anchor:n,size:"lg",positionRelativeToAnchor:!r,onDismiss:this.handleCancel},o&&a?this.renderFlyoutLoader():this.renderFlyoutCreate()),l={overlay:{alignItems:"normal",display:"block",padding:0},content:{height:"100%",margin:0}};return r?m.a.createElement(s.a,{noButton:!0,onHide:this.handleCancel,style:l},c):c}}]),o}(r.Component);t.a=Object(f.compose)(Object(p.b)({name:"BoardPickerBoardsResource",key:"boardResource",options:function e(){return{field_set_key:"board_picker",shortlist_suggestions:5}}}),a.b,d.a)(R)},"1Xwf":function(e,t,n){"use strict";var d=n("d6ZO"),y=n.n(d),p=n("W/Cr"),r=n("JyNp"),o=n("suNN"),g=n("gEaE"),a=185;function i(e){var t=e.saveStatusResource.data;return t&&t.pinned_to_board?y.a.createElement(g.b,null,y.a.createElement(g.b,{color:"orange","data-test-id":"already-pinned",display:"flex",padding:3,shape:"rounded",width:a},y.a.createElement(g.K,{align:"center",bold:!0,color:"white",size:"sm"},Object(o.b)(p.a._("Psst! You already saved this Pin to {{ board_name }} ","Toast for already having repinned pin"),{board_name:(t.pinned_to_board||{}).name}).join(" "))),y.a.createElement(g.b,{display:"flex",justifyContent:"center",marginTop:-3},y.a.createElement(g.n,{accessibilityLabel:"",color:"orange",icon:"heart",size:26}))):null}var v=Object(r.b)({name:"PinSaveStatusResource",key:"saveStatusResource",options:function e(t){var n;return{id:t.pin.id}}},{allowStale:!1})(i),S=n("qtmg"),E=n("QuPB"),f=n("AcTh"),c,_=function e(t){var n=t.allowChange,r=t.description,o=t.editing,a=t.onHandleDescriptionBlur,i=t.onHandleDescriptionEdit,c=t.onRefTextArea,l=t.onChange,s=t.onCursorChange,u=function e(t){var n=t.description,r=t.editing,o=t.allowChange;return d.createElement(g.b,{display:"flex",justifyContent:"between",marginLeft:-1,marginRight:-1},d.createElement(g.b,{paddingX:1,overflow:"hidden"},d.createElement(g.K,{bold:!0,color:n.clamped?"darkGray":"gray",size:"sm"},n.clamped?n.clamped:p.a._("Tell us about this Pin..."))),d.createElement(g.b,{paddingX:1},!r&&o&&d.createElement(g.n,{accessibilityLabel:p.a._("Edit description"),icon:"edit"})))};return d.createElement(g.b,{mdDisplay:"flex"},o?d.createElement(f.a,{focused:!0,onBlur:a,onFocus:n&&i,onChange:l,onCursorChange:s,placeholder:p.a._("Tell us about this Pin..."),style:n&&{outline:"none",maxHeight:120,minHeight:60,width:"100%"},ref:c,rows:3,value:r.full}):d.createElement(g.b,{width:"100%"},n?d.createElement(g.O,{onTouch:i},d.createElement(u,{description:r,editing:o,allowChange:n})):d.createElement(u,{description:r,editing:o,allowChange:n})))},w=n("MH3C"),l=n("y2lE");function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t,n){return t&&u(e.prototype,t),n&&u(e,n),e}function m(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?j(e):t}function C(e){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function O(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&P(e,t)}function P(e,t){return(P=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}function j(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function k(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var T="PinPanePinMeta",x=236,R=/#[^(. #,\/$%\^&\*;:{}=\`~()\[\]@|<>)]*/,B=/#[^(. #,\/$%\^&\*;:{}=\`~()\[\]@|<>)]*$/,I=0,F="g",N=function(e){function o(){var e,u;b(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return k(j(j(u=m(this,(e=C(o)).call.apply(e,[this].concat(n))))),"state",{cursorIndex:-1,flyoutCursorIndex:-1,description:u.props.pin&&u.props.pin.description&&u.props.pin.description.trim()||"",editing:!1,hashtagQuery:"",isHashtagFlyoutOpen:!1,editedBefore:!1,flyoutOpened:!1}),k(j(j(u)),"onDescriptionChange",function(e,t){var n=new RegExp(R,F),r="";if(t<e.length){for(var o=n.exec(e),a=n.lastIndex<t;o&&a;)o=n.exec(e),a=n.lastIndex<t;var i=!!o&&R.test(e.slice(o.index,t));a=!!o&&o.index<t,o&&i&&a&&(r=o[0])}else{var c=B.exec(e);r=c?c[0]:""}u.updateDescription(e);var l=R.test(r),s=u.state.isHashtagFlyoutOpen?u.state.flyoutCursorIndex:e.slice(0,t).lastIndexOf("#");u.setState({cursorIndex:t,flyoutCursorIndex:s,description:e,hashtagQuery:r,isHashtagFlyoutOpen:l,flyoutOpened:u.state.flyoutOpened||l})}),k(j(j(u)),"onCursorChange",function(e){var t=u.state,n=t.isHashtagFlyoutOpen,r=t.flyoutCursorIndex;n&&e<r&&u.setState({isHashtagFlyoutOpen:!1})}),k(j(j(u)),"updateDescription",function(e){u.props.updateDescription&&u.props.updateDescription(e)}),k(j(j(u)),"handleDescriptionBlur",function(e){var t=e.target.value.trim(),n=u.state.isHashtagFlyoutOpen;u.updateDescription(t),u.setState({description:t,editing:n})}),k(j(j(u)),"handleDescriptionEdit",function(){u.setState({editing:!0,editedBefore:!0})}),k(j(j(u)),"handleHashtagAddition",function(e){var t=u.props,n,r;(0,t.contextLog)(101,{component:208,element:10249,hashtags:e,objectId:t.pin.id});var o=u.state.flyoutCursorIndex,a=Number(o+u.state.hashtagQuery.length),i,c,l=u.state.description.slice(0,o)+e+" "+u.state.description.slice(a);u.updateDescription(l),u.setState({description:l,editing:!0,hashtagQuery:"",isHashtagFlyoutOpen:!1})}),k(j(j(u)),"handleRefTextArea",function(e){u._textArea=e}),u}return O(o,e),h(o,[{key:"render",value:function e(){var n=this,t=this.props,r=t.color,o=t.isFirstPin,a=t.pin,i=this.state,c=i.description,l=i.editing,s=i.flyoutOpened,u=i.hashtagQuery,d=i.isHashtagFlyoutOpen,p=a.images,f=a.link,b,h=p&&p["236x"],m=h&&h.url||a.image_base64;return y.a.createElement(g.b,{display:"flex",alignItems:"center",justifyContent:"center",position:"relative",width:o?"50%":"",dangerouslySetInlineStyle:{__style:s&&l?{transform:"translateY(-75px)"}:{}}},y.a.createElement(g.b,{display:"flex",direction:"column",alignItems:"center"},a&&a.id&&y.a.createElement(v,{pin:a}),y.a.createElement(g.b,{paddingY:o?9:0,width:216},y.a.createElement(g.b,{maxHeight:s&&l?220:335,shape:"rounded",overflow:"hidden"},m?y.a.createElement(g.p,{alt:c,src:m,naturalHeight:h.height||1,naturalWidth:h.width||1}):!!f&&y.a.createElement(E.a,{color:r||"",description:c,url:f})),y.a.createElement(g.b,{marginTop:2,paddingX:2,id:T},y.a.createElement("div",{ref:function e(t){n.anchor=t}},y.a.createElement(_,{allowChange:!a.is_native,description:Object(w.a)(c),editing:l,hashtagFlyoutOpen:d,onHandleDescriptionBlur:this.handleDescriptionBlur,onHandleDescriptionEdit:this.handleDescriptionEdit,onRefTextArea:this.handleRefTextArea,onChange:this.onDescriptionChange,onCursorChange:this.onCursorChange}))))),this.anchor&&d?y.a.createElement(S.a,{addHashtag:this.handleHashtagAddition,anchor:this.anchor,editing:l,query:u}):null)}}]),o}(d.Component),A=t.a=Object(l.a)(N)},"47hd":function(e,t,n){"use strict";n.d(t,"a",function(){return w});var c=n("d6ZO"),r=n.n(c),o=n("xp+q"),a=n.n(o),i=n("GGB8"),l=n.n(i),s=n("W/Cr"),u=n("gEaE");function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e,t,n){return t&&f(e.prototype,t),n&&f(e,n),e}function h(e,t){return!t||"object"!==d(t)&&"function"!=typeof t?v(e):t}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function y(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}function g(e,t){return(g=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function S(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var E=32,_=13,w=function(e){function a(){var e,t;p(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return S(v(v(t=h(this,(e=m(a)).call.apply(e,[this].concat(r))))),"handleKeyPress",function(e){32!==e.charCode&&13!==e.charCode||(e.preventDefault(),t.props.onClick(e))}),t}return y(a,e),b(a,[{key:"render",value:function e(){var t=this.props,n=t.disabled,r=t.icon,o=t.iconOnly,a=t.onClick,i;return t.saved?c.createElement(u.c,{disabled:!0,text:s.a._("Saved"),size:"sm"}):o?c.createElement("div",{"data-test-id":"SaveButton"},c.createElement(u.o,{accessibilityLabel:s.a._("Save","Accessibility label for the save button"),bgColor:"white",icon:"pin",onClick:function e(t){var n=t.event;return a(n)},iconColor:"darkGray"})):c.createElement("div",{className:l()("SaveButton",n?"SaveButton--disabled":"SaveButton--enabled"),"data-test-id":"SaveButton",onClick:n?void 0:a,onKeyPress:n?void 0:this.handleKeyPress,role:"button",tabIndex:"0"},c.createElement("div",{className:l()("SaveButton__background",n?"SaveButton__background--disabled":"SaveButton__background--enabled")},c.createElement(u.b,{alignItems:"center",dangerouslySetInlineStyle:{__style:{minHeight:40,padding:"10px 14px"}},display:"flex"},r&&c.createElement(u.b,{dangerouslySetInlineStyle:{__style:{marginRight:3,marginLeft:-6}}},c.createElement(u.n,{accessibilityLabel:"",color:n?"gray":"white",icon:"pin",inline:!0,size:20})),c.createElement(u.K,{bold:!0,color:n?"gray":"white"},s.a._("Save","Pin save button label")))))}}]),a}(c.PureComponent);S(w,"defaultProps",{disabled:!1,icon:!0})},"4Lqh":function(e,t){},"8EHR":function(e,t,n){"use strict";var r;function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}function l(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?s(e):t}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}function p(e,t){return(p=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var b=function(e){function n(e){var t;return a(this,n),(t=l(this,u(n).call(this,e,17)))._isPWT=!0,t.viewType=21,t.sampleRate=.1,t.cause=4,t.registeredEvents.PinSaveRequestStartTraceEvent=t.handleStartCurrTimer,t.registeredEvents.PinSaveRequestStopTraceEvent=t.handleStopTiming,t}return d(n,e),c(n,[{key:"handleStopTiming",value:function e(t){if(this._currTimer){var n=this._currTimer;2===t.result&&(n.setResult(2),n.stopTiming(null,this.constructPWT.bind(this))),n.setResult(t.result),n.stopTiming(null,this.constructPWT.bind(this))}}}]),n}(n("b6H4").a);function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}f(b,"traceName","pwt/pin_save_request"),n.d(t,"a",function(){return y});var y=function e(){h(this,e),m(this,"handlers",[b]),m(this,"name","PinSaveRequestStartTraceEvent")}},AcTh:function(e,t,n){"use strict";n.d(t,"a",function(){return y});var r=n("d6ZO"),o=n.n(r),a=n("IaRT"),i=n.n(a);function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}function d(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?h(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}function b(e,t){return(b=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var y=function(e){function r(e,t){var n;return l(this,r),m(h(h(n=d(this,p(r).call(this,e,t)))),"handleChange",function(e){n.props.onChange&&n.props.onChange.call(h(h(n)),e.target.value,e.target.selectionStart),n.setState({value:e.target.value})}),m(h(h(n)),"updateCursor",function(e){n.props.onCursorChange&&n.props.onCursorChange(e.target.selectionStart)}),m(h(h(n)),"handleKeyUp",function(e){n.props.onKeyUp&&n.props.onKeyUp(e),n.updateCursor(e)}),m(h(h(n)),"handleKeyDown",function(e){n.props.onKeyDown&&n.props.onKeyDown(e)}),m(h(h(n)),"handleFocus",function(e){n.props.onFocus&&n.props.onFocus(e),n.updateCursor(e)}),m(h(h(n)),"handleBlur",function(e){n.props.onBlur&&n.props.onBlur(e)}),m(h(h(n)),"handleClick",function(e){n.props.onClick&&n.props.onClick(e),n.updateCursor(e)}),n.state={isFocused:n.props.focused||!1,value:n.props.value},n}return f(r,e),u(r,[{key:"componentDidMount",value:function e(){this.focusIfNeeded()}},{key:"UNSAFE_componentWillReceiveProps",value:function e(t){this.setState({isFocused:t.focused,value:t.value})}},{key:"componentDidUpdate",value:function e(){this.focusIfNeeded()}},{key:"focusIfNeeded",value:function e(){this.state.isFocused&&document.activeElement!==this._textArea&&this._textArea.focus()}},{key:"select",value:function e(){this._textArea.select()}},{key:"render",value:function e(){var n=this,t=this.props;return o.a.createElement("textarea",{className:t.className,cols:t.cols,disabled:t.disabled?"disabled":"",id:t.id,name:t.name,onBlur:this.handleBlur,onChange:this.handleChange,onClick:this.handleClick,onFocus:this.handleFocus,onKeyDown:this.handleKeyDown,onKeyUp:this.handleKeyUp,placeholder:t.placeholder,ref:function e(t){n._textArea=t},rows:t.rows,style:t.style,value:this.state.value})}}]),r}(r.Component);y.defaultProps={validators:[]}},DNL0:function(e,t){},GhED:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",function(){return a});var a=function e(t){var n=t.result;r(this,e),o(this,"name","PinSaveRequestStopTraceEvent"),this.result=n}},Ib0y:function(e,t,n){"use strict";var r;function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}function l(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?s(e):t}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}function p(e,t){return(p=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var b=function(e){function n(e){var t;return a(this,n),(t=l(this,u(n).call(this,e,16)))._isPWT=!0,t.viewType=21,t.sampleRate=.1,t.cause=4,t.registeredEvents.BoardPickerUserNavStartTraceEvent=t.handleStartCurrTimer,t.registeredEvents.BoardPickerUserNavStopTraceEvent=t.handleStopTiming,t}return d(n,e),c(n,[{key:"handleStopTiming",value:function e(t){if(this._currTimer){var n=this._currTimer;2===t.result&&(n.setResult(2),n.stopTiming(null,this.constructPWT.bind(this))),n.setResult(t.result),n.stopTiming(null,this.constructPWT.bind(this))}}}]),n}(n("b6H4").a);function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}f(b,"traceName","pwt/board_picker"),n.d(t,"a",function(){return y});var y=function e(){h(this,e),m(this,"handlers",[b]),m(this,"name","BoardPickerUserNavStartTraceEvent")}},K2Yy:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var d=n("d6ZO"),f=n.n(d),r=n("DUIN"),o=n("4Lqh"),a=n.n(o),l=n("Ib0y"),b=n("W/Cr"),c=n("R6a3"),i=n("IaRT"),s=n.n(i),u=n("47hd"),p=n("MSpZ"),h=n("1QHH"),m=n("iySJ"),y=n("YZkw"),g=n("MQ2h"),v=n.n(g),S=n("6oz1"),E=n("FHH+"),_=n("RklN"),w=n.n(_),C=n("aC/n"),O=n("NyaW"),P=n("gEaE");function j(e){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function k(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function T(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function x(e,t,n){return t&&T(e.prototype,t),n&&T(e,n),e}function R(e,t){return!t||"object"!==j(t)&&"function"!=typeof t?N(e):t}function B(e){return(B=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function I(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&F(e,t)}function F(e,t){return(F=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}function N(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function A(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var D=function(e){function o(){var e,a;k(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return A(N(N(a=R(this,(e=B(o)).call.apply(e,[this].concat(n))))),"handleCancel",function(){a.props.onCancel()}),A(N(N(a)),"handleBoardSelected",function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n=a.props.onChangeBoardName,r=Object(_.findDOMNode)(a.textInput);if(r instanceof HTMLElement){var o=r.querySelector("input");o&&o.focus()}n(e,t)}),A(N(N(a)),"handleBoardCreateFormSubmit",function(e){e.preventDefault();var t=a.props.onBoardCreate;t&&t()}),A(N(N(a)),"saveTextInputRef",function(e){a.textInput=e}),a}return I(o,e),x(o,[{key:"renderFlyoutFBC",value:function e(){var t=this.props,n=t.createBoardError,r=t.fbcFlyoutExpGroup,o=t.image,a=t.inputName,i=t.nameValidatorErrors,c=t.onBoardCreate,l=t.onChangeBoardName,s=t.pinId,u=t.saving,d=0===i.length,p=!!a&&!u&&d&&!n;return f.a.createElement(P.b,{color:"white",direction:"column",display:"flex",height:"100%",position:"static",width:330},f.a.createElement(P.b,null,f.a.createElement(P.b,{paddingX:4,paddingY:3},f.a.createElement(P.K,{size:"lg",bold:!0},b.a._("Where do you want to save this Pin?")),f.a.createElement(P.K,{size:"sm"},b.a._("Click to create your first board!"))),f.a.createElement(C.a,{onBoardSelected:this.handleBoardSelected,pinId:s,image:o,minHeight:336,inFlyoutExp:!0,oneTapFlyout:"enabled_1_tap"===r}),f.a.createElement(P.j,null),f.a.createElement("form",{onSubmit:this.handleBoardCreateFormSubmit},f.a.createElement(P.b,{alignItems:"center",direction:"row",display:"flex",padding:2},f.a.createElement(P.b,{paddingX:2,flex:"grow"},f.a.createElement(P.M,{id:"boardEditName",onChange:function e(t){var n=t.value;return l(n)},placeholder:b.a._("Name your board"),ref:this.saveTextInputRef,type:"text",value:a})),f.a.createElement(P.b,null,f.a.createElement(P.c,{disabled:!d||!p,onClick:c,color:"red",size:"md",text:b.a._("Create","button to create board")})))),!d&&f.a.createElement(P.b,{marginBottom:2,marginLeft:4,marginTop:1},i.map(function(e,t){return f.a.createElement(P.K,{color:"red",key:t,size:"sm"}," ",e)}))))}},{key:"renderGestaltFBC",value:function e(){var t=this.props,n=t.createBoardError,r=t.inputName,o=t.nameValidatorErrors,a=t.onBoardCreate,i=t.onChangeBoardName,c=t.pinId,l=t.saving,s=0===o.length,u=!!r&&!l&&s&&!n;return f.a.createElement(P.b,{color:"white",direction:"column",display:"flex",height:"100%",position:"absolute",right:!0,shape:"roundedRight",top:!0,width:"50%",dangerouslySetInlineStyle:{__style:{borderLeft:"solid 1px #dfdfdf"}}},f.a.createElement("form",{onSubmit:this.handleBoardCreateFormSubmit},f.a.createElement(P.b,{marginTop:7,paddingX:3,xs:{display:"flex",column:12}},f.a.createElement(P.b,{column:9,marginLeft:3,marginRight:3},f.a.createElement(P.M,{id:"boardEditName",onChange:function e(t){var n=t.value;return i(n)},placeholder:b.a._("Name your board"),ref:this.saveTextInputRef,type:"text",value:r}),f.a.createElement(P.b,{height:24,marginTop:1},!s&&f.a.createElement(d.Fragment,null,o.map(function(e,t){return f.a.createElement(P.K,{color:"red",key:t,size:"sm"}," ",e)}))),!!n&&f.a.createElement(P.K,{align:"center",bold:!0,color:"red",size:"sm"},n)),f.a.createElement(P.b,{flex:"none"},f.a.createElement(P.c,{disabled:!s||!u,onClick:a,color:"red",size:"md",text:b.a._("Create","button to create board")})))),f.a.createElement(P.j,null),f.a.createElement(C.a,{onBoardSelected:this.handleBoardSelected,pinId:c,inFirstBoardCreateGestaltExp:!0}))}},{key:"render",value:function e(){var t;return["enabled_1_tap","enabled_2_tap","enabled_education"].includes(this.props.fbcFlyoutExpGroup)?this.renderFlyoutFBC():this.renderGestaltFBC()}}]),o}(d.Component),L=Object(O.a)(D),M=n("0XFc"),H=n("biwq"),K=n("1Xwf"),z=n("Cjb7"),U=n("THYI"),W=n.n(U),q=n("FJZF"),X=n("mHth");function Q(e){return(Q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function G(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(e){re(t,e,n[e])})}return t}function Y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function V(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Z(e,t,n){return t&&V(e.prototype,t),n&&V(e,n),e}function J(e,t){return!t||"object"!==Q(t)&&"function"!=typeof t?ne(e):t}function $(e){return($=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function ee(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&te(e,t)}function te(e,t){return(te=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}function ne(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function re(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var oe=1e3,ae=function(e){function o(){var e,u;Y(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return re(ne(ne(u=J(this,(e=$(o)).call.apply(e,[this].concat(n))))),"state",{pinDescription:u.props.pin&&u.props.pin.description||"",isRequestPending:!1,bannerText:b.a._("Create a board for your Pin to live on"),pinSuccess:!1}),re(ne(ne(u)),"getPinResource",function(){var e=u.props,t=e.color,n=e.location,r=e.pin,o=e.method,a=e.guid,i=r.id?"RepinResource":"PinResource",c="";r.id&&(c=Object(H.a)(r,n)||"".concat(r.tracking_params,"~0"));var l=!r.id&&r.image_url?q.a.prependSchemeIfNeeded(r.image_url,r.link):"",s={clientTrackingParams:c,color:t||"",description:u.state.pinDescription||"",guid:a||"",link:r.link||"",image_base64:r.image_base64,image_url:l,is_buyable_pin:!1,is_video:r.is_video,media_upload_id:r.media_upload_id||"",method:o||"",pin_id:r.id||"",title:""};return W.a.create(i,s)}),re(ne(ne(u)),"updateDescription",function(e){u.setState({pinDescription:e})}),re(ne(ne(u)),"handleSaveToBoard",function(e){if(!u.state.isRequestPending){u.setState({isRequestPending:!0});var t=u.getPinResource();t.options.board_id=e.id,t.callCreate({showError:!0}).then(u._onPinCreateSuccess).finally(function(){u.setState({isRequestPending:!1})})}}),re(ne(ne(u)),"showSaveSuccess",function(){u.setState({pinSuccess:!0,bannerText:b.a._("Saved!")})}),re(ne(ne(u)),"forceRefresh",function(){Object(E.a)("/")}),re(ne(ne(u)),"_onPinCreateSuccess",function(e){var t=u.props,n=t.pin,r=t.experienceClient,o=t.experience,a=t.onComplete,i=e.resource_response.data;n.id&&u.triggerCommonPinCreateEvents(i),o&&r.completeExperience(o.placement_id,o.experience_id,!0),u.showSaveSuccess(),r.fetchExperienceForPlacement(1000141),setTimeout(u.forceRefresh,oe),a&&a()}),re(ne(ne(u)),"triggerCommonPinCreateEvents",function(e){var t=u.props.pin;z.a.instance.publish("currentUser","pinCreated",e),z.a.instance.publish(e.board.id,"pinCreated",{pin:e}),t.id&&z.a.instance.publish(t.id,"pinRepinned",e)}),re(ne(ne(u)),"close",function(){u.props.onClose&&u.props.onClose()}),u}return ee(o,e),Z(o,[{key:"componentDidMount",value:function e(){var t=this.props,n=t.experience,r=t.experienceClient;n&&r.viewExperience(n.placement_id,n.experience_id)}},{key:"renderGestaltFPC",value:function e(){var t=this.props,n=t.color,r=t.pin;return f.a.createElement(P.b,{minHeight:370},f.a.createElement(K.a,{color:n,pin:r,updateDescription:this.updateDescription,isFirstPin:!0}),f.a.createElement(L,{name:"",onCancel:this.close,onCreate:this.handleSaveToBoard,pinId:r.id}),f.a.createElement("div",{className:this.state.pinSuccess?"FirstPinCreate__firstSuccessBanner":"FirstPinCreate__firstPinBanner"},this.state.bannerText))}},{key:"renderFlyoutFPC",value:function e(){var t=this.props,n=t.anchorRef,r=t.pin;return f.a.createElement(M.a,{anchorRef:n,dismissHandler:this.close,isFirstPin:!0,inModal:!0,saving:this.state.pinSuccess,image:r.images.orig,name:"",onCancel:this.close,onCreate:this.handleSaveToBoard,pinId:r.id})}},{key:"render",value:function e(){return this.props.showFlyout?this.renderFlyoutFPC():this.renderGestaltFPC()}}]),o}(d.Component);function ie(e){return Object(d.createElement)(Object(g.compose)(Object(r.connect)(function(e){return{location:e.location}}),X.a)(ae),G({action:"repin"},e))}var ce=n("te8a"),le=n("mSxZU"),se=n("kzic");function ue(e){return(ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function de(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function pe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function fe(e,t,n){return t&&pe(e.prototype,t),n&&pe(e,n),e}function be(e,t){return!t||"object"!==ue(t)&&"function"!=typeof t?ge(e):t}function he(e){return(he=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function me(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ye(e,t)}function ye(e,t){return(ye=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}function ge(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ve(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"PinSaveButton",function(){return Ee});var Se=[500639,11022],Ee=function(e){function r(e,t){var c;de(this,r),ve(ge(ge(c=be(this,he(r).call(this,e,t)))),"componentWillUnmount",function(){c._repinCompletionPromise&&c._repinCompletionPromise.cancel()}),ve(ge(ge(c)),"setCompletionPromise",function(e){c._repinCompletionPromise=e,c._repinCompletionPromise.promise.then(function(){c.handleRepinHide()})}),ve(ge(ge(c)),"_repinCompletionPromise",null),ve(ge(ge(c)),"isInShareCallback",!1),ve(ge(ge(c)),"handleRepinHide",function(){c.setState({isRepinModalOpen:!1});var e=c.props,t=e.onToggleModal,n=e.onToggleFlyout,r;e.showFlyout&&n?n(!1,!1):t&&!c.isInShareCallback&&t(!1)}),ve(ge(ge(c)),"handleSaveButtonClick",c.props.authAction(function(e){e&&(e.preventDefault(),e.stopPropagation());var t=c.props,n=t.onClickCallback,r=t.onToggleModal,o=t.onToggleFlyout,a=t.oneTapSave,i=t.showFlyout;n&&n(),a?a.saved||a.save():(p.a.sendEvent(new l.a),i&&o?o(!0,!0,"save"):r&&r(!0),c.setState({isRepinModalOpen:c.props.isAuth}))})),ve(ge(ge(c)),"handleShareCallback",function(){var e=c.props.onShareCallback;c.isInShareCallback=!0,e&&e()}),ve(ge(ge(c)),"renderPinToBoardRepin",function(){var e=c.props,t=e.onToggleModal,n=e.pin,r=e.showFlyout,o=c.state,a=o.isFPE,i;return o.isRepinModalOpen?a?c.renderFPE():f.a.createElement(le.c,{anchorRef:c.saveButtonRef,newsId:c.props.newsId,isCloseupPin:c.props.isCloseupPin,isInModal:!0,onClose:c.handleRepinHide,onCloseAndShare:c.handleShareCallback,onToggleModal:t,pin:n,pwtAuxData:{pin_create_method:"repin"},showFlyout:r,showSuccessToast:!0,setCompletionPromise:c.setCompletionPromise,additionalCreateFields:{is_stl_pin:Object(ce.d)(n)}}):null});var n=e.experience;return c.state={isFPE:!!n&&Se.includes(n.experience_id),isRepinModalOpen:e.showRepinOnInitialRender||!1,savedPin:{id:""}},c}return me(r,e),fe(r,[{key:"shouldComponentUpdate",value:function e(t,n){return!this.isFPERemoved(t)}},{key:"isFPERemoved",value:function e(t){var n=this.state.isFPE,r=t.experience;return n&&(!r||!Se.includes(r.experience_id))}},{key:"renderFPE",value:function e(){var t=this.props,n=t.completePinSave,r=t.experience,o=t.pin,a=t.showFlyout,i=f.a.createElement(ie,{anchorRef:this.saveButtonRef,showFlyout:a,experience:r,isInModal:!0,onClose:this.handleRepinHide,onComplete:n,pin:o,pwtAuxData:{pin_create_method:"repin"}});return a?i:f.a.createElement(c.a,{accessibilityCloseLabel:b.a._("Close","Accessible close create board education label"),accessibilityModalLabel:b.a._("Create board","Accessible create board education modal label"),footer:f.a.createElement("div",{className:"FirstBoardCreate__education"},b.a._("Boards are where you save your Pins","Text explaining that boards are used to collect and save pins")),heading:b.a._("Create board","Create board education modal label"),onDismiss:this.handleRepinHide,size:"lg"},i)}},{key:"render",value:function e(){var n=this,t=this.props,r=t.anchorString,o=t.oneTapSave,a=t.iconOnly,i=Object(m.a)(r)(u.a);return f.a.createElement("div",{ref:function e(t){n.saveButtonRef=t}},f.a.createElement(S.b,{name:"web_text_only_save_button"},function(e){var t=e.anyEnabled;return f.a.createElement(i,{icon:!t,onClick:n.handleSaveButtonClick,saved:o&&o.saved,iconOnly:a,isPulsarDisplayed:!n.state.isRepinModalOpen})}),this.renderPinToBoardRepin())}}]),r}(d.Component);ve(Ee,"contextTypes",{language:s.a.string,userAgent:s.a.shape({browserName:s.a.string.isRequired}).isRequired}),ve(Ee,"defaultProps",{anchorString:""});var _e=function e(t){return{completePinSave:function e(){return t({type:"COMPLETE_PIN_SAVE"})}}},we=t.default=Object(g.compose)(h.a,se.withRouter,Object(y.a)(33),Object(r.connect)(function(e){return{isAuth:e.viewer.isAuth,email:e.viewer.isAuth?e.viewer.email:void 0}},_e))(Ee)},MH3C:function(e,t,n){"use strict";n.d(t,"b",function(){return r}),n.d(t,"a",function(){return a});var o=n("BAXv"),r=function e(t,n){if(!n)return t;var r=new RegExp(/http(s?):/);if(!r.test(t)){var o=r.exec(n),a;if(o&&o.length)t=o[0]+t}return t},a=function e(t){var n=50,r=o.a.MAX_CHARS_FOR_BOARD_PIN_DESCRIPTION;return{clamped:50<t.length?t.slice(0,50).trim()+"…":t,full:t.length>r?t.slice(0,r):t}}},NyaW:function(e,t,n){"use strict";t.a=R;var r=n("d6ZO"),i=n.n(r),o=n("DUIN"),c=n("BAXv"),d=n("W/Cr"),a=n("i0Ug"),l=n("g5tP"),s=n("HLDn"),u=n("S+Qs"),p=n("MQ2h"),f=n.n(p),b=n("FrUj");function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function m(e,t){if(null==e)return{};var n=y(e,t),r,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)r=a[o],0<=t.indexOf(r)||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function y(e,t){if(null==e)return{};var n={},r=Object.keys(e),o,a;for(a=0;a<r.length;a++)o=r[a],0<=t.indexOf(o)||(n[o]=e[o]);return n}function g(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(e){j(t,e,n[e])})}return t}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function S(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function E(e,t,n){return t&&S(e.prototype,t),n&&S(e,n),e}function _(e,t){return!t||"object"!==h(t)&&"function"!=typeof t?P(e):t}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function C(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&O(e,t)}function O(e,t){return(O=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}function P(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function j(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function k(a){var e,t;return t=e=function(e){function o(){var e,u;v(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return j(P(P(u=_(this,(e=w(o)).call.apply(e,[this].concat(n))))),"state",{createBoardError:null,inputName:u.props.prefilledName||"",nameValidators:[Object(b.q)({message:d.a._("Don't forget to name your board!")}),Object(b.k)({max:c.a.MAX_CHARS_FOR_BOARD_TITLE})],nameValidatorErrors:[],privacy:u.props.isAdAccountOwner?c.a.BoardPrivacy.PUBLIC:c.a.BoardPrivacy.PROTECTED,saving:!1}),j(P(P(u)),"handleChangeName",function(e,t){var n=Object(b.t)(u.state.nameValidators,e);u.setState({inputName:e,nameValidatorErrors:n,createBoardError:null},function(){t&&u.handleCreate()})}),j(P(P(u)),"handleChangePrivacy",function(){var e=u.state.privacy===c.a.BoardPrivacy.SECRET?c.a.BoardPrivacy.PUBLIC:c.a.BoardPrivacy.SECRET;u.setState({privacy:e})}),j(P(P(u)),"handleCreate",function(){var e=u.state,t=e.inputName,n=e.privacy,r=u.props,o=r.createBoard,a=r.invalidateResource,i=r.onCreate,c=r.isAdAccountOwner,l=r.advertiser_id,s=g({privacy:n,name:t},!c&&l?{advertiser_id:l}:{});u.setState({saving:!0,createBoardError:null}),o(s).then(function(e){u.setState({saving:!1}),i(e)}).catch(function(e){var t=d.a._("Uh oh! Something went wrong.");if(e.message){var n=e.message,r=e.message_detail;t=r?"".concat(n," ").concat(r):n}else"string"==typeof e&&(t=e);u.setState({saving:!1,createBoardError:t})}),a(n)}),u}return C(o,e),E(o,[{key:"UNSAFE_componentWillReceiveProps",value:function e(t){t.prefilledName&&this.setState({inputName:t.prefilledName})}},{key:"render",value:function e(){var t=this.props,n=t.createBoard,r=t.invalidateResource,o=m(t,["createBoard","invalidateResource"]);return i.a.createElement(a,Object.assign({onChangeBoardName:this.handleChangeName,onChangeBoardPrivacy:this.handleChangePrivacy,onBoardCreate:this.handleCreate},o,this.state))}}]),o}(r.Component),j(e,"displayName","WithBoardCreatePane(".concat(a.displayName||a.name,")")),t}function T(e){var t=e.advertiser,n=e.viewer,r=!t||n.isAuth&&t.owner_user_id===n.id,o=t&&t.id;return g({isAdAccountOwner:r},o?{advertiser_id:o}:{})}function x(n,r){return{invalidateResource:function e(t){n(Object(u.f)("BoardsResource",Object(s.a)(r.viewer.username,t===c.a.BoardPrivacy.SECRET)))},createBoard:function e(t){return n(Object(l.f)(t))}}}function R(e){return Object(p.compose)(a.a,Object(o.connect)(T,x),k)(e)}},QuPB:function(e,t,n){"use strict";t.a=l;var o=n("d6ZO"),r=n.n(o),a=n("BAXv"),i=n("FJZF"),c=n("gEaE");function l(e){var t=e.url,n=e.description,r=e.color;return r=r||a.a.DEFAULT_IMAGELESS_PIN_COLOR,o.createElement(c.b,{shape:"rounded",height:216,width:"100%",dangerouslySetInlineStyle:{__style:{background:r}}},o.createElement(c.b,{maxHeight:200,padding:4,overflow:"hidden"},t&&o.createElement(c.b,{marginBottom:2},o.createElement(c.K,{color:"white",size:"xs"},i.a.parse(t).hostname||t)),o.createElement(c.b,{maxHeight:144},o.createElement(c.K,{bold:!0,color:"white",overflow:"normal",size:"lg"},n))))}},"Td/c":function(e,t,n){"use strict";var u=n("d6ZO"),r=n.n(u),o=n("DUIN"),i=n("BAXv"),c=n("HEYN"),d=n("W/Cr"),p=n("XSNT"),f=n("hkVh"),a=n("kxCB"),l=n("MQ2h"),s=n.n(l),b=n("gEaE");function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function m(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(e){O(t,e,n[e])})}return t}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function v(e,t,n){return t&&g(e.prototype,t),n&&g(e,n),e}function S(e,t){return!t||"object"!==h(t)&&"function"!=typeof t?C(e):t}function E(e){return(E=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function _(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&w(e,t)}function w(e,t){return(w=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}function C(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function O(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var P=function(e){function t(e){var a;return y(this,t),O(C(C(a=S(this,E(t).call(this,e)))),"onCreateSection",function(){var e=a.props,t=e.board,n=e.dispatch,r=e.completeCreateSectionAction,o=e.pinImport;return a.setState({isSaving:!0}),n(Object(c.a)({boardId:t.id,name:a.state.inputName.trim(),pinImport:o})).then(function(e){a.setState({isSaving:!1,newSection:e}),r(e)}).catch(function(e){a.setState({createError:e.message,isSaving:!1})})}),O(C(C(a)),"handleKeyDown",function(e){var t=a.state,n=t.createError,r=t.inputName;[i.a.KeyCode.ENTER,i.a.KeyCode.NUMPAD_ENTER].includes(e.which)&&!n&&r.trim()&&a.onCreateSection()}),O(C(C(a)),"handleChangeName",function(e){a.setState({createError:null,inputName:e})}),O(C(C(a)),"handleInputRef",function(e){a.setState({inputRef:e})}),a.state={createError:null,inputName:e.initialName||"",inputRef:null,newSection:null,isSaving:!1},a}return _(t,e),v(t,[{key:"componentDidUpdate",value:function e(t,n){var r=this.state,o=r.createError,a=r.inputRef;!a||n.inputRef&&!o||a.focus()}},{key:"render",value:function e(){var t=this.props,n=t.onClearModal,r=t.showTitle,o=t.positionRelative,a=this.state,i=a.createError,c=a.inputName,l=a.isSaving,s=!!c.trim()&&!i;return u.createElement(b.b,{xs:{display:"flexColumn"},color:"white",flex:"grow",top:!0,bottom:!0,right:!0,position:o?"relative":"absolute",shape:"rounded",width:"100%",dangerouslySetInlineStyle:{__style:{borderLeft:"1px solid #f5f5f5"}}},r&&u.createElement(b.b,{marginTop:3,paddingX:6,paddingY:3},u.createElement(b.K,{size:"xl",bold:!0},d.a._("Add section","Title in the add section modal"))),u.createElement(b.b,{padding:3},u.createElement(b.b,{marginBottom:2},u.createElement(b.q,{htmlFor:"sectionEditName"},u.createElement(b.K,{size:"sm",color:i?"red":"gray"},d.a._("Name","Board section name")))),u.createElement(b.b,null,u.createElement(p.a,{className:"boardCreateInput".concat(i?" error":""),id:"sectionEditName",name:"sectionName",onChange:this.handleChangeName,onKeyDown:this.handleKeyDown,placeholder:d.a._('Like "Lighting"',"Placeholder for board section name"),ref:this.handleInputRef,type:"text",value:c,style:m({border:"none",outline:"none",fontSize:15,marginBottom:5,padding:6,width:"95%",color:"#333"},i?{background:"#e6abad",border:"1px solid #e60023",borderRadius:3}:{})}))),u.createElement(b.j,null),u.createElement(b.b,{display:"flex",flex:"grow"}),u.createElement(b.j,null),u.createElement(b.b,{padding:6},i&&u.createElement(b.b,{marginBottom:3},u.createElement(b.K,{align:"center",bold:!0,color:"red",size:"sm"},i)),u.createElement(b.b,{display:"flex",justifyContent:"between"},u.createElement(b.c,{onClick:n,text:d.a._("Cancel","cancel section add"),inline:!0}),u.createElement(f.a,{disabled:!s||l,onClick:this.onCreateSection,submitting:l,text:d.a._("Add","add a new section")}))))}}]),t}(u.Component);t.a=Object(l.compose)(Object(o.connect)(),a.a)(P)},WxTF:function(e,t,n){"use strict";var u=n("d6ZO"),a=n.n(u),d=n("W/Cr"),i=n("XSNT"),r=n("IaRT"),o=n.n(r),c=n("skut"),l=n("pN+K"),p=n("5tOk"),f=n("gEaE");function b(e){var t=e.body,n=e.img,r=e.onClick,o=e.selected,a=e.title,i=e.username,c=e.valid,l=i||t,s=function e(t,n){if(i)return t?u.createElement(f.n,{icon:"check-circle",color:"red",accessibilityLabel:d.a._("Confirmation an invite will be sent","Alt tags on a check box on the board create flow for board invites"),size:32}):u.createElement(f.b,{height:32,width:32,shape:"circle",dangerouslySetInlineStyle:{__style:{border:"solid 1px #B5B5B5"}}});var r={text:d.a._("Sent","Sent a board collaborator invite"),color:"gray",size:"sm",disabled:!0,inline:!0};return t||(r.text=d.a._("Invite","Add board collaborator invite"),r.disabled=Boolean(!n)),u.createElement(f.c,r)};return u.createElement(f.b,{marginBottom:4},u.createElement(f.O,{onTouch:r},u.createElement(f.b,{display:"flex",alignItems:"center",direction:"row",width:"100%"},n,u.createElement(f.b,{marginLeft:3,flex:"grow",marginRight:2},u.createElement(f.b,{marginBottom:1},u.createElement(f.K,{bold:!0,size:"md",truncate:!0},a)),u.createElement(f.K,{size:"xs",truncate:!0},l)),u.createElement(f.b,{marginLeft:2},s(o,c)))))}function s(t,e,n){if("user_share_suggestion"===t.type||"user"===t.type){var r=u.createElement(f.a,{name:t.title||t.full_name,src:t.image_medium_url,size:"md"});return u.createElement(b,{img:r,onClick:function e(){return n(t)},selected:e,title:t.full_name,username:t.username})}if("email"===t.type){var o=t.id,a=t.valid,i=u.createElement(f.b,{shape:"circle",color:"lightGray",height:40,width:40,display:"flex",justifyContent:"center",alignItems:"center"},u.createElement(f.n,{color:"darkGray",icon:"envelope",size:20,accessibilityLabel:d.a._("Email icon","Email icon on board create modal")})),c=Object(p.c)(d.a._("Email {{ email }}"),{email:o}),l,s;return s=e?(l=d.a._("Done!","Text that lets the user know we sent the board invite email"),function e(){}):(l=a?d.a._("Click to send!","Text that lets the user know they can successfully send a board invite email"):d.a._("Keep typing!","Text that lets a user know the email they are typing is not valid yet"),function e(){return a?n(t):void 0}),u.createElement(b,{body:l,img:i,onClick:s,selected:e,title:c,valid:a})}}var h=n("T0l7");function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function v(e,t,n){return t&&g(e.prototype,t),n&&g(e,n),e}function S(e,t){return!t||"object"!==m(t)&&"function"!=typeof t?C(e):t}function E(e){return(E=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function _(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&w(e,t)}function w(e,t){return(w=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}function C(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function O(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function P(e,t,n){var r=e.id;return t===n.findIndex(function(e){return e.id===r})}var j=function(e){function o(){var e,i;y(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return O(C(C(i=S(this,(e=E(o)).call.apply(e,[this].concat(n))))),"state",{selectedCollaborators:[],showSocialConnectPanel:!1,typeaheadSuggestions:[],value:""}),O(C(C(i)),"handleTextFieldChange",function(e){i.setState({value:e})}),O(C(C(i)),"handleCollaboratorClick",function(e){var t=e.id,n=e.type;i.isIdSelected[t]=!i.isIdSelected[t];var r,o=i.state.selectedCollaborators.concat([e]),a="email"===n?h.c:h.d;i.props.onSelectedCollaboratorsChange({id:t,resource:a}),i.setState({selectedCollaborators:o})}),O(C(C(i)),"handleTypeaheadSuggestionsChange",function(e){i.setState({typeaheadSuggestions:e})}),O(C(C(i)),"isIdSelected",{}),i}return _(o,e),v(o,[{key:"render",value:function e(){var n=this,t=this.state.value,r,o=(""===t?this.props.shareSuggestions:this.state.selectedCollaborators.concat(this.state.typeaheadSuggestions).concat({type:"email",id:t,valid:Object(p.g)(t)}).concat(this.props.shareSuggestions).filter(P)).map(function(e,t){return s(e,n.isIdSelected[e.id],n.handleCollaboratorClick)}).map(function(e,t){return a.a.createElement("li",{key:t},e)});return a.a.createElement(f.b,{display:"flex",direction:"column",height:"100%"},a.a.createElement(f.b,{paddingX:3,marginBottom:4,marginTop:3},a.a.createElement(f.K,{size:"md"},d.a._("Add collaborators (optional)","Optional field to add collaborators to a board on board create"))),a.a.createElement(f.b,{paddingX:3,marginBottom:4,width:"100%"},a.a.createElement(f.b,{dangerouslySetInlineStyle:{__style:{borderRadius:"4px"}},color:"lightGray",flex:"grow",display:"flex",alignItems:"center",height:40,position:"relative"},a.a.createElement(f.b,{paddingX:4,height:"100%",position:"absolute",top:!0,left:!0,display:"flex",alignItems:"center"},a.a.createElement(f.n,{accessibilityLabel:"",icon:"search",size:20})),a.a.createElement(c.a,{onTypeaheadSuggestionsChange:this.handleTypeaheadSuggestionsChange,resourceName:"ShareSuggestionsTypeaheadResource",value:t},a.a.createElement(i.a,{className:"SearchBoxInput",onChange:this.handleTextFieldChange,placeholder:d.a._("Search by name or email"),value:t})))),a.a.createElement(f.b,{paddingX:3,overflow:"scrollY"},a.a.createElement("ul",null,o)))}}]),o}(u.Component);O(j,"defaultProps",{shareSuggestions:[]});var k=t.a=Object(l.b)({name:"ShareSuggestionsResource",key:"shareSuggestions"},{allowStale:!1})(j)},mSxZU:function(e,t,n){"use strict";var i=n("d6ZO"),v=n.n(i),r=n("DUIN"),a=n("28Da"),g=n("vBru"),S=n("wUWH"),b=n("HcmU"),h=n("DKBQ"),c=n("0XFc"),E=n("biwq"),_=n("W/Cr"),w=n("R6a3");function m(e){return{type:"PIN_CREATED_VIA_CREATOR_CHECKLIST",payload:{pin_created_via_creator_checklist:e}}}var C=n("1Xwf");function y(e,t){return{type:"PIN_SAVE",payload:{pinId:e,saved:t}}}var l=n("8EHR"),s=n("GhED"),u=n("UVpX"),d=n("Svvu"),p=n("EAiy"),o=n("pN+K"),f=n("MQ2h"),O=n.n(f),P=n("gEaE");function j(e){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function k(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function T(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function x(e,t,n){return t&&T(e.prototype,t),n&&T(e,n),e}function R(e,t){return!t||"object"!==j(t)&&"function"!=typeof t?N(e):t}function B(e){return(B=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function I(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&F(e,t)}function F(e,t){return(F=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}function N(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function A(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var D=function(e){function a(){var e,n;k(this,a);for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return A(N(N(n=R(this,(e=B(a)).call.apply(e,[this].concat(r))))),"state",{isFacebookChecked:n.props.resourceLoaded&&!!n.props.userSocial&&n.props.userSocial.facebook_publish_stream_enabled,isTwitterChecked:n.props.resourceLoaded&&!!n.props.userSocial&&n.props.userSocial.twitter_publish_enabled}),A(N(N(n)),"handleTwitterCheckboxChanged",function(){var e=!n.state.isTwitterChecked;n.setState({isTwitterChecked:e}),n.props.onSocialConnect(d.default.TWITTER,e)}),A(N(N(n)),"handleFacebookCheckboxChanged",function(){var t=!n.state.isFacebookChecked;t?u.a.maybeRequestFbTimelinePermission({success:function e(){n.setState({isFacebookChecked:!0}),p.a.set("facebook_publish_stream_enabled",t),n.props.onSocialConnect(d.default.FACEBOOK,t)},error:function e(){n.setState({isFacebookChecked:!1}),p.a.set("facebook_publish_stream_enabled",!1),n.props.onSocialConnect(d.default.FACEBOOK,t)}}):(n.setState({isFacebookChecked:!1}),p.a.set("facebook_publish_stream_enabled",!1),n.props.onSocialConnect(d.default.FACEBOOK,t))}),A(N(N(n)),"renderFacebookShare",function(){return i.createElement(P.b,{display:"flex",alignItems:"center",marginLeft:2},i.createElement(P.e,{checked:n.state.isFacebookChecked,id:"share_facebook",onChange:n.handleFacebookCheckboxChanged,size:"sm"}),i.createElement(P.q,{htmlFor:"share_facebook"},i.createElement(P.b,{marginLeft:2},i.createElement(P.K,null,_.a._("Post to Facebook")))))}),A(N(N(n)),"renderTwitterShare",function(){return i.createElement(P.b,{display:"flex",alignItems:"center",marginLeft:5},i.createElement(P.e,{checked:n.state.isTwitterChecked,id:"share_twitter",onChange:n.handleTwitterCheckboxChanged,size:"sm"}),i.createElement(P.q,{htmlFor:"share_twitter"},i.createElement(P.b,{marginLeft:2},i.createElement(P.K,null,_.a._("Post to Twitter")))))}),n}return I(a,e),x(a,[{key:"UNSAFE_componentWillReceiveProps",value:function e(t){var n=t.resourceLoaded,r=t.userSocial;n&&r&&this.setState({isFacebookChecked:!!r.facebook_publish_stream_enabled,isTwitterChecked:!!r.twitter_publish_enabled})}},{key:"render",value:function e(){var t=this.props,n=t.resourceLoaded,r=t.userSocial;if(!n||!r)return null;var o=r.connected_to_facebook,a=r.twitter_url;return!(!o&&!a)&&i.createElement(P.b,{display:"flex",padding:2},o&&this.renderFacebookShare(),a&&this.renderTwitterShare())}}]),a}(i.Component),L=Object(f.compose)(Object(r.connect)(function(e){var t=e.viewer;return{userId:t.isAuth?t.id:""}}),Object(o.b)({name:"UserResource",key:"userSocial",options:function e(t){return{user_id:t.userId,field_set_key:"social_connect"}}}))(D),M=n("Cjb7"),H=n("THYI"),K=n.n(H),z=n("DNL0"),U=n.n(z),W=n("6oHq"),q=n("sYje"),X=n("JqyP");function Q(e){var t,n,r="-7 -7 30 30",o;switch(e.name){case"facebook":o=i.createElement("circle",{cx:"8",cy:"8",r:"15",fill:"#3B5998"}),n=i.createElement("path",{fill:"#fff",d:"M9.267 16V8.702h2.506l.376-2.845H9.267V4.041c0-.823.234-1.384 1.442-1.384l1.541-.001V.112A21.09 21.09 0 0 0 10.005 0C7.783 0 6.262 1.325 6.262 3.76v2.097H3.75v2.845h2.512V16h3.005z"});break;case"messenger":o=i.createElement("circle",{cx:"8",cy:"8",r:"15",fill:"#1DA1F2"}),n=i.createElement("path",{fill:"#fff",d:"M8 0C3.582 0 0 3.316 0 7.407c0 2.332 1.163 4.41 2.981 5.769V16l2.724-1.495c.727.201 1.497.31 2.295.31 4.418 0 8-3.317 8-7.408C16 3.317 12.418 0 8 0zm.795 9.975L6.758 7.802 2.783 9.975l4.372-4.642 2.087 2.173 3.926-2.173-4.373 4.642z"});break;case"pinterest":r="0 0 16 16",n=i.createElement("path",{fill:"#e60023",d:"M5.644 15.648A8.01 8.01 0 0 0 8 16a8 8 0 1 0-2.847-.521c-.073-.625-.151-1.655.017-2.378.145-.621.934-3.958.934 -3.958s-.238-.477-.238-1.183c0-1.107.642-1.934 1.44-1.934.68 0 1.008.51 1.008 1.122 0 .683-.435 1.705-.66 2.652-.187.792.398 1.439 1.18 1.439 1.416 0 2.504-1.493 2.504-3.647 0-1.907-1.37-3.24-3.327 -3.24-2.266 0-3.596 1.7-3.596 3.456 0 .684.264 1.418.593 1.817a.238.238 0 0 1 .055.229c-.06.252-.195.792-.221.903-.035.146-.116.177-.267.107C3.581 10.4 2.96 8.946 2.96 7.778c0-2.512 1.825-4.82 5.262-4.82 2.763 0 4.91 1.97 4.91 4.6 0 2.745-1.73 4.954-4.133 4.954-.807 0-1.566-.42-1.825-.914 0 0-.4 1.52-.496 1.893-.188.722-.71 1.637-1.033 2.157z"});break;case"link":o=i.createElement("circle",{cx:"8",cy:"8",r:"15",fill:"#EFEFEF"}),n=i.createElement("path",{fill:"#8e8e8e",d:"M6.555 7.236L4.848 8.943l-2.389 2.39 2.21 2.21 2.39-2.39 1.707-1.707.82.821a.92.92 0 0 1 .006 1.301l-4.166 4.167a.926.926 0 0 1-1.302-.005L.272 11.878a.92.92 0 0 1-.005-1.302L4.433 6.41a.924.924 0 0 1 1.302.005l.82.821zM9.45 8.764l1.707-1.707 2.389-2.389-2.21-2.211-2.39 2.389-1.707 1.707-.82-.82a.921.921 0 0 1-.006-1.302L10.578.265a.924.924 0 1 1.301.006l3.853 3.852a.92.92 0 0 1 .004 1.301l-4.165 4.167a.924.924 0 0 1-1.302-.006l-.82-.82zm-4.573.889l4.779-4.78 1.473 1.474-4.779 4.78-1.473-1.474z"});break;default:n=null}return i.createElement("svg",{width:"36",height:"36",viewBox:r},o,n)}var G=n("8e8Q");function Y(e){return(Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function V(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Z(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function J(e,t,n){return t&&Z(e.prototype,t),n&&Z(e,n),e}function $(e,t){return!t||"object"!==Y(t)&&"function"!=typeof t?re(e):t}function ee(e){return(ee=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function te(e,t){if(
"function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ne(e,t)}function ne(e,t){return(ne=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}function re(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function oe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ae=function(e){function o(){var e,c;V(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return oe(re(re(c=$(this,(e=ee(o)).call.apply(e,[this].concat(n))))),"state",{showShareLink:!1,pinterestProfileLink:"",fb:null}),oe(re(re(c)),"selectText",function(e){e.target.select()}),oe(re(re(c)),"openSocialDialog",function(e,t){var n=c.props,r=n.handleShare,o=n.dismissModal,a=n.experienceComplete,i;switch(e){case"facebook":W.default.logIn(c.state.fb,function(){q.a.shareFacebookInvite(c.getShareOptions(5))});break;case"messenger":W.default.logIn(c.state.fb,function(){q.a.shareFbMessengerInvite(c.getShareOptions(6))});break;case"link":i=c.getShareOptions(12),q.a.createAndLogShareInvite(i).then(function(e){var t=e.invite_url;t?c.setState({pinterestProfileLink:t,showShareLink:!0}):r&&r()});break;default:r&&r()}"link"!==e&&(a&&a(),o(!0))}),oe(re(re(c)),"handleShareLinkDismiss",function(e){c.setState({showShareLink:!1})}),oe(re(re(c)),"handleFacebookClick",function(e){c.openSocialDialog("facebook",e)}),oe(re(re(c)),"handleMessengerClick",function(e){c.openSocialDialog("messenger",e)}),oe(re(re(c)),"handlePinterestClick",function(e){c.openSocialDialog("pinterest",e)}),oe(re(re(c)),"handleLinkClick",function(e){c.openSocialDialog("link",e)}),c}return te(o,e),J(o,[{key:"componentDidMount",value:function e(){var t=this;W.default.ensureInit(function(e){return t.setState({fb:e})})}},{key:"getShareOptions",value:function e(t){var n=this.props.pin;return{invite_channel:t,object_type:G.a.PIN,object_id:n.id,name:"",description:n.description||"",path:"/pin/".concat(n.id,"/"),picture:n.images&&n.images["236x"]&&n.images["236x"].url||""}}},{key:"render",value:function e(){var t=this.props.close,n=this.state,r=n.pinterestProfileLink,i=n.showShareLink,c=v.a.createElement(X.a,{link:r,handleClick:this.handleShareLinkDismiss,handleFocus:this.selectText}),o=function e(t,n,r){var o="share-upsell-label-"+t,a="";return"facebook"===t?a="#3b5998":"messenger"===t&&(a="#1da1f2"),"link"===t&&i?c:v.a.createElement(P.O,{onTouch:function e(t){var n=t.event;return r(n)},fullWidth:!1},v.a.createElement(P.b,{display:"flex",paddingY:2,alignItems:"center"},v.a.createElement(Q,{name:t}),v.a.createElement(P.h,{xs:1}),v.a.createElement("div",{id:o},v.a.createElement(P.K,{size:"xl",bold:!0},v.a.createElement("span",{style:{color:a}},n)))))},a;return v.a.createElement(P.b,{display:"flex",alignItems:"center",dangerouslySetInlineStyle:{__style:{borderLeft:"1px solid #f5f5f5"}}},v.a.createElement("div",null,v.a.createElement(P.b,{paddingX:6,flex:"none"},v.a.createElement(P.b,{position:"absolute",dangerouslySetInlineStyle:{__style:{top:16,right:16}}},v.a.createElement(P.o,{icon:"cancel",onClick:t,accessibilityLabel:_.a._("Cancel"),size:"sm"})),v.a.createElement(P.m,{size:"md"},_.a._("Saved!","Save pin to board")),v.a.createElement(P.b,{paddingY:3,marginRight:8},v.a.createElement(P.K,{size:"xl"},_.a._("Know someone who might like it?","Upsell share a recently saved pin to board"))),v.a.createElement(P.b,{paddingY:2,flex:"none"},o("facebook",_.a._("Send on Facebook"),this.handleFacebookClick),o("messenger",_.a._("Send on Messenger"),this.handleMessengerClick),o("pinterest",_.a._("Send on Pinterest"),this.handlePinterestClick),o("link",_.a._("Send a link"),this.handleLinkClick)))),v.a.createElement(P.h,{xs:1}))}}]),o}(i.Component),ie=n("FTnl"),ce=n("MSpZ"),le=n("kxCB"),se=n("EfF6"),ue=n("5tOk"),de=n("MH3C"),pe=n("D+PP"),fe=n("y2lE"),be=n("g5tP");function he(e){return(he="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function me(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(e){Oe(t,e,n[e])})}return t}function ye(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ge(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ve(e,t,n){return t&&ge(e.prototype,t),n&&ge(e,n),e}function Se(e,t){return!t||"object"!==he(t)&&"function"!=typeof t?Ce(e):t}function Ee(e){return(Ee=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function _e(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&we(e,t)}function we(e,t){return(we=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}function Ce(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Oe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",function(){return je}),n.d(t,"d",function(){return Ie}),t.b=De,t.c=Me;var Pe=/#[^(\-\\.\s#,\/$%\^&\*;:{}=\`~()\[\]@|<>…)]+/gi,je=4e3,ke=660,Te=540,xe="236x",Re="PinPanePinMeta",Be=236,Ie={LOADING:"loading",SUCCESS:"success"},Fe=function(e){function o(){var e,g;ye(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Oe(Ce(Ce(g=Se(this,(e=Ee(o)).call.apply(e,[this].concat(n))))),"state",{pinDescription:g.props.pin&&g.props.pin.description||"",showSharingUpsell:!1,resolve:void 0,experienceComplete:function e(){},experienceDismiss:function e(){},newPin:null,boardSavedTo:null,height:0,sharing:{facebook:!1,twitter:!1},modalTitle:g.props.showCreate?_.a._("Create board"):_.a._("Choose board")}),Oe(Ce(Ce(g)),"setModalTitle",function(e){return g.safeSetState({modalTitle:e})}),Oe(Ce(Ce(g)),"setPWTSaveRequestTiming",function(e,t){e?(g.setPWTAbort(),ce.a.sendEvent(new l.a)):t&&ce.a.sendEvent(new s.a({result:t}))}),Oe(Ce(Ce(g)),"getPinHeight",function(){var e,t=(g.props.pin.images["236x"]||{}).height||0,n=document.getElementById(Re);return n&&t?n.clientHeight+t:0}),Oe(Ce(Ce(g)),"unmounted",!1),Oe(Ce(Ce(g)),"safeSetState",function(e,t){g.unmounted?t&&t():g.setState(e,t)}),Oe(Ce(Ce(g)),"scrollToRelatedPins",function(){document&&document.documentElement&&"scrollBehavior"in document.documentElement.style?window.scroll({top:g.state.height,left:0,behavior:"smooth"}):window.scrollTo(0,g.state.height)}),Oe(Ce(Ce(g)),"handleBoardSaveSuccess",function(o,e,a){var t=g.props,i=t.action,c=t.dispatch,n=t.pin,r=t.setCompletionPromise,l=t.viewerUserId;b.default.instance.refreshPlacedExperiences(),g.setPWTSaveRequestTiming(!1,1);var s=b.default.instance.getPlacedExperience(33),u=b.default.instance.getPlacedExperience(11),d;if(r(g._makeCancelablePromise(new Promise(function(e,t){var n=o.resource_response.data;g._triggerPubSubs(n);var r=g.state.pinDescription.match(Pe)||[];0<r.length&&g.props.contextLog(2,{element:10273,hashtags:JSON.stringify(r),objectId:g.props.pin.id}),"repin"===i?(g._fetchBoardRecommendation(n).then(function(e){g._showSuccessToast(e,n,a)}),s&&500388===s.experience_id?g.safeSetState({showSharingUpsell:!0,newPin:n,resolve:e}):e(n)):("create"===i&&u&&500840===u.experience_id&&(c(m(!0)),g.props.contextLog(7510,{component:13233})),e(n))}))),c(Object(be.c)(e)),c(Object(se.d)({boardId:e.id,sectionId:a&&a.id,increment:1})),l&&c(Object(pe.a)({userId:l,increment:1})),a||!e.image_cover_url){var p=n.image_url,f=n.images;e.image_cover_url=p||f[xe]&&f[xe].url||"",c(Object(be.e)({},e))}a&&c(Object(h.a)(a.id)),c(y(n.id,!0))}),Oe(Ce(Ce(g)),"_adjustHeightToPin",function(){0===g.state.height&&(g.safeSetState({height:ke}),g.props.onHeightChange&&g.props.onHeightChange(ke))}),Oe(Ce(Ce(g)),"close",function(){var e=g.props,t=e.contextLog,n=e.onClose;g.experienceDismiss&&g.experienceDismiss(),n&&(g.setPWTAbort(),n(),t(2502,{component:5,element:610}))}),Oe(Ce(Ce(g)),"handleSaveToBoard",function(t,n){if(!g.state.boardSavedTo){g.setPWTSaveRequestTiming(!0);var r="secret"===(t.privacy||""),o={board:n?n.id:t.id,state:Ie.LOADING};g.safeSetState({boardSavedTo:o},function(){var e;g._getPinResource(r,t.id,(n||{}).id).callCreate({showError:!0}).then(function(e){g.safeSetState({boardSavedTo:Object.assign(o,{state:Ie.SUCCESS})},function(){return g.handleBoardSaveSuccess(e,t,n)})}).catch(function(e){g.unmounted||g.safeSetState({boardSavedTo:null}),g.setPWTSaveRequestTiming(!1,3);var t=g._makeCancelablePromise(Promise.reject(e));g.props.setCompletionPromise(t)})})}}),Oe(Ce(Ce(g)),"handleSocialConnectSet",function(e,t){var n=Object.assign({},g.state.sharing);e===d.default.FACEBOOK?n.facebook=t:e===d.default.TWITTER&&(n.twitter=t),g.safeSetState({sharing:n})}),Oe(Ce(Ce(g)),"updateDescription",function(e){g.safeSetState({pinDescription:e})}),Oe(Ce(Ce(g)),"handleLogToastClick",function(){g.props.contextLog(101,{component:20,view:52})}),Oe(Ce(Ce(g)),"_makeCancelablePromise",function(e){var r=!1,t;return{promise:new Promise(function(t,n){e.then(function(e){return r?n({isCanceled:!0}):t(e)}),e.catch(function(e){return n(r?{isCanceled:!0}:e)})}),cancel:function e(){r=!0}}}),Oe(Ce(Ce(g)),"_getPinResource",function(e,t,n){var r=g.props,o=r.color,a=r.location,i=r.pin,c=r.method,l=r.guid,s=r.additionalCreateFields,u=r.advertiser_id,d;i.id&&(d=Object(E.a)(i,a)||"".concat(i.tracking_params,"~0"));var p=i.id?"RepinResource":"PinResource",f=!i.id&&i.image_url?Object(de.b)(i.image_url,i.link):"",b=me({},s,{board_id:t||"",color:o||"",clientTrackingParams:d,description:g.state.pinDescription,guid:l||"",link:i.link,image_base64:i.image_base64,image_url:f,is_buyable_pin:!1,is_removable:i.promoted_is_removable,media_upload_id:i.media_upload_id,method:c||"",pin_id:i.id||"",section:n,title:i.title||""},u?{advertiser_id:u}:{});if(!e){var h=g.state.sharing,m=h.facebook,y=h.twitter;b.share_facebook=m,b.share_twitter=y}return K.a.create(p,b)}),Oe(Ce(Ce(g)),"_triggerPubSubs",function(e){M.a.instance.publish("currentUser","pinCreated",e),M.a.instance.publish(e.board.id,"pinCreated",{pin:e}),"repin"===g.props.action&&(M.a.instance.publish(e.board.id,"pinRepinned",e),M.a.instance.publish(g.props.pin.id,"pinRepinned",e))}),Oe(Ce(Ce(g)),"_showSuccessToast",function(e,t,n){var r=g.props,o=r.hideAllToasts,a=r.showSuccessToast,i=r.showToast;if(a&&!g.state.showSharingUpsell){o();var c=t.board,l=c.image_cover_url,s=c.name,u=c.url,d;if(d=n?[Object(ue.c)(_.a._("Saved to {{sectionName}} in {{boardName}}","Toast for successfully saving to a section within a board"),{sectionName:n.title,boardName:s})]:[_.a._("Saved to"),s],i(function(e){var t=e.onHide;return v.a.createElement(ie.a,{duration:je,onHide:t,text:d,href:n?"".concat(u).concat(n.slug):u,imageUrl:l,onClick:g.handleLogToastClick})}),e){var p=e.name,f=e.url,b=e.image_thumbnail_url;i(function(e){var t=e.onHide;return v.a.createElement(ie.a,{duration:je,onHide:t,text:[_.a._("You might also like","Post repin suggested board"),p],href:f,imageUrl:b,onClick:g.handleLogToastClick})})}}}),Oe(Ce(Ce(g)),"_fetchBoardRecommendation",function(e){var t;return K.a.create("RelatedBoardForPinRandomFeedResource",{pin:e.id,page_size:1}).callGet({showError:!1}).then(function(e){return Promise.resolve(e.resource_response.error?null:e.resource_response.data[0])})}),Oe(Ce(Ce(g)),"dismissModal",function(e){var t=g.state,n=t.resolve,r=t.newPin;g.experienceDismiss&&!e&&g.experienceDismiss(),n&&n(r)}),g}return _e(o,e),ve(o,[{key:"componentDidMount",value:function e(){this._adjustHeightToPin()}},{key:"UNSAFE_componentWillReceiveProps",value:function e(t){this.safeSetState({pinDescription:t.pin&&t.pin.description||t.description||""})}},{key:"componentDidUpdate",value:function e(){this._adjustHeightToPin()}},{key:"componentWillUnmount",value:function e(){this.unmounted=!0}},{key:"setPWTAbort",value:function e(){ce.a.sendEvent(new a.a({result:{COMPLETE:1,USER_ABORT:2,RESPONSE_ERROR:3,RESPONSE_TIMEOUT:4,NETWORK_ERROR:5,CLIENT_SOFTWARE_ERROR:6,OTHER:7,NAVIGATE_AWAY:8,EXIT_APP:9,BACKGROUND_APP:10,COMPLETE_WITHOUT_CONTENT:11}.ABORTED}))}},{key:"renderFlyoutBoardCreate",value:function e(){var t=this.props,n=t.anchorRef,r=t.pin,o=t.isCloseupPin;return v.a.createElement(c.a,{anchorRef:n,dismissHandler:this.close,shownWithinMasonry:!o,saving:!(!this.state.boardSavedTo||this.state.boardSavedTo.state!==Ie.SUCCESS),image:r.images.orig,name:"",onCancel:this.close,onCreate:this.handleSaveToBoard,pinId:r.id})}},{key:"render",value:function e(){var o=this;if(!this.props.pin&&!this.props.resourceLoaded)return null;var t=this.props,n=t.color,a=t.pin,r=t.isInModal,i=t.isInCacheExperiment,c=t.onCloseAndShare,l=t.showCreate,s=t.showFlyout,u=t.suggestedBoardTitle,d=this.state,p=d.showSharingUpsell,f=d.boardSavedTo,b,h,m=d.height||660;if(s)return this.renderFlyoutBoardCreate();var y=v.a.createElement(P.b,{position:"relative",height:m,width:"100%",display:"flex",justifyContent:"center"},v.a.createElement(P.b,{color:"white",display:"flex",height:"100%",overflow:"hidden",position:"relative",shape:"rounded",width:"100%"},v.a.createElement(P.b,{width:"40%",direction:"column",display:"flex",justifyContent:"between",dangerouslySetInlineStyle:{__style:{borderRight:"1px solid #f5f5f5"}}},v.a.createElement(P.b,{display:"flex",flex:"grow",alignItems:"center",justifyContent:"start",direction:"column",marginTop:3},v.a.createElement(C.a,{color:n,pin:a,updateDescription:this.updateDescription})),v.a.createElement(L,{onSocialConnect:this.handleSocialConnectSet})),p?v.a.createElement(S.a,{placementId:33,experienceIds:[500388]},function(e){var t=e.complete,n=e.dismiss,r=e.display_data;return o.experienceComplete=t,o.experienceDismiss=n,v.a.createElement(ae,{handleShare:c,close:o.close,experienceComplete:t,pin:a,dismissModal:o.dismissModal})}):v.a.createElement(P.b,{display:"flex",width:"60%"},v.a.createElement(g.a,{boardSavedTo:f,isRepin:!0,isInCacheExperiment:i,onBoardSave:this.handleSaveToBoard,onClose:this.close,pinId:a.id,showCreate:l,suggestedBoardTitle:u,setModalTitle:r?this.setModalTitle:void 0}))));return r?v.a.createElement(w.a,{accessibilityCloseLabel:_.a._("Close"),accessibilityModalLabel:this.state.modalTitle,onDismiss:this.close,heading:this.state.modalTitle,size:"lg"},y):y}}]),o}(i.Component);function Ne(e){var t=e.advertiser,n=e.viewer,r=e.location,o=n.isAuth&&t&&t.owner_user_id!==n.id?t.id:null;return me({location:r},o?{advertiser_id:o}:{},n.isAuth?{viewerUserId:n.id}:{})}Oe(Fe,"defaultProps",{pwtAuxData:{}});var Ae=Object(f.compose)(Object(r.connect)(Ne),le.a,fe.a,Object(o.b)({name:"FakePinResource",key:"pin",options:function e(t){var n;return me({},t.fakeResource.options)}}))(Fe);function De(e){return v.a.createElement(Ae,Object.assign({action:"create"},e))}var Le=Object(f.compose)(Object(r.connect)(Ne),le.a,fe.a)(Fe);function Me(e){return v.a.createElement(Le,Object.assign({action:"repin"},e))}},vBru:function(e,t,n){"use strict";var h=n("d6ZO"),m=n.n(h),r=n("DUIN"),y=n("WxTF"),g=n("BAXv"),v=n("CogI"),S=n("W/Cr"),E=n("hkVh"),o=n("NyaW"),_=n("gEaE");function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t,n){return t&&c(e.prototype,t),n&&c(e,n),e}function s(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?f(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}function p(e,t){return(p=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var w=function(e){function a(){var e,t;i(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return b(f(f(t=s(this,(e=u(a)).call.apply(e,[this].concat(r))))),"handleBoardCreateFormSubmit",function(e){e.preventDefault(),t.props.onBoardCreate()}),t}return d(a,e),l(a,[{key:"render",value:function e(){var t=this.props,n=t.createBoardError,r=t.inputName,o=t.nameValidatorErrors,a=t.onCancel,i=t.onChangeBoardName,c=t.onChangeBoardPrivacy,l=t.onInvite,s=t.privacy,u=t.saving,d=t.showTitle,p=t.isAdAccountOwner,f=0===o.length,b=s===g.a.BoardPrivacy.SECRET;return m.a.createElement(_.b,{color:"white",height:"100%",position:"absolute",width:"100%",top:!0,left:!0},m.a.createElement("form",{onSubmit:this.handleBoardCreateFormSubmit,style:{height:"100%"}},m.a.createElement(_.b,{direction:"column",display:"flex",height:"100%"},d&&m.a.createElement(_.b,{display:"flex",marginTop:3,paddingX:6,paddingY:3},m.a.createElement(_.K,{size:"xl",bold:!0},S.a._("Create board"))),m.a.createElement(_.b,{padding:3},m.a.createElement(_.b,{marginBottom:2},m.a.createElement(_.q,{htmlFor:"boardEditName"},m.a.createElement(_.K,null,S.a._("Name")))),m.a.createElement(_.b,null,m.a.createElement(v.a,{error:o.join(", "),id:"boardEditName",name:"boardName",onChange:function e(t){var n=t.value;return i(n)},placeholder:S.a._('Like "Places to Go" or "Recipes to Make"'),value:r}))),m.a.createElement(_.j,null),p&&m.a.createElement(m.a.Fragment,null,m.a.createElement(_.b,{padding:3},m.a.createElement(_.b,{marginBottom:2},m.a.createElement(_.q,{htmlFor:"secret"},m.a.createElement(_.K,null,S.a._("Secret","secret board")))),m.a.createElement(_.b,null,m.a.createElement(_.I,{onChange:c,id:"secret",switched:b}))),m.a.createElement(_.j,null),m.a.createElement(_.b,{display:"flex",flex:"grow",overflow:"hidden"},m.a.createElement(_.b,{width:"100%"},m.a.createElement(y.a,{onSelectedCollaboratorsChange:l}))),m.a.createElement(_.j,null)),!p&&m.a.createElement(m.a.Fragment,null,m.a.createElement(_.b,{padding:3},m.a.createElement(_.b,{marginBottom:2},m.a.createElement(_.q,{htmlFor:"protected"},m.a.createElement(_.K,null,S.a._("Protected board (not listed on user's profile)","protected board")))),m.a.createElement(_.b,null,m.a.createElement(_.I,{onChange:function e(){},id:"protected",switched:!0,disabled:!0}))),m.a.createElement(_.j,null)),m.a.createElement(_.b,{padding:6},!!n&&m.a.createElement(_.b,{marginBottom:3},m.a.createElement(_.K,{align:"center",bold:!0,color:"red",size:"sm"},n)),m.a.createElement(_.b,{display:"flex",justifyContent:"between"},m.a.createElement(_.c,{inline:!0,onClick:a,text:S.a._("Cancel","cancel board create")}),m.a.createElement(E.a,{disabled:!r.trim()||!f||!!n||u,submitting:u,text:S.a._("Create","create a new board")}))))))}}]),a}(h.Component),C=Object(o.a)(w),O=n("Td/c"),P=n("JyNp"),j=n("n9Oa"),k=n("Qqx1");function T(e){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function x(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function R(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function B(e,t,n){return t&&R(e.prototype,t),n&&R(e,n),e}function I(e,t){return!t||"object"!==T(t)&&"function"!=typeof t?D(e):t}function F(e){return(F=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function N(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&A(e,t)}function A(e,t){return(A=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}function D(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function L(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var M=function(e){function a(){var e,o;x(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return L(D(D(o=I(this,(e=F(a)).call.apply(e,[this].concat(n))))),"getSections",function(e){var t=o.props,n=t.board,r=t.sectionsResource.data;return e.length>=k.a?[{items:Object(j.a)([n],e),customProps:{inSectionSelection:!0}},{items:Object(j.a)(r,e,"title")}]:[{items:[n],customProps:{inSectionSelection:!0}},{items:r}]}),o}return N(a,e),B(a,[{key:"render",value:function e(){var t=this.props,n=t.sectionsResource,r=n.error,o=n.isLoaded,a=t.boardSavedTo,i=t.isSelectMode,c=t.onSectionCreate,l=t.onSectionSelected,s=t.pinId;return m.a.createElement(k.b,{isSelectMode:i,boardSavedTo:a,createButtonLabel:S.a._("Add section","Button for creating a board section"),hasLoadError:!!r,isLoaded:o,getSections:this.getSections,onCreate:c,onSelected:l,pinId:s})}}]),a}(h.Component),H=Object(P.b)({name:"BoardSectionsRepinResource",key:"sectionsResource",options:function e(t){return{board_id:t.board.id}}})(M),K=n("S+Qs"),z=n("MQ2h"),U=n.n(z);function W(e){return(W="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function q(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function X(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Q(e,t,n){return t&&X(e.prototype,t),n&&X(e,n),e}function G(e,t){return!t||"object"!==W(t)&&"function"!=typeof t?J(e):t}function Y(e){return(Y=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function V(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Z(e,t)}function Z(e,t){return(Z=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}function J(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(e){ee(t,e,n[e])})}return t}function ee(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var te=2,ne=3,re=void 0,oe=function e(t){var n=[],r=[];return t.forEach(function(e){e.name.match(/^\d/)?r.push(e):n.push(e)}),n.concat(r)};function ae(e,t,n){return $({},e?{pin_id:e}:{},t?{username:t}:{},n?{advertiser_id:n,filter:"protected"}:{},{field_set_key:"board_picker",limit:re,shortlist_suggestions:te})}var ie=function(e){function o(){var e,a;q(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return ee(J(J(a=G(this,(e=Y(o)).call.apply(e,[this].concat(n))))),"getSections",function(e){var t=a.props.boardResource.data;if(!t)return[];var n=t.all_boards,r=t.boards_shortlist,o=oe(n);return o.length<=3?[{items:o}]:e.length>=k.a?[{items:Object(j.a)(o,e)}]:[r.length?{items:r,title:S.a._("Top choices")}:{items:[]},{items:o,title:S.a._("All boards","title for board picker all boards section")}]}),a}return V(o,e),Q(o,[{key:"render",value:function e(){var t=this.props,n=t.boardResource,r=n.data,o=n.error,a=n.isLoaded,i=t.boardSavedTo,c=t.isSelectMode,l=t.onBoardCreate,s=t.onBoardSelected,u=t.pinId,d=a&&!!r&&r.all_boards.length<=3;return m.a.createElement(k.b,{isSelectMode:c,boardSavedTo:i,hasLoadError:!!o,hasLowBoardCount:d,isLoaded:a,getSections:this.getSections,onCreate:l,onSelected:s,pinId:u})}}]),o}(h.Component);function ce(e){var t=e.advertiser,n=e.viewer;return n.isAuth&&t&&t.owner_user_id!==n.id?{advertiser_id:t.id,username:t.owner_user_id}:{}}var le=Object(z.compose)(Object(r.connect)(ce),Object(P.b)({name:"BoardPickerBoardsResource",key:"boardResource",options:function e(t){return ae(t.pinId,t.username,t.advertiser_id)}}))(ie),se=n("y2lE");function ue(e){return(ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function de(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(e){Se(t,e,n[e])})}return t}function pe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function fe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function be(e,t,n){return t&&fe(e.prototype,t),n&&fe(e,n),e}function he(e,t){return!t||"object"!==ue(t)&&"function"!=typeof t?ve(e):t}function me(e){return(me=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function ye(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ge(e,t)}function ge(e,t){return(ge=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}function ve(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Se(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ee=function(e){function o(){var e,p;pe(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Se(ve(ve(p=he(this,(e=me(o)).call.apply(e,[this].concat(n))))),"state",{newName:"",selectedSectionBoard:null,showCreate:p.props.showCreate||!1,inviteQueue:{}}),Se(ve(ve(p)),"close",function(){var e=p.state,t=e.selectedSectionBoard,n=e.showCreate,r=p.props.onClose;n?p.setState({showCreate:!1},p.manageModalTitle):t?p.setState({selectedSectionBoard:null},p.manageModalTitle):r()}),Se(ve(ve(p)),"sendInvites",function(t){var n=p.state.inviteQueue;Object.keys(n).forEach(function(e){n[e].resource(t.id,[e])})}),Se(ve(ve(p)),"handleInvite",function(e){var t=p.state.inviteQueue;if(t[e.id]){var n=de({},t);delete n[e.id],p.setState({inviteQueue:n})}else{var r=Object.assign({},t,Se({},e.id,e));p.setState({inviteQueue:r})}}),Se(ve(ve(p)),"handleBoardSave",function(e){var t=p.state.selectedSectionBoard,n=p.props,r=n.onBoardSave,o=n.invalidatePinBetterSaveResource,a=n.invalidateResource,i=n.isInCacheExperiment,c;if(a(),i&&o(),t&&"board_section"===e.type)return r(t,e);var l=e,s=l.section_count,u,d;!t&&0<(void 0===s?0:s)?p.setState({selectedSectionBoard:l},p.manageModalTitle):(p.sendInvites(e),r(l))}),Se(ve(ve(p)),"handleCreate",function(r){return function(e){e=e||"",p.setState({newName:e,showCreate:!0},p.manageModalTitle);var t=r?13105:13025,n=r?10306:249;p.props.contextLog(101,{component:t,element:n})}}),Se(ve(ve(p)),"manageModalTitle",function(){var e=p.props.setModalTitle;e&&(p.state.showCreate&&p.state.selectedSectionBoard?e(S.a._("Add section","Repin title for making a board section")):p.state.showCreate?e(S.a._("Create board","Repin title for making a new board")):p.state.selectedSectionBoard?e(S.a._("Choose section","Repin title for choosing a board section")):e(S.a._("Choose board","Repin title for choosing a board")))}),p}return ye(o,e),be(o,[{key:"render",value:function e(){var t=this.props,n=t.boardSavedTo,r=t.isRepin,o=t.isSelectMode,a=t.pinId,i=t.setModalTitle,c=t.suggestedBoardTitle,l=this.state,s=l.inviteQueue,u=l.newName,d=l.selectedSectionBoard,p=l.showCreate,f=!!d,b=!i;return h.createElement(_.b,{display:"flex",width:"100%",position:"relative"},h.createElement(_.b,{width:"100%",display:"flex",direction:"column",marginTop:4},d?h.createElement(H,{isSelectMode:o,board:d,boardSavedTo:n,onSectionCreate:this.handleCreate(f),onSectionSelected:this.handleBoardSave}):h.createElement(le,{isSelectMode:o,boardSavedTo:n,onBoardCreate:this.handleCreate(f),onBoardSelected:this.handleBoardSave,pinId:a})),p&&!d&&h.createElement(C,{prefilledName:u||c,onCancel:this.close,onCreate:this.handleBoardSave,onInvite:this.handleInvite,inviteQueue:s,showTitle:b}),p&&d&&h.createElement(O.a,{board:d,completeCreateSectionAction:this.handleBoardSave,initialName:u,isRepin:r,onClearModal:this.close,showTitle:b}))}}]),o}(h.Component);function _e(t,n){return{invalidateResource:function e(){t(Object(K.f)("BoardPickerBoardsResource",ae(n.pinId)))},invalidatePinBetterSaveResource:function e(){t(Object(K.f)("BoardPickerBoardsResource",{field_set_key:"board_picker"}))}}}var we=t.a=Object(z.compose)(se.a,Object(r.connect)(null,_e))(Ee)},"xp+q":function(e,t){}});