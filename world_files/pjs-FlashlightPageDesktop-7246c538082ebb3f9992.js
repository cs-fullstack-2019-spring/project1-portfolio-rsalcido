webpackJsonp(["FlashlightPageDesktop"],{"+51L":function(e,t,n){"use strict";var r=n("d6ZO"),E=n.n(r),o=n("DUIN"),i=n("ujKp"),a=n("MQ2h"),c=n.n(a),u=n("y2lE"),T=n("gEaE");function d(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(e){l(t,e,n[e])})}return t}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var S=function e(t,n,r,o,i,a,c,u,l,s){if(!s&&n){var p=i.carousel_slots,f=i.id;n(108,d({},l,{objectId:t,component:u,view:c,viewParameter:a,eventData:{pinCarouselSlotEventData:{carouselSlotId:p[r]&&Number(p[r].id),carouselDataId:Number(f),carouselSlotIndex:r,toCarouselSlotIndex:o}}}))}},s=function e(t){for(var n=t.carouselIndex,o=t.carousel_data,i=t.changeCarouselSlotIndex,a=t.handleCarouselSwipe,r=t.isCloseup,c=t.pinId,u=t.contextLog,l=t.contextLogData,s=t.viewParameter,p=t.viewType,f=t.componentType,d=t.isEditMode,m=o.carousel_slots,y=void 0===m?[]:m,h=o.index,b=void 0!==n?n:h,v=r?16:8,g=r?2:1,w=[],_=function e(r){var t=r===b;w.push(E.a.createElement(T.b,{key:c+r,marginRight:g},E.a.createElement(T.O,{fullWidth:!1,shape:"circle",onTouch:function e(t){var n=t.event;d||void 0===i||(n.preventDefault(),n.stopPropagation(),i(String(c),r)),void 0!==a&&a(r),S(c,u,b,r,o,s,p,f,l,d)}},E.a.createElement(T.b,{height:v,width:v,dangerouslySetInlineStyle:{__style:{backgroundColor:t?"#555":"lightGray"}},shape:"circle"}))))},O=0;O<y.length;O+=1)_(O);return E.a.createElement(T.b,{marginTop:1,marginLeft:d?2:-2,marginBottom:d?1:0,display:"flex"},w)},p=function e(t,n){var r=t.pins,o=n.pinId;return{carousel_data:r[o]&&r[o].carousel_data}},f=function e(r){return{changeCarouselSlotIndex:function e(t,n){return r(Object(i.a)(t,n))}}};t.a=Object(a.compose)(u.a,Object(o.connect)(p,f))(s)},"+Lqo":function(e,t,n){"use strict";var m=n("d6ZO"),r=n.n(m),o=n("Esb+"),i=n.n(o),y=n("tmfO");function h(e){return u(e)||c(e)||a()}function a(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function c(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function u(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}var b="__HashtagFlag__",l=4,v=/#[^(\-\\.\s#,\/$%\^&\*;:{}=\`~()\[\]@|<>…)]+/gi,g=function e(t,n){return"/search/pins/?q=".concat(encodeURIComponent(t),"&rs=").concat(n)},s="hashtags";function p(e,t){for(var n=t.appendText||"",o=t.source||"hashtag_pinrep",r=[],i=[],a={},c=0,u=function e(r){return function(e,t){if(e===b&&i.length){var n=i.shift();return c+=1,m.createElement(y.b,{to:g(n,o),key:"hashtag-".concat(r,".").concat(t)},m.createElement("span",{className:"pinHashtag"},n))}return e}},l=0;l<e.length;l+=1){var s=e[l];if("string"==typeof s){var p,f=s.replace(v,function(e){return i.push(e),a[e]=!0,b}).split(new RegExp("(".concat(b,")"))).map(u(l));r=h(r).concat(h(f))}else r.push(s)}var d=[];return n&&n.replace(v,function(e,t){return!a[e]&&c<4&&(c+=1,d.push(m.createElement("span",{key:"appended"+t}," ",m.createElement(y.b,{to:g(e,o)},m.createElement("span",{className:"pinHashtag"},e)))),a[e]=!0),e}),r=h(r).concat(d)}function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _(e,t,n){return t&&w(e.prototype,t),n&&w(e,n),e}function O(e,t){return!t||"object"!==f(t)&&"function"!=typeof t?E(e):t}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function T(e){return(T=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function S(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&P(e,t)}function P(e,t){return(P=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}function C(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",function(){return I});var k=C({},s,p),I=function(e){function t(){return d(this,t),O(this,T(t).apply(this,arguments))}return S(t,e),_(t,[{key:"shouldComponentUpdate",value:function e(t){return!i()(this.props,t)}},{key:"render",value:function e(){var t=this.props,n=t.text,r=t.options;if(""===n.trim())return n;for(var o=[n],i=Object.keys(k),a=0;a<i.length;a++){var c=i[a],u;if(c in r)o=(0,k[c])(o,r[c])}return m.createElement("span",null,o)}}]),t}(m.Component)},"+vjZ":function(e,t,n){"use strict";n.d(t,"a",function(){return g});var r=n("d6ZO"),p=n.n(r),a=n("W/Cr"),o=n("uOsP"),c=n("xfx3"),f=n("gEaE");function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),e}function d(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?b(e):t}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function y(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}function h(e,t){return(h=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var g=function(e){function i(){var e,t;u(this,i);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return v(b(b(t=d(this,(e=m(i)).call.apply(e,[this].concat(r))))),"statsList",t.props.isVideo?[{iconType:"play",displayText:a.a._("Video views","Label for views of a video pin on closeup page"),field:"video_views",align:"start"},{iconType:"clock",displayText:a.a._("Avg. time","Label for average time of a video pin on closeup page"),field:"video_average_time",align:"center",valueFormat:"TIME"},{iconType:"angled-pin",displayText:a.a._("Saves","Label for saves of a video pin on closeup page"),field:"save",align:"end"}]:[{iconType:"eye",displayText:a.a._("Impressions","Label for impressions of a pin on closeup page"),field:"impression",align:"start"},{iconType:"angled-pin",displayText:a.a._("Saves","Label for saves of a pin on closeup page"),field:"save",align:"center"},{iconType:"arrow-up-right",displayText:a.a._("Clicks","Label for click-throughs of a pin on closeup page"),field:"clickthrough",iconSize:10,align:"end"}]),t}return y(i,e),s(i,[{key:"renderValue",value:function e(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"COUNT";return Number.isInteger(t)?"TIME"===n?Object(o.a)(t):p.a.createElement(c.a,{value:t,shortform:!0,shortformMaximumFractionDigits:1}):"-"}},{key:"render",value:function e(){var l=this,t=this.props.stats;if(!t||!t["30d"]||0===Object.keys(t["30d"]).length)return null;var s=t["30d"];return p.a.createElement(f.b,{display:"flex"},this.statsList.map(function(e,t){var n=e.align,r=e.iconType,o=e.iconSize,i=void 0===o?12:o,a=e.field,c=e.displayText,u=e.valueFormat;return p.a.createElement(f.b,{key:t,column:4,display:"flex",justifyContent:n,alignItems:"center"},p.a.createElement(f.b,{display:"inlineBlock",marginRight:1},p.a.createElement(f.n,{accessibilityLabel:c,color:"darkGray",icon:r,size:i})),p.a.createElement(f.K,{inline:!0,size:"sm"},l.renderValue(s[a],u)))}))}}]),i}(r.Component)},"2E55":function(e,t){},"38HY":function(e,t,n){"use strict";n.d(t,"b",function(){return r}),t.a=o;var r=function e(t){return{type:"TOGGLE_TYPEAHEAD_OVERLAY",payload:{value:t}}};function o(e){return{type:"SET_AUTOPLAY_PIN_ID",payload:{pinId:e}}}},"4DBt":function(e,t,n){"use strict";t.a=i;var O=n("d6ZO"),r=n.n(O),E=n("gEaE");function T(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(e){o(t,e,n[e])})}return t}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var S="rgb(226, 226, 226)",P="rgb(218, 218, 218)";function i(e){var t=e.active,n=void 0!==t&&t,r=e.borderRadius,o=e.children,i=e.focused,a=void 0!==i&&i,c=e.hovered,u=void 0!==c&&c,l=e.shape,s=e.hoverBgColor,p=e.bgColor,f=void 0===p?"transparent":p,d=e.size,m,y=n?{backgroundColor:"transparent"===f?"rgba(0, 0, 0, 0.1)":P}:null,h=!u||a||n?null:{backgroundColor:s||("transparent"===f?"rgba(0, 0, 0, 0.06)":S)},b=a?{backgroundColor:"transparent"===f?"rgba(0, 0, 0, 0.06)":S,boxShadow:"0 0 0 4px rgba(0, 132, 255, 0.5)",outline:"0"}:null,v={transparent:"transparent",lightGray:"#efefef",white:"#fff"},g;if("circle"===l)switch(void 0===d?"lg":d){case"xs":g=24;break;case"sm":g=32;break;case"md":g=40;break;case"lg":g=48;break;case"xl":g=56;break;default:g=48}var w=g,_=T({backgroundColor:v[f]},h,y,b,r?{borderRadius:r}:{});return O.createElement(E.b,{shape:l,dangerouslySetInlineStyle:{__style:_},height:g,width:w},o)}},"6Hh8":function(e,t){function n(e,t,n){for(var r=-1,o=null==e?0:e.length;++r<o;)if(n(t,e[r]))return!0;return!1}e.exports=n},"7izU":function(e,t,n){"use strict";function r(e){var t=e.m,n=void 0===t?0:t,r=e.h,o=void 0===r?0:r,i,a;return{m:n,h:o,rm:0<o?0:n,rh:a=o<=0?o:45<n?o+1:15<n?o+.5:o}}function o(e){var t=Math.floor(e/3600),n;return r({m:Math.floor(e%3600/60),h:t})}t.a=r,t.b=o},"8Zvv":function(e,t,n){"use strict";t.a=r,t.b=p,t.d=f,t.c=d;var i=n("+B8E");function a(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(e){o(t,e,n[e])})}return t}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var c="/i-h2.pinimg.com/",u="/i-h1.pinimg.com/",l="/i.pinimg.com/";function s(e,t){if(!e)return"";var n=new i.a(e,"web_fastly_http2_images"),r=new i.a(e,"unauth_web_fastly_http2_images"),o;return n.check("enabled_all")||r.check("enabled_all")||t&&n.check("enabled2")?o=c:(n.check("control_all")||r.check("control_all")||t&&n.check("control2"))&&(o=u),o}function r(e,t){var n;if(2<arguments.length&&void 0!==arguments[2]&&arguments[2])return t;var r=s(e);return t&&r?t.replace(l,r):t}function p(e,t){var n;if(2<arguments.length&&void 0!==arguments[2]&&arguments[2])return t;var r=s(e);return r?t.map(function(e){return e.url?a({},e,{url:e.url.replace(l,r)}):e}):t}function f(e,t){var n;if(2<arguments.length&&void 0!==arguments[2]&&arguments[2])return t;var r=s(e);return r?t.map(function(e){return e.replace(l,r)}):t}function d(e,t){var n;if(2<arguments.length&&void 0!==arguments[2]&&arguments[2])return t;var r=s(e,!0);if(r){for(var o in t){var i=t[o];t[o]=i.url?a({},i,{url:i.url.replace(l,r)}):i}return t}return t}},"9Dma":function(e,t,n){"use strict";function r(e){var t,n,r,o,i;return{type:"REPORT_PIN_SHOW",payload:{id:e.id,isPromoted:e.isPromoted,videoDuration:e.videoDuration,viewParameter:e.viewParameter,viewType:e.viewType}}}function o(){return{type:"REPORT_PIN_DISMISS"}}t.b=r,t.a=o},"9FEF":function(e,t,n){"use strict";var r=n("Qsew"),s=n.n(r),o=/^[\/\:\-\_a-zA-Z0-9]*$/,i=!1;function p(){var e;i&&(e=console).log.apply(e,arguments)}function a(e){return e.split("/").filter(Boolean)}function c(e){return e.startsWith(":")}function u(e,t){p("checking tokens",e,t);var n=c(e);return n?n===c(t)?0:-1:e===t?0:1}function f(e,t){p("comparing",e,t);var n=0,r=0;if(0===e.length||0===t.length)return p("zero length, bailed"),1;if(e.length!==t.length)return 1;for(;1!==n;){if(p("those tokens are",n=u(e[r],t[r])),0!==n)return n;if(r+=1,e.length<=r||t.length<=r)return 0}return-1}function l(e){if(!e)return[];var c=[],t=!1,n=0,u=(e||[]).filter(Boolean).map(function(e){return e.path}).filter(function(e){return s()(e,"for flow"),t&&(n+=1),!!o.test(e)||("*"===e?!(t=!0):("/_/_/*"===e||c.push('Path "'.concat(e,'" cannot be understood by validateChildRouteOrder')),!1))});if(n)return c.push("There are ".concat(n,' routes defined after "*" that will never be invoked.')),c;var l=u.reduce(function(e,t){return s()(t,"for flow"),e[t]=a(t),e},{});return p("looking at",u),u.forEach(function(e,t){s()(e,"for flow");for(var n=[],r=[],o=0;o<t;o+=1){var i=u[o]||"";p("prev",i);var a=f(l[i]||[],l[e]||[]);p("isValid?",a),-1===a?n.push(i):0===a&&r.push(i)}r.length&&c.push('Path "'.concat(String(e),'" appears to be a clone of "').concat(r.join(", "),'"')),n.length&&c.push('Path "'.concat(String(e),'" should be defined before "').concat(n.join(", "),'"'))}),c}function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function m(e,t){return!t||"object"!==d(t)&&"function"!=typeof t?y(e):t}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function b(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}function v(e,t){return(v=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}function w(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _(e,t,n){return t&&g(e.prototype,t),n&&g(e,n),e}function O(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"b",function(){return E}),n.d(t,"a",function(){return T});var E=function(){function g(e){var i=this,t=e.path,n=e.onEnter,r=e.props,o=void 0===r?{}:r,a=e.onChange,c=e.onLeave,u=e.indexRoute,l=e.childRoutes,s=e.legacy_server_context,p=e.deeplinks,f=e.pageType,d=e.getComponent,m=e.component,y=e.authBundleLoader,h=e.authResources,b=e.bundle,v=e.chunkFilename;w(this,g),O(this,"onEnter",function(t,e,n){var r=!1,o=i.wrapReplace(e);i.enterHooks.forEach(function(e){3===e.length?(r=!0,e.call(i,t,o,n)):e.call(i,t,o)}),r||n()}),O(this,"onLeave",function(t){i.leaveHooks.forEach(function(e){return e.call(i,t)})}),this.path=t,this.enterHooks=n?[n]:[],this.onChange=a,this.leaveHooks=c?[c]:[],this.props=o,this.indexRoute=u,this.childRoutes=l,this.legacy_server_context=s,this.deeplinks=p,this.pageType=f,this.getComponent=d,this.component=m,this.authBundleLoader=y,this.authResources=h,this.bundle=b,this.chunkFilename=v}return _(g,[{key:"wrapReplace",value:function e(o){return function(e){"string"==typeof e?e=encodeURI(e):e.pathname=encodeURI(e.pathname);for(var t=arguments.length,n=new Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return o.apply(void 0,[e].concat(n))}}},{key:"addEnterHook",value:function e(t){this.enterHooks.push(t)}},{key:"addLeaveHook",value:function e(t){this.leaveHooks.push(t)}}]),g}(),T=function(e){function r(e,t,n){return w(this,r),m(this,h(r).call(this,{path:e,onEnter:t,legacy_server_context:n}))}return b(r,e),r}(E)},"9oPq":function(e,t,n){"use strict";var u=n("d6ZO"),r=n.n(u),l=n("F3c4");function s(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(e){o(t,e,n[e])})}return t}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var i=function e(t){var n=t.children,r=t.className,o=t.forwardRef,i=t.position,a=t.style,c=void 0===a?{}:a;return u.createElement(l.a,null,function(e){return u.createElement("div",{className:r,ref:o,style:s({top:e},i?{position:i}:{},c)},n)})};t.a=i},APyo:function(e,t,n){"use strict";t.a=r;var i=n("W/Cr"),a=n("suNN");function r(e){var t=e.m,n=e.h,r=e.rm,o=e.rh;return t&&(!n||o<=0)?Object(a.b)(i.a.ngettext("{{mins}} minute","{{mins}} minutes",r),{mins:r.toString()}):n?Object(a.b)(i.a.ngettext("{{hrs}} hour","{{hrs}} hours",o),{hrs:o.toString()}):null}},AkyD:function(e,t,n){"use strict";var r={debugPinImpressions:999,max:9999,pinActionWrapper:101,saved:102,storyPinImage:-1};t.a=r},B0A7:function(e,t,n){"use strict";n.d(t,"c",function(){return r}),n.d(t,"a",function(){return o}),n.d(t,"b",function(){return i});var r=function e(t,n){return"".concat(t,":").concat(n||"")},o=function e(t,n){return t.feeds.profileBoards[r(n.username,n.boardOrder)]},i=function e(t,n){return n.isOverview?"xxWide":n.isOwnProfile&&t.ui.views&&t.ui.views.profileBoardView||"wide"}},DOck:function(e,t){function n(){}e.exports=n},EKB3:function(e,t){},Exm5:function(e,t,n){var r=n("ncdy");function o(e){return e&&e.length?r(e):[]}e.exports=o},F3c4:function(e,t,n){"use strict";var r=n("d6ZO"),o=n.n(r),i=n("yzr7"),a=function e(t){return r.createElement(i.a.Consumer,null,t.children)};t.a=a},FTnl:function(e,t,n){"use strict";n.d(t,"a",function(){return O});var r=n("d6ZO"),d=n.n(r),o=n("GGB8"),m=n.n(o),i=n("IaRT"),a=n.n(i),y=n("gEaE");function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),e}function p(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?v(e):t}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}function b(e,t){return(b=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var w=2e3;function _(e,t,n){if(e[t]){var r=e[t];if(r instanceof Array)return r.length<=2?null:new Error(t+" in "+n+" should contain a max of 2 strings")}return null}var O=function(e){function i(){var e,t;u(this,i);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return g(v(v(t=p(this,(e=f(i)).call.apply(e,[this].concat(r))))),"state",{hiding:!1,visible:!1}),g(v(v(t)),"handleHide",function(){var e=200;t.setState({hiding:!0}),t.timeout=setTimeout(t.props.onHide,e)}),g(v(v(t)),"handleMouseEnter",function(){t.timeout&&clearTimeout(t.timeout)}),g(v(v(t)),"handleMouseLeave",function(){t.timeout=setTimeout(t.handleHide,t.props.duration)}),t}return h(i,e),s(i,[{key:"componentDidMount",value:function e(){var t=this;setTimeout(function(){t.setState({visible:!0})},100),this.timeout=setTimeout(this.handleHide,this.props.duration)}},{key:"componentWillUnmount",value:function e(){this.timeout&&clearTimeout(this.timeout)}},{key:"render",value:function e(){var t=this.props,n=t.icon,r=t.imageUrl,o=t.href,i=t.onClick,a=t.text,c=t.openNewPage,u=this.props.color?this.props.color:"darkGray",l="string"==typeof a?a:"".concat(a[0]," ").concat(a[1]),s=n;o&&(s=r?void 0:"arrow-circle-forward");var p=o||r?d.a.createElement("div",{className:"imageWrapper"},d.a.createElement("img",{className:"toastImage",src:r,alt:l})):void 0,f=d.a.createElement(y.N,{color:u,icon:s,text:a,thumbnail:p});return d.a.createElement("div",{className:m()("ToastBase","react",{visible:this.state.visible},{hiding:this.state.hiding}),onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,"data-test-id":"toast"},o?d.a.createElement("a",{href:o,onClick:i,target:c?"_blank":null,rel:c?"noopener noreferrer":null},f):f)}}]),i}(r.Component);g(O,"defaultProps",{duration:w})},"Hxt/":function(e,t,n){"use strict";t.a=i,t.d=a,t.e=c,t.b=s,t.c=p;var u=n("zF3j"),l=28;function r(e){return e.srcElement.body.scrollTop||e.srcElement.documentElement.scrollTop||window.pageYOffset||window.scrollY||0}function o(e,t,n){var r=e&&t in e&&e[t],o=r&&r.display_data;return o&&n in o?o[n]:null}function i(e){var t={},n=e.trim();0<n.length&&(t.full_name=n);var r=n.split(/ (.+)/);return""===r[0]&&r.shift(),0<r.length&&(t.first_name=r[0]||""),1<r.length&&(t.last_name=r[1]||""),t}function a(e){var t=e.user,n=e.days,r=void 0===n?l:n;if(!t||!t.createdAt)return!1;var o=new Date(t.createdAt),i=Object(u.h)(-r,o),a=new Date;return!Object(u.g)(a,i)}function c(e){var t=e.user,n=e.days,r=void 0===n?l:n;if(!t.resurrectionInfo)return!1;var o=t.resurrectionInfo.resurrectionDate,i=new Date,a=o?new Date(o):i,c=Object(u.c)(a,r);return Object(u.g)(c,i)}function s(e){return a(e)||c(e)&&!e.user.isPartner}function p(e){return e&&e[1000069]&&500417===e[1000069].experience_id}function f(e){return e&&e[1000075]&&1e4!==e[1000075].experience_id}},I86I:function(e,t,n){"use strict";var _=n("d6ZO"),it=n.n(_),r=n("DUIN"),o=n("k5Wr"),i=n.n(o),a=n("SnoN"),c=n("GGB8"),at=n.n(c),ct=n("AkyD"),ut=n("gEaE");function u(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(e){l(t,e,n[e])})}return t}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function lt(e){var t=e.debugImpressionStarted,n=e.debugImpressionLogged,r=e.slotIndex,o=n||t?u({},n&&!t?{opacity:.1}:{},t?{backgroundColor:"#adebad"}:{},{height:"100%",width:"100%"}):null;return _.createElement("div",{style:o},(t||n)&&_.createElement(ut.b,{position:"absolute",padding:2,color:"darkGray",dangerouslySetInlineStyle:{__style:{zIndex:ct.a.debugPinImpressions}}},_.createElement(ut.K,{size:"xl",color:"white"},r)),e.children)}var d=n("6Kif"),m=n("PdvL"),st=n("KYHz"),pt=n("HcmU"),s=n("rTF4"),ft=n("W/Cr"),dt=n("r2pX"),E=n("FfPm"),O=n("tmfO"),h=n("PMt+");function g(e){var t=e.feedbackType,n=e.topic,r=e.pinner||{},o=r.full_name,i="topic"===t,a=!i&&"followed"===t,c="/".concat(r.username,"/"),u=Object(h.g)(n),l="/search/pins/?q=".concat(encodeURIComponent(u),"&rs=image_only_attribution"),s=i?l:c,p,f={topic:ft.a._("From {topic}","attribution on pin rep"),followed:ft.a._("From {pinnerName}","attribution on pin rep"),pfyBoard:ft.a._("Picked for you","attribution on pin rep"),pfy:ft.a._("Picked for you","attribution on pin rep")}[t];if(!f)return null;if(a||i){var d=0===f.indexOf("{"),m=i?n:o,y=d?f.slice(f.indexOf("}")+1):f.slice(0,f.indexOf("{"));return d?it.a.createElement(ut.b,{display:"inlineBlock",marginTop:1},it.a.createElement(O.b,{to:s},it.a.createElement(ut.K,{bold:!0,inline:!0,size:"xs",truncate:!0},m)),it.a.createElement(ut.K,{inline:!0,size:"xs"},y)):it.a.createElement(ut.b,{display:"inlineBlock",marginTop:1},it.a.createElement(ut.K,{inline:!0,size:"xs"},y),it.a.createElement(O.b,{to:s},it.a.createElement(ut.K,{bold:!0,inline:!0,size:"xs",truncate:!0},m)))}return it.a.createElement(ut.b,{display:"inlineBlock",marginTop:1},it.a.createElement(ut.K,{inline:!0,size:"xs"},f))}var mt=n("gfFY"),w=n("suNN");function T(e){var t=e.pin,n=e.feedbackType,r=e.imageOnlyAttribution,o=e.isHovering,i=e.isVideo,a=e.onClickThrough,c=e.sourceUrl,u=Object(mt.n)(t.id),l=t.attribution||{},s=l.author_url||l.provider_url,p=l.author_name,f=l.rich_site_name||l.provider_name,d=p?Object(w.b)(ft.a._("by {{ authorName }}","attribution on pin rep"),{authorName:p}):f,m=!d&&t.has_required_attribution_provider?t.domain:d,y=s||c,h=y&&m,b=o&&!h&&r&&!i&&!t.is_native&&"followed"!==n,v=(t.source_interest||{}).name;return it.a.createElement(it.a.Fragment,null,h&&it.a.createElement(ut.b,{paddingY:1},it.a.createElement(ut.K,{size:"sm",bold:!0},it.a.createElement(O.b,{deeplinkUrls:u,external:!0,onClick:a,pinId:t.id,stopPropagation:!0,style:{color:"#898989"},to:y},m))),b&&n&&it.a.createElement(g,{feedbackType:n,pinner:t.pinner,topic:v}))}function b(e){var t=e.avatarUrl,n=e.creditNameLink,r=e.name;return n?it.a.createElement(O.b,{className:"underlineLink",stopPropagation:!0,to:n},it.a.createElement(ut.a,{name:r,src:t,size:"sm"})):it.a.createElement(ut.a,{name:r,src:t,size:"sm"})}function v(e){var t=e.name,n=e.creditNameLink;return it.a.createElement(ut.b,null,n?it.a.createElement(O.b,{className:"underlineLink",stopPropagation:!0,to:n},it.a.createElement(ut.K,{truncate:!0,size:"xs",bold:!0},t)):it.a.createElement(ut.K,{truncate:!0,size:"xs",bold:!0},t))}function S(e){var t=e.title,n=e.link;return t&&it.a.createElement(ut.b,null,n?it.a.createElement(O.b,{className:"underlineLink",stopPropagation:!0,to:n},it.a.createElement(ut.K,{truncate:!0,size:"xs"},t)):it.a.createElement(ut.K,{truncate:!0,size:"xs"},t))}var P=n("woYD"),C=function e(t){return!!t.promoter&&!t.is_downstream_promotion};function k(e){var t=e.hideTitle,n=e.pin,r=e.viewType,o=e.viewParameter,i=n.board,a=n.promoter,c=n.pinner||{},u=C(n),l=function e(){return Object(P.a)(101,{view:r,viewParameter:o,element:u?283:27})},s,p,f,d,m,y;u&&a?(s="/".concat(a.username,"/"),p=ft.a._("Promoted by"),d=a.full_name,y=a.image_small_url):(s=i&&i.url,p=c.full_name,d=i&&i.name&&"protected"!==i.privacy?i.name:"",y=c.image_small_url,f="/".concat(c.username,"/"),m=i?i.url:"");var h=it.a.createElement(ut.b,{display:"flex",direction:"row",alignItems:"center",marginLeft:-1,marginRight:-1},it.a.createElement(ut.b,{paddingX:1},it.a.createElement(b,{avatarUrl:y,creditNameLink:f,name:p})),it.a.createElement(ut.b,{paddingX:1,overflow:"hidden"},it.a.createElement(v,{creditNameLink:f,name:p}),!t&&it.a.createElement(S,{link:m,title:d})));return!s||f||m?h:it.a.createElement(O.b,{className:"underlineLink",stopPropagation:!0,onClick:l,to:s},h)}var I=n("w1jd"),j=function e(){return n.e(32).then(n.bind(null,"Vaa5"))};function yt(e){var t=e.pin,n=e.feedbackType,r=e.hideAttribution,o=e.imageOnlyAttribution,i=e.isHovering,a=e.imageOnly,c=e.isVideo,u=e.onClickThrough,l=e.onReactionReplyClick,s=e.showCredits,p=e.showPinReactionsReply,f=e.sourceUrl,d=e.togglePinReactionsModal,m=e.viewParameter,y=e.viewType,h=t.is_native||t.promoter||!a&&(s||"followed"===n),b=t.board&&t.board.should_show_board_activity,v=t&&t.board_activity&&t.board_activity.id||t.id;return it.a.createElement(it.a.Fragment,null,it.a.createElement(T,{pin:t,feedbackType:n,imageOnlyAttribution:o,isHovering:i,isVideo:c,onClickThrough:u,sourceUrl:f}),(h||b)&&it.a.createElement(ut.b,{dangerouslySetInlineStyle:{__style:{zIndex:ct.a.max,position:"relative"}},paddingY:1},h&&!r&&it.a.createElement(k,{hideTitle:!!b,pin:t,viewParameter:m,viewType:y}),b&&it.a.createElement(ut.b,{position:"relative","data-test-id":"board-activity-reactions",minHeight:40},it.a.createElement(dt.a,{loader:j},function(e){return it.a.createElement(e,{activityId:v,activityType:I.a.BOARD_ACTIVITY,excludeFromCommentExperiment:!0,onReplyClick:l("".concat(t.board?t.board.url:"","activity/").concat(v,"/")),parentComponentType:0,showReply:p,toggleLikeListModal:d})}))))}var ht=n("+Lqo"),p=function e(t){var n=t.carousel_data,r,o=t.description;if(n){var i=n.carousel_slots,a=void 0===i?[]:i,c=n.index;a[c]&&a[c].details&&(o=a[c].details)}var u=n?{height:"39px",overflow:"hidden"}:{};return it.a.createElement(ut.b,{dangerouslySetInlineStyle:{__style:u},paddingY:1},it.a.createElement(ut.K,{size:"sm",bold:!0},it.a.createElement(ht.a,{text:o,options:{hashtags:{appendText:"".concat(o),source:"hashtag_pinrep"}}})))},f=function e(t,n){var r=t.pins,o=n.pinId;return{carousel_data:r[o]&&r[o].carousel_data}},bt=Object(r.connect)(f)(p),y=n("OIxG"),x=n("djV9"),R=n("Yu0i"),A=n.n(R),D=n("WBZ1"),M=n.n(D),N=n("JyNp");function L(e){return(L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function U(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function B(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function F(e,t,n){return t&&B(e.prototype,t),n&&B(e,n),e}function H(e,t){return!t||"object"!==L(t)&&"function"!=typeof t?W(e):t}function Y(e){return(Y=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function z(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&V(e,t)}function V(e,t){return(V=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}function W(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function G(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var K=4,Z=354,q=10;function X(e){var t=e.data;if(t){var n=t.story_pin_data,r;return(n=void 0===n?{}:n).pages}}var Q=function(e){function o(){var e,i;U(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return G(W(W(i=H(this,(e=Y(o)).call.apply(e,[this].concat(n))))),"state",{activeImageIndex:0}),G(W(W(i)),"storyPinRef",it.a.createRef()),G(W(W(i)),"previewImages",[]),G(W(W(i)),"fetchPreviewImages",function(e){!i.previewImages.length&&e.length&&(i.previewImages=e.filter(function(e){return e.image}).slice(0,4).map(function(e){var t=e.image;if(t){var n=t.images;return n["236x"].width>n["236x"].height?n["750x"]:n["236x"]}}).filter(Boolean))}),G(W(W(i)),"handleScroll",M()(function(){var e=window.innerHeight,t=i.storyPinRef.current?i.storyPinRef.current.getBoundingClientRect().top:0,n;if(-(i.storyPinRef.current?i.storyPinRef.current.offsetHeight:Z)<=t&&t<=e){var r=(e-t)/e,o=Math.max(Math.round(r*i.previewImages.length)-1,0);i.setState({activeImageIndex:o})}else i.setState({activeImageIndex:0})},10)),i}return z(o,e),F(o,[{key:"componentDidMount",value:function e(){document.addEventListener("scroll",this.handleScroll);var t=X(this.props.detailedPin);t&&this.fetchPreviewImages(t)}},{key:"componentDidUpdate",value:function e(t,n){var r;if(!X(t.detailedPin)){var o=X(this.props.detailedPin);o&&this.fetchPreviewImages(o)}}},{key:"componentWillUnmount",value:function e(){document.removeEventListener("scroll",this.handleScroll)}},{key:"render",value:function e(){var n=this,t=this.props.pin,r=t.title,o=void 0===r?"":r,i=t.images,a=void 0===i?{}:i,c=a["236x"].width>a["236x"].height?a["736x"]:a["236x"];return it.a.createElement("div",{ref:this.storyPinRef},it.a.createElement(ut.b,{position:"relative"},it.a.createElement("div",{className:"story-pin-cinematic-image__background-container",style:{backgroundImage:"url(".concat(c.url,")")}},this.previewImages.map(function(e,t){return e?it.a.createElement("div",{className:"story-pin-cinematic-image__background",style:{backgroundImage:"url('".concat(e.url,"')"),opacity:t===n.state.activeImageIndex?1:0},key:t}):null})),it.a.createElement(ut.b,{position:"absolute",left:!0,bottom:!0,width:"100%",dangerouslySetInlineStyle:{__style:{padding:"0 20px 16px 8px"}}},it.a.createElement(ut.K,{size:"md",color:"white",bold:!0},o))))}}]),o}(_.Component),J=Object(N.b)({name:"PinResource",key:"detailedPin",options:function e(t){var n;return{id:t.pin.id,field_set_key:"detailed"}}})(Q),$=n("EKB3"),ee=n.n($);function te(e){var t=e.onError,n=e.onLoad,r=e.pin,o=r.title,i=void 0===o?"":o,a=r.dominant_color,c=r.images,u=void 0===c?{}:c,l=u["236x"].width>u["236x"].height?u["736x"]:u["236x"];return it.a.createElement(ut.b,{position:"relative"},it.a.createElement(ut.b,{position:"absolute",top:!0,left:!0,width:"100%",height:"100%",dangerouslySetInlineStyle:{__style:{zIndex:ct.a.storyPinImage}}},it.a.createElement(ut.p,{alt:i,color:a,naturalHeight:l.height,naturalWidth:l.width,onError:t,onLoad:n,src:l.url,fit:"cover"})),it.a.createElement("div",{className:"story-pin-image__overlay"}),it.a.createElement(ut.b,{position:"absolute",left:!0,bottom:!0,width:"100%",dangerouslySetInlineStyle:{__style:{padding:"0 20px 16px 8px"}}},it.a.createElement(ut.K,{size:"md",color:"white",bold:!0},i)))}var vt=n("6oz1"),ne=n("8Zvv"),re=function e(t){var n=t.desktopCarouselEnabled,r=t.highResOnly,o=t.lowResOnly,i=t.onError,a=t.onLoad,c=t.requestContext,u=t.pin,l=t.saved,s=u.carousel_data,p=u.description,f=void 0===p?"":p,d=u.dominant_color,m=u.id,y=u.images,h,b,v,g;if(s&&n)return it.a.createElement(x.a,{onError:i,onLoad:a,highResOnly:r,lowResOnly:o,pinId:m});if(y){var w=Object(ne.c)(c,y),_=r&&(w["736x"]||w.orig||w["474x"])||w["236x"];v=_.height,g=_.width,h=_.url,b=o||r?"".concat(_.url," 1x"):["".concat(w["236x"].url," 1x"),w["474x"]&&"".concat(w["474x"].url," 2x"),w["736x"]&&"".concat(w["736x"].url," 3x"),w.orig&&"".concat(w.orig.url," 4x")].filter(Boolean).join(", ")}return it.a.createElement(vt.b,{name:"web_save_animation",activate:!1},function(e){var t=e.anyEnabled;return it.a.createElement("div",{className:t&&l?"savedGradient":null},it.a.createElement(vt.b,{name:"web_creators_story_pin_display",activate:!0,isEligible:!!u.story_pin_data_id},function(e){var t;return e.anyEnabled?it.a.createElement(vt.b,{name:"web_creators_story_pin_cinematic_rep",activate:!0,isEligible:!!u.story_pin_data_id},function(e){var t;return e.anyEnabled?it.a.createElement(J,{pin:u,onError:i,onLoad:a}):it.a.createElement(te,{pin:u,onError:i,onLoad:a})}):it.a.createElement(ut.p,{alt:f,color:d,naturalHeight:v,naturalWidth:g,onError:i,onLoad:a,src:h,srcSet:b})}))})},oe=function e(t){return it.a.createElement("div",{"data-pwt":"true"},it.a.createElement(re,t))},gt=Object(y.b)(oe),wt=n("rgtM"),ie=function e(t){var n=t.carousel_data,r=t.pinId,o=t.sourceUrl,i=t.pinDeeplinkUrls,a=t.handleOneTapLogging,c="one-tap-desktop",u=o,l;if(n){var s=n.carousel_slots,p=void 0===s?[]:s,f=n.id,d=n.index;p[d]&&p[d].link&&(u=p[d].link),l={carousel_slot_id:p[d]&&p[d].id,carousel_data_id:f,carousel_slot_index:d},c+="-carousel"}return it.a.createElement("div",{"data-test-id":"oneTapPromotedPin"},it.a.createElement(wt.a,{id:c},it.a.createElement(O.b,{auxData:l&&l,className:"oneTapNavigateLink",deeplinkUrls:i,external:!0,onClick:a,pinId:r,stopPropagation:!0,to:u})))},ae=function e(t,n){var r=t.pins,o=n.pinId;return{carousel_data:r[o]&&r[o].carousel_data}},_t=Object(r.connect)(ae)(ie);function Ot(e){var t=e.buyableProduct,n=e.showProductInfo,r=e.richSummary,o,i;if(!n)return null;if(t){var a=t.display_active_min_price,c=t.display_active_max_price,u;i=t.is_available,o=a===c?a:"".concat(a," - ").concat(c)}else if(r&&0<(r.products||[]).length){var l=r.products[0].offer_summary||{},s=l.availability,p;o=l.price,1===s?i=!0:2===s&&(i=!1)}return o&&it.a.createElement(ut.b,{display:"flex",paddingY:1},it.a.createElement(ut.b,{marginRight:2},it.a.createElement(ut.K,{size:"sm"},o)),void 0!==i&&it.a.createElement(ut.K,{size:"sm",color:i?"darkGray":"gray"},i?ft.a._("In stock","A product Pin that is available"):ft.a._("Out of stock","A product Pin that is out of stock")))}var ce=76;function ue(e){var t=e.chips;return it.a.createElement(ut.b,{display:"flex",direction:"row",justifyContent:"between"},t.map(function(e){var t=e.images["750x"]||{};return it.a.createElement(ut.b,{marginTop:1,key:e.id},it.a.createElement(O.b,{stopPropagation:!0,to:"/pin/".concat(e.id,"/")},it.a.createElement(ut.u,{shape:"rounded",width:76,height:76,wash:!0},it.a.createElement(ut.p,{alt:"",naturalHeight:t.height,naturalWidth:t.width,src:t.url,fit:"cover"}))))}))}var Et=ue,le=n("ULUT"),Tt=n("+vjZ"),St=n("lvmc"),Pt=n("DZnV"),se=n("AGGR"),pe=n("WOuy");function fe(e){var t=e.pin,n=e.playing,r=e.viewType,o=e.viewParameter,i=t.videos.video_list.V_720P,a=t.videos.video_list.V_HLSV4,c=[a&&{type:"video/m3u8",src:a.url},i&&{type:"video/mp4",src:i.url}].filter(Boolean),u,l=(t.images["236x"]||{}).url,s=i||a||{},p=s.height,f=s.thumbnail,d=s.width;return it.a.createElement("div",{"data-pwt":"true"},it.a.createElement(pe.a,{contextLogData:{component:0,view:r,viewParameter:o,objectId:t.id,video_id:t.videos.id},accessibilityMaximizeLabel:ft.a._("Maximize","Maximize button on video"),accessibilityMinimizeLabel:ft.a._("Minimize","Minimize button on video"),accessibilityMuteLabel:ft.a._("Mute","Mute button on video"),accessibilityPauseLabel:ft.a._("Pause","Pause button on video"),accessibilityPlayLabel:ft.a._("Play","Play button on video"),accessibilityUnmuteLabel:ft.a._("Unmute","Unmute button on video"),aspectRatio:d/p,captions:"",playing:n,poster:l||f,src:c,volume:0}))}var de=n("sHx0"),me=n("38HY");function ye(e){return(ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function he(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function be(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ve(e,t,n){return t&&be(e.prototype,t),n&&be(e,n),e}function ge(e,t){return!t||"object"!==ye(t)&&"function"!=typeof t?Ee(e):t}function we(e){return(we=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function _e(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Oe(e,t)}function Oe(e,t){return(Oe=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}function Ee(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Te(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Se=Object(de.a)(fe),Pe=function(e){function o(){var e,c;he(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Te(Ee(Ee(c=ge(this,(e=we(o)).call.apply(e,[this].concat(n))))),"impressionsExpGroup",""),Te(Ee(Ee(c)),"handleVisibilityChanged",function(e){var t=c.props,n=t.autoplayPinId,r=t.canAutoplay,o=t.onLoad,i=t.pin,a=t.setAutoplayPinId;c.impressionsExpGroup.startsWith("enabled")||e&&o&&o(),r&&(e&&null===n?a(i.id):e||n!==i.id||a(null))}),c}return _e(o,e),ve(o,[{key:"componentDidMount",value:function e(){this.impressionsExpGroup=se.a.getInstance().activate("www_mqtt_video_impressions")||"",this.impressionsExpGroup.startsWith("enabled")&&this.props.onLoad&&this.props.onLoad()}},{key:"render",value:function e(){var t=this.props,n=t.autoplayPinId,r=t.canAutoplay,o=t.isHovering,i=t.pin,a=t.viewParameter,c=t.viewType;return _.createElement(Se,{viewParameter:a,viewType:c,onVisibilityChanged:this.handleVisibilityChanged,pin:i,playing:o||r&&n===i.id,trackFullVisible:!0})}}]),o}(_.Component),Ce=function e(t,n){return{autoplayPinId:t.ui.app.autoplayPinId}},ke=function e(n,t){return{setAutoplayPinId:function e(t){return n(Object(me.a)(t))}}},Ct=Object(r.connect)(Ce,ke)(Pe),Ie=n("IaRT"),je=n.n(Ie),xe=n("APyo"),Re=n("7izU");function kt(e){var t=e.richSummary;return it.a.createElement(ut.b,{display:"flex"},!!t.display_cook_time&&it.a.createElement(ut.b,{alignItems:"center",display:"flex"},it.a.createElement(ut.n,{icon:"clock",accessibilityLabel:ft.a._("cooking time","time it takes to cook a recipe"),color:"darkGray",size:10,inline:!0}),it.a.createElement(ut.b,{paddingX:1},it.a.createElement(ut.K,{inline:!0,size:"sm"},!!t.display_cook_time&&Object(xe.a)(Object(Re.b)(t.display_cook_time))))))}var Ae=n("YWkC"),It=n("FJZF"),De=n("MQ2h"),Me=n.n(De),Ne=n("e+EL"),jt=n("te8a"),xt=n("P0Ho"),Le=n("Kq38"),Ue=n("kzic"),Be=n("uHNA"),Fe=n("8v83"),He=n("b6H4"),Ye=n("fwxM");function ze(e){return(ze="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function Ve(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function We(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ge(e,t,n){return t&&We(e.prototype,t),n&&We(e,n),e}function Ke(e,t){return!t||"object"!==ze(t)&&"function"!=typeof t?Ze(e):t}function Ze(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function qe(e){return(qe=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function Xe(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Qe(e,t)}function Qe(e,t){return(Qe=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}function Je(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var $e=function(e){function n(e){var t;return Ve(this,n),(t=Ke(this,qe(n).call(this,e,13)))._isPWT=!0,t.viewType=3,t.viewParameter=null,t.sampleRate=.1,t.cause=4,t.registeredEvents.CloseupDetailsUserNavStartTraceEvent=t.handleStartCurrTimer,t.registeredEvents.CloseupDetailsUserNavStopTraceEvent=t.handleStopTiming,t.registeredEvents.CloseupImageRenderedTraceEvent=t.handleImageRendered,t.registeredEvents.CloseupMetadataRenderedTraceEvent=t.handleMetadataRendered,t.registeredEvents.GridBottomSpinnerStartTraceEvent=t.handleAddAnnotation,t.registeredEvents.GridBottomSpinnerStopTraceEvent=t.handleAddAnnotation,t.registeredEvents.PageReactRouterOnChangeTraceEvent=t.handleRouteChange,t.registeredEvents.PageAbortTraceEvent=t.handleAbortEvent,t.registeredEvents.CloseupImageSrcAcquired=t.handleSetImageSrc,t}return Xe(n,e),Ge(n,[{key:"handleStopTiming",value:function e(t){if(this._currTimer){var n=this._currTimer;this.viewParameter=t.viewParameter,2===t.result&&this.handleAbortEvent(t),n.setResult(t.result),n.stopTiming(null,this.constructPWT.bind(this))}}},{key:"handleSetImageSrc",value:function e(t){this.hasActiveStopwatch&&(this.state.currentImageSrc=t.imgSrc)}},{key:"handleImageRendered",value:function e(t){if(this._currTimer){var n=this._currTimer,r=Date.now(),o=Object(Ye.d)(this.state.currentImageSrc,"resource");if(n.addAnnotation("CloseupImageRenderedTraceEvent",r),this.state.currentImageSrc&&o){var i=n.addSubStopwatch(new Fe.a({name:"image",metricName:this.metricName,parent:n,parentId:n.spanId,startTime:window.performance.timing.navigationStart+o.startTime,endTime:r}));Object(Ye.a)(i,o)}}}},{key:"handleMetadataRendered",value:function e(t){this._currTimer&&this._currTimer.addAnnotation("CloseupMetadataRenderedTraceEvent",Date.now())}},{key:"handleRouteChange",value:function e(t){if(this._currTimer){if(!this.state.closeupRouteChange)return void(this.state.closeupRouteChange=!0);this.handleAbortEvent(t)}}},{key:"handleAbortEvent",value:function e(t){if(this._currTimer){var n=this._currTimer;n.setResult(2,t.resultReason),n.stopTiming(null,this.constructPWT.bind(this))}}}]),n}(He.a);function et(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function tt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Je($e,"traceName","pwt/pin_closeup_details");var nt=function e(){et(this,e),tt(this,"handlers",[$e]),tt(this,"name","CloseupDetailsUserNavStartTraceEvent")},rt,ot=function e(t){var n=t.pinId,r=t.sourceUrl,o=t.onClick,i=t.bgColor,a=t.size,c=t.iconColor;return r?_.createElement(O.b,{external:!0,onClick:o,pinId:n,stopPropagation:!0,to:r},_.createElement(ut.o,{bgColor:i,icon:"arrow-up-right",accessibilityLabel:ft.a._("link","Website url link"),size:a,iconColor:c})):null},Rt=n("MSpZ"),At=n("uOsP"),Dt=24,Mt="M12.4,2.53333333 L14.4,5.2 C14.5656854,5.4209139 14.5209139,5.73431458 14.3,5.9 C14.2134519,5.96491106 14.1081851,6 14,6 L10,6 C9.72385763,6 9.5,5.77614237 9.5,5.5 C9.5,5.39181489 9.53508894,5.28654809 9.6,5.2 L11.6,2.53333333 C11.7656854,2.31241943 12.0790861,2.26764791 12.3,2.43333333 C12.3379028,2.46176046 12.3715729,2.4954305 12.4,2.53333333 Z",Nt=function e(){return it.a.createElement("svg",{width:14,height:8,viewBox:"0 0 14 8",role:"img",xmlns:"http://www.w3.org/2000/svg"},it.a.createElement("rect",{fill:"#ffffff",x:"0",y:"0",width:"10",height:"8",rx:"1"}),it.a.createElement("path",{d:Mt,transform:"translate(12.000000, 4.000000) rotate(-90.000000) translate(-12.000000, -4.000000)",fill:"#ffffff"}))};function Lt(e){var t=e.duration,n=e.showDuration;return it.a.createElement(ut.b,{alignItems:"center",color:"transparentDarkGray",display:"flex",height:24,justifyContent:"center",paddingX:n?2:void 0,shape:n?"pill":"circle",width:n?void 0:24},it.a.createElement(Nt,null),n&&it.a.createElement(ut.b,{marginLeft:1},it.a.createElement(ut.K,{color:"white",size:"xs",truncate:!0},Object(At.a)(t))))}var Ut=80,Bt="…";function Ft(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=t.maxLength,r=void 0===n?Ut:n,o=t.suffix,i=void 0===o?Bt:o,a,c;return e.length<=r?e:e.substring(0,r-1).replace(/[\- _,.<>:;+=*&@~\/\|!]*$/,"")+i}function Ht(e){return(Ht="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function Yt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(e){Qt(t,e,n[e])})}return t}function zt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Vt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Wt(e,t,n){return t&&Vt(e.prototype,t),n&&Vt(e,n),e}function Gt(e,t){return!t||"object"!==Ht(t)&&"function"!=typeof t?Xt(e):t}function Kt(e){return(Kt=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function Zt(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&qt(e,t)}function qt(e,t){return(qt=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}function Xt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Qt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Jt=23,$t=15,en=function(e){function o(){var e,l;zt(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Qt(Xt(Xt(l=Gt(this,(e=Kt(o)).call.apply(e,[this].concat(n))))),"state",{hovered:!1,focused:!1,active:!1}),Qt(Xt(Xt(l)),"handleFocus",function(){l.setState({focused:!0})}),Qt(Xt(Xt(l)),"handleMouseDown",function(){l.setState({active:!0})}),Qt(Xt(Xt(l)),"handleMouseUp",function(){l.setState({active:!1})}),Qt(Xt(Xt(l)),"handleMouseEnter",function(){l.setState({hovered:!0})}),Qt(Xt(Xt(l)),"handleMouseLeave",function(){l.setState({active:!1,hovered:!1})}),Qt(Xt(Xt(l)),"renderRightArrowClickthrough",function(){var e=l.props,t=e.backgroundColor,n=e.borderRadius,r=e.denseViewSelected,o=e.domain,i=e.textColor,a=e.maxHeight,c,u=Ft(o,{maxLength:r?15:23});return _.createElement(ut.b,{padding:2,color:t,display:"flex",justifyContent:"between",alignItems:"center",dangerouslySetInlineStyle:{__style:{borderRadius:n}},maxHeight:a},_.createElement(ut.b,{display:"flex",flex:"none"},_.createElement(ut.n,{icon:"arrow-up-right",accessibilityLabel:ft.a._("link","Website url link"),size:14,color:i})),_.createElement(ut.b,{marginLeft:2,height:18,flex:"grow",overflow:"hidden"},_.createElement(ut.K,{bold:!0,size:"sm",color:i,truncate:!0},u)))}),l}return Zt(o,e),Wt(o,[{key:"render",value:function e(){var t=this.props,n=t.borderRadius,r=t.bottom,o=t.hoverStyle,i=t.isEligibleForWebCloseup,a=t.onClick,c=t.pinId,u=t.position,l=t.sourceUrl,s=t.paddingX;if(!l)return null;var p=this.state.hovered||this.state.focused||this.state.active?o:{};return _.createElement(ut.b,{position:u,bottom:r},_.createElement(ut.b,{alignItems:"end",display:"flex",justifyContent:"between",marginLeft:-1,marginRight:-1,padding:2},_.createElement(ut.b,{minWidth:0,paddingX:s},!i&&_.createElement(ut.b,{position:"relative",dangerouslySetInlineStyle:{__style:Yt({borderRadius:n},p)},onFocus:this.handleFocus,onMouseDown:this.handleMouseDown,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,onMouseUp:this.handleMouseUp},_.createElement(O.b,{external:!0,onClick:a,pinId:c,stopPropagation:!0,to:l},this.renderRightArrowClickthrough())))))}}]),o}(_.Component);function tn(e){return(tn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function nn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function rn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function on(e,t,n){return t&&rn(e.prototype,t),n&&rn(e,n),e}function an(e,t){return!t||"object"!==tn(t)&&"function"!=typeof t?sn(e):t}function cn(e){return(cn=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function un(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ln(e,t)}function ln(e,t){return(ln=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}function sn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function pn(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(e){fn(t,e,n[e])})}return t}function fn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Qt(en,"defaultProps",{textColor:"darkGray",backgroundColor:"lightGray",borderRadius:4,position:"absolute",bottom:!0,hoverStyle:{},paddingX:1});var dn=function e(){return n.e(28).then(n.bind(null,"NFAf"))},mn=function e(){return n.e(23).then(n.bind(null,"q6Rf"))},yn=function e(){return n.e(29).then(n.bind(null,"TGeg"))},hn=function e(){return n.e(26).then(n.bind(null,"8N7E"))},bn=function e(){return n.e(24).then(n.bind(null,"K2Yy"))},vn=function e(){return n.e(27).then(n.bind(null,"JyMW"))},gn=function e(t){var n,r=pn({},t.style,{zIndex:ct.a.pinActionWrapper});return it.a.createElement(ut.b,Object.assign({},t,{dangerouslySetInlineStyle:{__style:r}}))};gn.defaultProps={style:{}};var wn=function(e){function o(){var e,u;nn(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return fn(sn(sn(u=an(this,(e=cn(o)).call.apply(e,[this].concat(n))))),"onToggleFlyout",function(){var e=u.props,t=e.isFlyoutOpen,n;(0,e.onToggleFlyout)(!t)}),fn(sn(sn(u)),"handleOnSourceImageClick",function(){var e=u.props,t=e.imageSignature,n=e.slotIndex;Rt.a.sendEvent(new nt),u.handleClickLogging(35,{grid_index:n,image_signature:t})}),fn(sn(sn(u)),"handleToggleHover",function(e){u.props.onToggleFlyout(!1,e)}),fn(sn(sn(u)),"handleToggleSubmenu",function(e,t){u.props.onToggleFlyout(e,t,"save")}),fn(sn(sn(u)),"handleDropdownClose",function(){u.props.onToggleFlyout(!1)}),fn(sn(sn(u)),"handleClickthroughLogging",function(){var e=u.props,t=e.componentType,n=e.contextLogData,r=e.pin,o=e.slotIndex,i=e.viewType,a=e.viewParameter,c=r.id;Object(P.a)(12,pn({},n,{view:i,viewParameter:a,component:t,objectId:c,grid_index:o})),u.handleClickLogging(162)}),fn(sn(sn(u)),"handleSaveButtonClick",function(){u.handleClickLogging(0),Object(Le.a)("Lead",function(){E.default.increment("fb_tracking_pixel",1,{event_category:"Lead",event_name:"Repin Click"})})}),u}return un(o,e),on(o,[{key:"getViewInfo",value:function e(){var t=this.props,n=t.viewType,r=t.showEditPinButton,o=5===n,i=2===n,a=4===n,c,u,l;return{isBoardView:o,isSearchView:i,isProfileView:a,isOwnProfileView:a&&r,isOwnBoardView:o&&r,isOwnPinSearchView:i&&r}}},{key:"cropImageStyles",value:function e(){var t=this.props,n=t.imageHeight,r=t.pin,o=t.truncatePinHeight,i={};if(r.image_crop&&o&&(0!==r.image_crop.min_y||1!==r.image_crop.max_y)){var a=r.image_crop.min_y,c=r.image_crop.max_y,u,l;i={marginTop:0<a?-1*a*n+"px":"0px",marginBottom:c<1?Math.round(-1*(1-c)*n)+"px":"0px"}}return i}},{key:"handleClickLogging",value:function e(t,n){var r=this.props,o=r.componentType,i=r.contextLogData,a=r.viewParameter,c=r.viewType,u=r.pin.id;Object(P.a)(101,pn({},i,n,{component:o,view:c,viewParameter:a,element:t,objectId:u}))}},{key:"renderSendShareButton",value:function e(t,n){var r=this,o=this.props,i=o.images,a=o.inModal,c=o.pin.id,u=o.viewType;return it.a.createElement(wt.a,{id:"share-button"},it.a.createElement(dt.a,{loader:vn},function(e){return it.a.createElement(e,{iconSize:n,imageSrc:i&&i["236x"].url,inModal:a,onClick:function e(){return r.handleClickLogging(98)},onToggleFlyout:r.onToggleFlyout,onFlyoutDismiss:r.handleDropdownClose,pinId:c,sendType:"pin",shownWithinMasonry:!0,isFlyoutOpen:r.props.isFlyoutOpen,viewType:u,showTransparentButton:t})}))}},{key:"renderEditButton",value:function e(t){var n=this,r=this.props,o=r.pin,i=o.id,a=o.carousel_data,c=r.viewParameter,u=r.viewType;return it.a.createElement(wt.a,{id:"edit-button"},it.a.createElement(dt.a,{loader:hn},function(e){return it.a.createElement(e,{component:0,pinId:i,onToggleModal:n.handleToggleHover,view:u,viewParameter:c,carouselSlotCurrentIndex:a&&a.index,style:t})}))}},{key:"renderEditAndSendRow",value:function e(t,n){var r="md",o={bgColor:"white",iconColor:"darkGray",size:r};return it.a.createElement(gn,{padding:1,position:"absolute",top:!0,left:!0,display:"flex"},t&&it.a.createElement(ut.b,{padding:1},this.renderSendShareButton(!1,r)),n&&it.a.createElement(ut.b,{padding:1},this.renderEditButton(o)))}},{key:"renderPrimaryButtons",value:function e(t){var n=this,r=this.props,o=r.inFlyoutExperiment,i=r.inNewUserOneTapExperiment,a=r.onSave,c=r.pin,u=r.showRepinButton,l=r.showPromoteButton,s=r.showPersistentPromoteButton,p=r.showCondensedInfo,f=r.isHovering,d=r.showButtons,m=r.viewer,y=r.saveOptions,h=r.viewParameter,b="controlled"===y.type,v=b&&y.saved&&y.save,g,w;if(!(v||s||d&&(u||l)))return null;var _=null;l?_=it.a.createElement(wt.a,{id:"promote-button"},it.a.createElement(dt.a,{loader:yn},function(e){return it.a.createElement(e,{pin:c})})):"inline"===y.type?_=it.a.createElement(wt.a,{id:"better-save"},it.a.createElement(dt.a,{loader:mn},function(e){return it.a.createElement(e,{inMasonry:!0,isHovering:f,onSave:a,onToggleFlyout:n.handleToggleSubmenu,onToggleModal:n.handleToggleHover,pin:c,initialSelection:y&&y.initialSelection,viewParameter:h})})):(v||u&&m.isAuth)&&(_=i?it.a.createElement(wt.a,{id:"nux-one-click-save"},it.a.createElement(dt.a,{loader:dn},function(e){return it.a.createElement(e,{onClickCallback:n.handleSaveButtonClick,pin:c})})):it.a.createElement(wt.a,{id:"pin-save-button"},it.a.createElement(dt.a,{loader:bn},function(e){return it.a.createElement(e,{showFlyout:o,onClickCallback:function e(){n.handleClickLogging(0),Object(Le.a)("Lead",function(){E.default.increment("fb_tracking_pixel",1,{event_category:"Lead",event_name:"Repin Click"})})},onToggleFlyout:n.props.onToggleFlyout,onToggleModal:n.handleToggleHover,oneTapSave:b?y:void 0,iconOnly:p,pin:c})}))),t&&p&&(_=it.a.createElement(wt.a,{id:"pin-save-button"},it.a.createElement(dt.a,{loader:bn},function(e){return it.a.createElement(e,{showFlyout:o,onClickCallback:function e(){n.handleClickLogging(0),Object(Le.a)("Lead",function(){E.default.increment("fb_tracking_pixel",1,{event_category:"Lead",event_name:"Repin Click"})})},onToggleFlyout:n.props.onToggleFlyout,onToggleModal:n.handleToggleHover,oneTapSave:b?y:void 0,iconOnly:!1,pin:c})})));var O="inline"!==y.type||t&&p?"auto":"100%";return it.a.createElement(gn,{padding:2,position:"absolute",top:!0,right:!0,width:O},_)}},{key:"renderGradientOverlay",value:function e(t){var n=this.props.showButtons;return it.a.createElement(ut.b,{position:"relative"},t,n&&it.a.createElement(ut.b,{bottom:!0,left:!0,height:"100%",position:"absolute",right:!0,top:!0,width:"100%",dangerouslySetInlineStyle:{__style:{backgroundColor:"#000",opacity:.3}}}))}},{key:"renderClickThrough",value:function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},n=t.textColor,r=t.backgroundColor,o=t.borderRadius,i=t.position,a=this.props,c=a.denseViewSelected,u=a.domain,l=a.isEligibleForWebCloseup,s=a.pin.id,p=a.sourceUrl;return it.a.createElement(en,{backgroundColor:r,borderRadius:o,denseViewSelected:c,domain:u,isEligibleForWebCloseup:l,onClick:this.handleClickthroughLogging,pinId:s,position:i,sourceUrl:p,textColor:n})}},{key:"renderSecondaryButtonsFeedView",value:function e(){var t=this.props,n=t.domain,r=t.isEligibleForWebCloseup,o=t.pin.id,i=t.sourceUrl;return it.a.createElement(ut.b,{position:"absolute",display:"flex",alignItems:"center",padding:0,width:"100%",height:50,bottom:!0},it.a.createElement(ut.b,{width:"75%"},it.a.createElement(en,{domain:n,isEligibleForWebCloseup:r,sourceUrl:i,pinId:o,position:"relative",textColor:"white",backgroundColor:"transparentDarkGray",borderRadius:20,onClick:this.handleClickthroughLogging,hoverStyle:{backgroundColor:"#333"}})),it.a.createElement(ut.b,{width:"25%"},it.a.createElement(gn,{display:"flex",justifyContent:"center",marginLeft:2,position:"relative"},this.renderSendShareButton(!0,"sm"))))}},{key:"renderSecondaryButtonsOwnPinView",value:function e(){var t=this.props,n=t.showSendButton,r=t.showEditPinButton;return it.a.createElement(_.Fragment,null,this.renderEditAndSendRow(n,r),this.renderClickThrough())}},{key:"renderHolisticHoverOwnPinViewCondensed",value:function e(){var t=this.props,n,r,o,i="md",a,c,u={size:i,iconColor:"white",bgColor:"transparentDarkGray"},l=pn({pinId:t.pin.id,domain:t.domain,sourceUrl:t.sourceUrl,bgColor:"transparentDarkGray"},u);return it.a.createElement(gn,{padding:1,width:"100%",position:"absolute",bottom:!0,left:!0,display:"flex",alignItems:"center",justifyContent:"around"},it.a.createElement(ut.b,{padding:1},it.a.createElement(ut.b,{width:40,height:40},it.a.createElement(ot,Object.assign({},l,{onClick:this.handleClickthroughLogging})))),it.a.createElement(ut.b,{padding:1},this.renderEditButton(u)),it.a.createElement(ut.b,{padding:1},this.renderSendShareButton(!0,i)))}},{key:"renderHolisticHoverOwnPinView",value:function e(){var t=this.props,n=t.showSendButton,r=t.showEditPinButton,o=t.pin.id,i=t.domain,a=t.isEligibleForWebCloseup,c=t.sourceUrl,u="sm",l={iconColor:"white",bgColor:"transparentDarkGray",size:u},s=65,p=35;return it.a.createElement(gn,{style:{paddingLeft:2,paddingRight:2},position:"absolute",bottom:!0,left:!0,display:"flex",width:"100%",alignItems:"center",height:50},it.a.createElement(ut.b,{width:"".concat(65,"%")},it.a.createElement(en,{domain:i,isEligibleForWebCloseup:a,sourceUrl:c,pinId:o,position:"relative",textColor:"white",backgroundColor:"transparentDarkGray",borderRadius:20,onClick:this.handleClickthroughLogging,hoverStyle:{backgroundColor:"#333"},maxHeight:32,paddingX:0})),it.a.createElement(ut.b,{width:"".concat(35,"%"),display:"flex",justifyContent:"end"},r&&it.a.createElement(ut.b,{padding:1},this.renderEditButton(l)),n&&it.a.createElement(ut.b,{padding:1},this.renderSendShareButton(!0,u))))}},{key:"renderSecondaryButtons",value:function e(t){var n=this.props.showCondensedInfo,r;if(t)return void 0!==n&&n?this.renderHolisticHoverOwnPinViewCondensed():this.renderHolisticHoverOwnPinView();var o=this.getViewInfo(),i=o.isOwnProfileView,a=o.isOwnBoardView,c=o.isOwnPinSearchView;return a||c||i?this.renderSecondaryButtonsOwnPinView():this.renderSecondaryButtonsFeedView()}},{key:"render",value:function e(){var r=this,t=this.props,n=t.children,o=t.isEnabledPointerHoverCursorExp,i=t.pin,a=i.carousel_data,c=i.id,u=i.videos,l=t.pinsBoardEditableByViewer,s=t.selection,p=t.showButtons,f=t.showEditPinButton,d=t.viewParameter,m=t.viewType,y=t.componentType,h=this.cropImageStyles(),b=!!u&&!!u.video_list,v,g=(u&&u.video_list[Object.keys(u.video_list)[0]]||{}).duration,w=void 0===g?0:g;return it.a.createElement(ut.b,{"data-test-id":a?"carousel-pin":"",position:"relative"},it.a.createElement(vt.b,{name:"web_desktop_carousel",isEligible:!(!p||!a)},function(e){var t;return e.anyEnabled&&it.a.createElement(Be.a,{pinId:c,componentType:y,viewParameter:d,viewtype:m})}),it.a.createElement(O.b,{deeplinkUrls:Object(mt.n)(c),onClick:this.handleOnSourceImageClick,forceRefresh:1,extraData:{isReact:!0,reactData:this.props.pin,searchOptions:this.props.searchOptions},style:{cursor:o?"pointer":"zoom-in",display:"block",position:"relative"},to:"/pin/".concat(c,"/")},it.a.createElement(ut.u,{shape:"rounded",wash:!0},it.a.createElement(ut.b,{dangerouslySetInlineStyle:{__style:h},minHeight:55},this.renderGradientOverlay(n))),it.a.createElement(ut.b,{position:"absolute",top:!0,left:!0,bottom:!0,right:!0})),s!==Fn.NO_SELECTION&&it.a.createElement("div",{
className:at()("pinSelectionBorder",{selected:s===Fn.SELECTED})}),it.a.createElement(vt.b,{name:"web_pinrep_video_icon",isEligible:!p&&b},function(e){var t=e.anyEnabled,n=e.group;return t&&it.a.createElement(gn,{padding:2,position:"absolute",bottom:!0,left:!0,display:"flex"},it.a.createElement(Lt,{duration:w,showDuration:n.startsWith("enabled_duration")||"employees"===n}))}),it.a.createElement(vt.b,{name:"sp_web_holistic_hover_own_pins",isEligible:p&&(f||l)},function(e){var t,n=e.group.startsWith("enabled");return it.a.createElement(_.Fragment,null,p&&r.renderSecondaryButtons(n),r.renderPrimaryButtons(n))}))}}]),o}(it.a.Component);fn(wn,"defaultProps",{onToggleFlyout:function e(){},pinsBoardEditableByViewer:!1,showOnPinAnalyticsNUX:!1,showPromoteButton:!1,showPersistentPromoteButton:!1});var _n=wn,On=n("i0Ug"),En=n("Hxt/"),Tn=n("KjiN");function Sn(e){return(Sn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function Pn(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(e){Mn(t,e,n[e])})}return t}function Cn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function kn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function In(e,t,n){return t&&kn(e.prototype,t),n&&kn(e,n),e}function jn(e,t){return!t||"object"!==Sn(t)&&"function"!=typeof t?Dn(e):t}function xn(e){return(xn=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function Rn(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&An(e,t)}function An(e,t){return(An=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}function Dn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Mn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",function(){return Fn});var Nn=function e(){return n.e(31).then(n.bind(null,"Np1h"))},Ln=function e(){return n.e(47).then(n.bind(null,"Djr8"))},Un=function e(){return new Promise(function(e){e()}).then(n.bind(null,"P0Ho"))},Bn=function e(){return n.e(30).then(n.bind(null,"CX3u"))},Fn={NO_SELECTION:"NO_SELECTION",SELECTED:"SELECTED",UNSELECTED:"UNSELECTED"},Hn=function(e){function o(){var e,f;Cn(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Mn(Dn(Dn(f=jn(this,(e=xn(o)).call.apply(e,[this].concat(n))))),"state",{isHovering:!1,flyoutShown:!1,flyoutSource:"send",isNewlySaved:!1,savedInfo:f.props.savedInfo}),Mn(Dn(Dn(f)),"onPinRepClick",function(e){var t=f.props,n=t.pin.id,r=t.router,o=t.viewer,i="/pin/".concat(n,"/");Object(Le.a)("Lead",function(){E.default.increment("fb_tracking_pixel",1,{event_category:"Lead",event_name:"Pin Click"})});var a=e.target;if(a&&a.nodeName&&a.parentElement){var c=new d.b(f.context.userAgent.raw,f.context.userAgent.platform);if(c.shouldDeepLink(document.referrer,f.context.userAgent,o.isAuth))return e.preventDefault(),void c.navigateToDeepLink(f.context.unauthId,Object(mt.n)(n));var u=a.parentElement,l=a.nodeName,s=u.nodeName,p=u.parentElement&&u.parentElement.nodeName;"A"!==l&&"A"!==s&&"BUTTON"!==l&&"BUTTON"!==s&&"A"!==p&&"BUTTON"!==p&&(e.metaKey||e.ctrlKey?(e.preventDefault(),window.open(i)):r?r.push(i):Object(m.a)(i))}}),Mn(Dn(Dn(f)),"getComponentType",function(){return f.props.componentType||0}),Mn(Dn(Dn(f)),"getSourceURL",function(){var e=f.props.pin,t=e.link,n;return e.tracked_link||t}),Mn(Dn(Dn(f)),"getPinTypes",function(){var e=f.props.pin,t=e.attribution,n=e.buyable_product,r=e.carousel_data,o=e.embed,i=e.is_collage_pin,a=e.is_eligible_for_web_closeup,c=e.rich_summary,u=e.videos,l=[];r&&l.push("carousel"),a&&l.push("oneTap"),Object(Tn.c)(o,t,u)&&l.push("video");var s=o||t&&t.embed||null;return s&&"gif"===s.type&&l.push("gif"),(n||c&&"product"===c.type_name)&&l.push("product"),c&&"recipe"===c.type_name&&l.push("recipe"),i&&l.push("collage"),l}),Mn(Dn(Dn(f)),"feedbackHelpers",Object(s.a)({i18n:ft.a,interpolateNamedTemplate:w.b})),Mn(Dn(Dn(f)),"handleSave",function(){var e=f.props.onSave;e&&e(),f.setState({isHovering:!0})}),Mn(Dn(Dn(f)),"handleOneTapLogging",function(){var e=f.props,t=e.contextLogData,n,r=e.pin.id,o=a.a.getInstance(),i=o.getViewFromContext();f.handleClickthroughLogging(!0),Object(P.a)(13,Pn({},t,{closeup_navigation_type:"web_closeup",objectId:r,component:0,view:3})),o.addViewToContext(i)}),Mn(Dn(Dn(f)),"_getPrefetchCompletionPercent",function(e){if(!window||!window.prefetchCompletion||!window.prefetchCompletion[e])return"0";var t=window.prefetchCompletion[e],n=t.downloadedAssets,r=t.totalAssets;return r?(n/r*100).toFixed(3).toString():"-1"}),Mn(Dn(Dn(f)),"handleClickthroughLogging",function(e){var t=f.props,n=t.contextLogData,r=t.pin,o=r.id,i=r.link,a=t.slotIndex,c=t.viewType,u=t.viewParameter;Object(P.a)(12,Pn({},n,{view:c,viewParameter:u,component:f.getComponentType(),objectId:o,grid_index:a,pin_id:o,prefetch_percentage_complete:e?f._getPrefetchCompletionPercent(i):null}))}),Mn(Dn(Dn(f)),"handleReactionReplyClick",function(e){return function(){return f.props.router.push(e)}}),Mn(Dn(Dn(f)),"handleToggleFlyout",function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n=2<arguments.length?arguments[2]:void 0,r=!(!e&&!t);f.setState({flyoutShown:e,isHovering:r,flyoutSource:n})}),Mn(Dn(Dn(f)),"handleMouseOver",function(){f.state.isHovering||f.setState(function(){return{isHovering:!0}})}),Mn(Dn(Dn(f)),"handleMouseLeave",function(){f.state.isHovering&&f.setState(function(){return{isHovering:!1}})}),f}return Rn(o,e),In(o,[{key:"getTruncatedString",value:function e(t){var n,r=this.props.pin.is_promoted?60:50;return t&&Object(Ae.a)(t.trim(),r)||""}},{key:"getPinTitle",value:function e(){var t=this.props.pin,n=t.carousel_data,r=t.title,o=t.buyable_product,i=t.rich_summary,a=i&&"mobile application"!==i.type_name;if(this.isOwnPin&&!n)return"";if(n){var c=n.carousel_slots,u=void 0===c?[]:c,l=n.index;if(u[l]&&u[l].title)return u[l].title.trim()}return this.getTruncatedString(r||a&&i.display_name||o&&o.title)}},{key:"getFeedbackType",value:function e(){var t=this.props,n=t.feedback,r=t.viewParameter,o=t.pin;return this.feedbackHelpers.getFeedbackType({board:o.board,feedback:n,viewParameter:r,pin:o,pinner:o.pinner})}},{key:"render",value:function e(){var o=this,t=this.props,n=t.boardCount,r=t.carouselIndex,i=t.contextLogData,a=t.createdAt,c=t.debugImpressionLogged,u=t.debugImpressionStarted,l=t.denseViewSelected,s=t.feedback,p=t.feedbackText,f=t.inModal,d=t.imageOnly,m=t.imageOnlyAttribution,y=t.hideAttribution,h=t.showCondensedInfo,b=t.isShareable,v=t.hideHover,g=t.lowResOnly,w=t.highResOnly,_=t.onError,O=t.onLoad,E=t.pin,T=t.pinsBoardEditableByViewer,S=t.saveOptions,P=t.savedInfo,C=t.searchOptions,k=t.selection,I=void 0===k?Fn.NO_SELECTION:k,j=t.slotIndex,x=t.truncatePinHeight,R=t.viewer,A=t.viewParameter,D=t.viewType,M=t.showCredits,N=t.showFeedback,L=t.showPersistentPromoteButton,U=t.showProductInfo,B=t.showPinReactionsReply,F=t.showPinStats,H=t.togglePinReactionsModal,Y=t.undoAction,z=E.ad_match_reason,V=E.aggregated_pin_data,W=E.board,G=E.buyable_product,K=E.carousel_data,Z=E.creator_analytics,q=E.debug_info_html,X=E.description,Q=void 0===X?"":X,J=E.domain,$=E.dominant_color,ee=E.grid_title,te=E.id,ne=E.image_signature,re=E.images,oe=E.is_quick_promotable,ie=E.is_eligible_for_web_closeup,ae=E.pinner,ce=void 0===ae?{}:ae,ue=E.promoted_is_removable,le=E.promoter,se=E.recommendation_reason,pe=E.rich_summary,fe=E.source_interest,de=this.state,me=de.flyoutShown,ye=de.flyoutSource,he=de.isHovering,be=de.isNewlySaved,ve=this.getSourceURL(),ge,we=((pt.default.instance.getPlacedExperience(12)||{}).display_data||{}).lite,_e=(this.isOwnPin||this.canDelete)&&!we,Oe=!we&&b,Ee=Pn({},i,Object(jt.b)(E,i)),Te,Se=((V||{}).aggregated_stats||{}).done,Pe,Ce=(V||{}).pin_tags_chips,ke=re&&re["236x"].height,Ie=re&&re["236x"].width,je=this.getPinTypes(),xe=Object(Tn.b)(E),Re=Object(xt.getEligiblePinTypes)(je),Ae=Re.isCarousel,De=Re.isOneTap,Me=Re.isRecipe,Ne=Re.isStoryPin,Le=Re.isVideo,Ue=Ne?"":this.getTruncatedString(ee),Be=this.getPinTitle(),Fe=this.getTruncatedString(Q),He=!d&&"string"==typeof ee&&!K,Ye=!d&&!Be&&!He,ze=!d&&Be&&!He,Ve=at()("PinRep","Module","Pin","hasAttribution","summary","fullWidth",{flyoutShown:me}),We=0<je.length,Ge=ze&&0<Be.length,Ke=Ye&&0<Fe.length,Ze=R.isAuth&&R.isEmployee&&q,qe=0!==Object.keys(Z||{}).length||0!==Object.keys(V||{}).length&&0!==Object.keys(V.creator_analytics||{}).length,Xe=S||(!_e&&void 0!==n&&1<n?{type:"inline"}:{type:"classic"}),Qe="inline"===Xe.type||"classic"===Xe.type,Je=R.isAuth&&Oe&&b&&Qe,$e=this.getFeedbackType(),et=J;if(K){var tt=r||K.index||0,nt=K.carousel_slots,rt=void 0===nt?[]:nt,ot=rt[tt]&&rt[tt].link||"";et=(et=ot&&It.a.parse(ot).hostname)&&et.replace("www.","")||J}return it.a.createElement(ut.b,{position:"relative"},it.a.createElement("div",{className:Ve,onMouseOver:this.handleMouseOver,onMouseLeave:this.handleMouseLeave,"data-test-id":"pin"},P&&it.a.createElement(vt.b,{name:"web_save_animation",activate:!1},function(e){var t;return e.anyEnabled&&it.a.createElement(wt.a,{id:"savedInfo"},it.a.createElement(dt.a,{loader:Bn},function(e){return it.a.createElement(e,{isNewlySaved:be,name:P.title,url:P.url})}))}),it.a.createElement(lt,{debugImpressionLogged:c,debugImpressionStarted:u,slotIndex:this.props.slotIndex},it.a.createElement(vt.b,{name:"web_eg_pin_hover_cursor"},function(e){var r=e.anyEnabled;return it.a.createElement("div",{className:at()("pinWrapper",N&&"disableHover"),"data-test-id":"pinWrapper",onClick:o.onPinRepClick,style:{cursor:r?"pointer":null}},ie&&it.a.createElement(_t,{pinDeeplinkUrls:Object(mt.n)(te),handleOneTapLogging:o.handleOneTapLogging,pinId:te,sourceUrl:ve}),it.a.createElement(vt.b,{name:"flyout_v2",isEligible:void 0!==n&&n<2},function(e){var n=e.anyEnabled;return it.a.createElement(vt.b,{name:"web_nux_one_tap_save",isEligible:R.isAuth&&Object(En.d)({user:R,days:7})},function(e){var t=e.anyEnabled;return it.a.createElement(_n,{buyableProduct:G,componentType:o.getComponentType(),contextLogData:Ee,denseViewSelected:l,description:Q,domain:et,dominantColor:$,doneCount:Se,inModal:f,imageHeight:ke,imageSignature:ne,images:re,imageWidth:Ie,isEligibleForWebCloseup:ie,isEnabledPointerHoverCursorExp:r,inFlyoutExperiment:n,isHovering:he,inNewUserOneTapExperiment:t,onSave:o.handleSave,onToggleFlyout:o.handleToggleFlyout,pin:E,pinsBoardEditableByViewer:T,pinTitle:Be,saveOptions:Xe,searchOptions:C,selection:I,showButtons:!!(he&&!v||me),showCondensedInfo:h,showEditPinButton:_e,showPromoteButton:oe,showRepinButton:!oe&&!ue,showSendButton:Je,showPersistentPromoteButton:L,slotIndex:j,sourceUrl:ve,truncatePinHeight:x,viewer:R,viewParameter:A,viewType:D,isFlyoutOpen:me&&"save"!==ye},it.a.createElement(vt.b,{name:"web_grid_video_autoplay",isEligible:Le&&!xe},function(e){var t=e.anyEnabled,n=e.group;return t?it.a.createElement(Ct,{canAutoplay:["employees","enabled_autoplay"].includes(n),isHovering:he,onLoad:O,pin:E,viewType:D,viewParameter:A}):it.a.createElement(vt.b,{name:"web_desktop_carousel"},function(e){var t=e.anyEnabled;return it.a.createElement(gt,{desktopCarouselEnabled:t,lowResOnly:g,highResOnly:w,onLoad:O,onError:_,pin:E,saved:!!P})})}))})}),!!Ce&&!h&&it.a.createElement(Et,{chips:Ce}),(!d||$e)&&!h&&(We||F||Ge||Ke||U||a||He||Ze||$e)&&it.a.createElement(ut.b,{display:"flex",direction:"row",marginTop:1},it.a.createElement(ut.b,{paddingX:2,flex:"grow",width:"100%"},F&&qe&&it.a.createElement(Tt.a,{stats:V.creator_analytics||Z,isVideo:Le}),a&&!xe&&it.a.createElement(ut.b,{paddingY:1},it.a.createElement(ut.K,{color:"darkGray",size:"xs"},ft.a.getHumanizedTimesince(a))),We&&it.a.createElement(vt.b,{activate:!1,isEligible:!De&&!Ae&&Le,name:"web_pinrep_video_icon"},function(e){var t;return!e.anyEnabled&&it.a.createElement(vt.b,{name:"web_desktop_carousel"},function(e){var t=e.anyEnabled;return it.a.createElement(ut.b,{minHeight:Ae&&De&&t?40:24,"data-test-id":"pin-type"},it.a.createElement(dt.a,{loader:Un},function(e){return it.a.createElement(e,{desktopCarouselEnabled:t,componentType:0,viewParameter:A,viewType:D,pinId:te,pin:E,types:je})}))})}),it.a.createElement(vt.b,{name:"web_creators_story_pin_display",activate:!0,isEligible:!!E.story_pin_data_id},function(e){var t;return e.anyEnabled&&it.a.createElement(ut.b,{paddingY:1},it.a.createElement(Pt.a,{icon:"story-pin"}))}),it.a.createElement(Ot,{buyableProduct:G,richSummary:pe,showProductInfo:U}),He&&0<Ue.length&&it.a.createElement(vt.b,{name:"web_creators_story_pin_display",activate:!0,isEligible:!!E.story_pin_data_id},function(e){var t;return!e.anyEnabled&&it.a.createElement(ut.b,{paddingY:1},it.a.createElement(ut.K,{size:"sm",bold:!0},it.a.createElement(ht.a,{text:Ue,options:{hashtags:{appendText:Ue,source:"hashtag_pinrep"}}})))}),ze&&0<Be.length&&it.a.createElement(St.a,{title:Be,pinId:te}),Ye&&0<Fe.length&&it.a.createElement(bt,{description:Fe,pinId:te}),Me&&it.a.createElement(kt,{richSummary:pe}),it.a.createElement(yt,{feedbackType:$e,hideAttribution:y,imageOnly:d,imageOnlyAttribution:m,isHovering:he,isVideo:Le,onClickThrough:o.handleClickthroughLogging,onReactionReplyClick:o.handleReactionReplyClick,pin:E,showCredits:M,showPinReactionsReply:B,sourceUrl:ve,togglePinReactionsModal:H,viewParameter:A,viewType:D}),Ze&&it.a.createElement(ut.b,{paddingY:1},it.a.createElement("pre",null,q))),it.a.createElement(ut.b,null,$e&&it.a.createElement(ut.b,{"data-test-id":"feedback-button",display:"flex",justifyContent:"end",position:"relative",dangerouslySetInlineStyle:{__style:{zIndex:ct.a.max}},width:24,height:24},it.a.createElement(dt.a,{loader:Nn},function(e){return it.a.createElement(e,{ad_match_reason:z,board:W,feedbackData:s&&s.data||{},feedbackType:$e,pinDescription:Fe,pinTitle:Be,pinId:te,pinImage:re&&re["236x"].url,pinner:ce,promoter:le,recommendationReason:se,reportPin:Object(st.a)({pin:E,viewParameter:A,viewType:D}),sourceInterest:fe,viewParameter:A,viewType:D})})))))}))),N&&it.a.createElement(dt.a,{loader:Ln},function(e){return it.a.createElement(e,{feedbackText:p,feedbackType:$e,pinId:te,undoAction:Y})}))}},{key:"canDelete",get:function e(){var t;return(this.props.pin.access||[]).includes("delete")}},{key:"isOwnPin",get:function e(){var t;return(this.props.pin.access||[]).includes("write")}}],[{key:"getDerivedStateFromProps",value:function e(t,n){return t.savedInfo&&n.savedInfo!==t.savedInfo?{isNewlySaved:!0,savedInfo:t.savedInfo}:null}}]),o}(it.a.Component);function Yn(e){var t=e.inShowAttributionExperiment,n=e.isImageOnly,r=e.viewer,o=r.isAuth&&(Object(En.d)({user:r})||Object(En.e)({user:r}))&&!r.isPartner,i=!t&&(o||n);return it.a.createElement(Hn,Object.assign({},e,{imageOnly:i,imageOnlyAttribution:o}))}Mn(Hn,"contextTypes",{unauthId:je.a.string.isRequired,userAgent:je.a.shape({platform:je.a.string.isRequired,platformVersion:je.a.arrayOf(je.a.number),raw:je.a.string.isRequired})}),Mn(Hn,"defaultProps",{isImageOnly:!1,showPersistentPromoteButton:!1,truncatePinHeight:!0,pinsBoardEditableByViewer:!1});var zn=function e(t,n){var r=n.pin,o=r.id,i=r.board,a=t.viewer,c=t.pins[o],u=a.isAuth?a.boardCount:void 0,l=i&&i.id,s=t.boards.content[l],p=s&&(s.access||[]).includes("write"),f;if(c){var d=c.carousel_data;f=d&&d.index}return{pinsBoardEditableByViewer:p,boardCount:u,carouselIndex:f,feedbackText:c&&c.feedbackText,isShareable:!s||"secret"!==s.privacy,location:t.location,savedInfo:c&&c.savedInfo,showFeedback:c&&c.showFeedback,undoAction:c&&c.undoAction}},Vn=t.b=Object(De.compose)(Ue.withRouter,On.a,Object(r.connect)(zn))(Yn)},JmUs:function(e,t,n){var r=n("gRQm");function o(e,t){var n;return!!(null==e?0:e.length)&&-1<r(e,t,0)}e.exports=o},KYHz:function(e,t,n){"use strict";var y=n("4Qfy"),h=n("9Dma"),b=n("KjiN"),r=function e(t){var n=t.pin,r=t.viewParameter,o=t.viewType,i=n.attribution,a=n.embed,c=n.id,u=n.videos,l=Object(b.b)(n),s,p;if(Object(b.c)(a,i,u)&&u){var f=u.video_list,d,m=f[Object.keys(f)[0]];p=m&&m.duration}return function(){y.a.instance.dispatch(Object(h.b)({id:c,isPromoted:l,videoDuration:p,viewParameter:r,viewType:o}))}};t.a=r},KjQs:function(e,t){function n(e){return e!=e}e.exports=n},KjiN:function(e,t,n){"use strict";n.d(t,"c",function(){return r}),n.d(t,"b",function(){return o}),n.d(t,"a",function(){return i});var r=function e(t,n,r){var o=null;return t?o=t:n&&(o=n.embed),o&&o.src&&"video"===o.type||!!r},o=function e(t){return!!t.promoter&&!t.is_downstream_promotion},i=function e(t){var n=t.embed||t.attribution&&t.attribution.embed||null;return n&&"gif"===n.type},a={isGifPin:i,isPromotedPin:o,isVideoPin:r}},Kq38:function(e,t,n){"use strict";function r(e){var t=document.createElement("iframe");for(var n in e)t.setAttribute(n,e[n]);return t}function o(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:3;if(window._sendFacebookPixel)window._sendFacebookPixel("track",e),t();else if(0<n){var r=Math.floor(3e3/n);setTimeout(function(){o(e,t,n-1)},r)}}function i(t,n){return function(e){o(t,n),window.removeEventListener("load",i)}}function a(e,t){"complete"===document.readyState?o(e,t):window.addEventListener("load",i(e,t))}function c(){var e;function t(){var e=r({src:"https://"+location.hostname+"/fb.html",id:"facebookPixel",sandbox:"allow-scripts allow-same-origin",style:"display: none;"});if(!document.body)throw new Error("missing <body>");document.body.appendChild(e),e.contentWindow.addEventListener("load",function(){return window._sendFacebookPixel=e.contentWindow.fbq})}document.getElementById("facebookPixel")||("complete"===document.readyState&&t(),window.addEventListener("load",c))}t.a=a;var u=null},LQXo:function(e,t,n){"use strict";n.d(t,"a",function(){return c}),n.d(t,"d",function(){return s}),n.d(t,"h",function(){return d}),n.d(t,"j",function(){return h}),n.d(t,"k",function(){return m}),n.d(t,"l",function(){return y}),n.d(t,"m",function(){return b}),n.d(t,"i",function(){return _}),n.d(t,"g",function(){return O}),n.d(t,"c",function(){return o}),n.d(t,"f",function(){return a}),n.d(t,"b",function(){return i}),n.d(t,"e",function(){return g});var r=170,o=236,i=24,a=2,c=125,u=16,l=25,s=14,p=16,f=25,d=function e(t){var n=16,r;t&&((t.v2ActivateExperiment("default_ssr_grid_num")||"").startsWith("enabled")&&(n=25));return n},m=function e(t){return t?r:o},y=function e(t,n,r){var o=16;return n&&(n.startsWith("enabled_25")?o=25:n.startsWith("enabled_all")&&r&&(o=r)),t?4:o},h=function e(t){return t?8:s},b=function e(t){return t?350:900},v=12,g=24,w=10,_=function e(t,n){return t?10:n?12:g},O=function e(t,n,r,o,i){var a=n+h(t),c,u=(o+1)*a-1,l;return"\n@media (min-width: ".concat(r*a,"px) and (max-width: ").concat(u,"px) {\n  ").concat(i,"\n}\n")}},OlMo:function(e,t,n){"use strict";t.a=["#e60023","#F23434","#E3780C","#364A4C","#004B91","#8046A5","#0A6955","#0FA573","#133A5E","#0084FF","#5B2677","#B469EB","#6E0F3C"]},P0Ho:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("d6ZO"),w=n.n(r),o=n("DUIN"),_=n("+51L"),O=n("W/Cr"),E=n("uOsP"),T=n("DZnV"),i=n("sOF4"),a=function e(t){return t.charAt(0).toUpperCase()+t.slice(1)};function c(e){return a(Object(i.a)(e))}var S=n("AkyD"),P=n("gEaE"),C=n("6oz1"),k=n("te8a");function u(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(e){l(t,e,n[e])})}return t}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"getEligiblePinTypes",function(){return I}),n.d(t,"PinType",function(){return p});var s=function e(){return{isCarousel:!1,isCollage:!1,isGif:!1,isOneTap:!1,isProduct:!1,isRecipe:!1,isStoryPin:!1,isVideo:!1}},I=function e(t){return t.reduce(function(e,t){var n="story-pin"===t?"StoryPin":c(t);return u({},e,l({},"is".concat(n),!0))},{isCarousel:!1,isCollage:!1,isGif:!1,isOneTap:!1,isProduct:!1,isRecipe:!1,isStoryPin:!1,isVideo:!1})},p=function e(t){var n=t.desktopCarouselEnabled,r=t.pin,o=t.pinId,i=t.types,a=r.promoter,c=r.videos,u=I(i),l=u.isStoryPin,s=u.isVideo,p=u.isOneTap,f=u.isCarousel,d=u.isCollage,m=u.isRecipe,y=u.isProduct,h=u.isGif;if(p)return f&&n?w.a.createElement(P.b,{paddingY:1},w.a.createElement(P.b,{position:"relative",marginBottom:2,marginLeft:2,dangerouslySetInlineStyle:{__style:{zIndex:S.a.max}}},w.a.createElement(_.a,{pinId:o})),w.a.createElement(T.a,{text:(a||{}).full_name,icon:"arrow-up-right"})):w.a.createElement(P.b,{paddingY:1},w.a.createElement(T.a,{text:(a||{}).full_name,icon:"arrow-up-right"}));if(f&&n)return w.a.createElement(_.a,{pinId:o});if(s){var b,v=(c&&c.video_list[Object.keys(c.video_list)[0]]||{}).duration,g=void 0===v?0:v;return w.a.createElement(P.b,{paddingY:1},w.a.createElement(T.a,{text:Object(E.a)(g),icon:"play"}))}return d?w.a.createElement(C.b,{name:"web_pin_collage"},function(e){var t;return e.anyEnabled&&w.a.createElement(P.b,{paddingY:1},w.a.createElement(T.a,{text:O.a._("Collage","Text underneath Pin in grid indicating a collage Pin"),icon:"collage"}))}):h?w.a.createElement(P.b,{paddingY:1},w.a.createElement(T.a,{icon:"gif"})):y?w.a.createElement(P.b,{paddingY:1},w.a.createElement(T.a,{text:Object(k.c)(r),icon:"tag"})):m?r.rich_summary&&r.rich_summary.aggregate_rating&&r.rich_summary.aggregate_rating.review_count?w.a.createElement(P.b,{paddingY:1},w.a.createElement(T.a,{text:r.rich_summary.aggregate_rating.review_count.toString(),icon:"star",rating:r.rich_summary&&r.rich_summary.aggregate_rating?r.rich_summary.aggregate_rating.rating_value:"",max_rating:r.rich_summary&&r.rich_summary.aggregate_rating?r.rich_summary.aggregate_rating.best_rating:""})):null:l?w.a.createElement(P.b,{paddingY:1},w.a.createElement(T.a,{icon:"story-pin"})):null},f=function e(t,n){var r=t.pins,o=n.pinId,i=n.pin;return{pin:r[o]||i}},d=t.default=Object(o.connect)(f)(p)},"PMt+":function(e,t,n){"use strict";n.d(t,"a",function(){return i}),t.g=o,t.e=a,t.d=c,t.f=s,t.b=p,t.c=f;var r=n("BAXv"),u=n("FJZF"),i={AUTO_COMPLETE_DEFAULT:"query",AUTO_COMPLETE_HASHTAG:"hashtag",AUTO_COMPLETE_RECENT_SEARCH:"recent_query",AUTO_COMPLETE_RECOMMENDED_SEARCH:"recommended_query",AUTO_COMPLETE_TRENDING:"trending",TYPO_AUTO_CORRECT_ORIGINAL:"typo_auto_original",USER_INPUT:"typed",SEARCH_GUIDE:"add_refine"};function o(e){return(e||"").trim().replace(/\s+/g," ")}function a(e){var t=e.type,n=e.term,r=void 0===n?"":n,o=e.index;switch(t){case i.USER_INPUT:case i.AUTO_COMPLETE_HASHTAG:case i.TYPO_AUTO_CORRECT_ORIGINAL:return"".concat(r,"|").concat(t);case i.AUTO_COMPLETE_DEFAULT:return"".concat(r,"|autocomplete|").concat(o);case i.AUTO_COMPLETE_RECENT_SEARCH:return"".concat(r,"|recentsearch|").concat(o);case i.AUTO_COMPLETE_TRENDING:return"".concat(r,"|trending|").concat(o);case i.AUTO_COMPLETE_RECOMMENDED_SEARCH:return"".concat(r,"|recommended|").concat(o);case i.SEARCH_GUIDE:return"".concat(r,"|guide|word|").concat(o);default:return""}}function c(e){var t=e.queryStates;return 0===t.length?"":"&"+u.a.getQueryStringFromObject({term_meta:t.map(function(e){return a(e)})})}function l(e){if(e){var t=e.trim().split(/\s+/),n;return t.find(function(e){return r.a.SEARCH_FILTER_CONJUNCTIONS.includes(e.toLowerCase())})?[e]:t}return[]}function s(e){var t=e.type,n=e.query,r=void 0===n?"":n,o=e.index;switch(t){case i.USER_INPUT:case i.AUTO_COMPLETE_HASHTAG:case i.TYPO_AUTO_CORRECT_ORIGINAL:return l(r).map(function(e){return{index:o,term:e,type:t}});case i.AUTO_COMPLETE_RECENT_SEARCH:case i.AUTO_COMPLETE_RECOMMENDED_SEARCH:case i.AUTO_COMPLETE_TRENDING:case i.AUTO_COMPLETE_DEFAULT:return l(r).map(function(e){return{term:e,type:t,index:o}});default:return[]}}function p(e){var t=e.query,n=e.rs,r=e.scope,o=e.guideAdded,i=e.filters,a=e.termMeta;if(!t)return"/";var c={q:t,rs:n,term_meta:a};return i&&(c.filters=i),o&&o.term&&(c.add_refine="".concat(o.term,"|guide|word|").concat(o.index)),r?"/search/".concat(r,"/?").concat(u.a.getQueryStringFromObject(c)):"".concat(window.location.pathname,"?").concat(u.a.getQueryStringFromObject(c))}function f(e,t,n,r){var o=u.a.getQueryStringParams();o.add_refine&&(o["term_meta[]"]?o["term_meta[]"].push(o.add_refine):o["term_meta[]"]=[o.add_refine]);var i=o["term_meta[]"];return p({query:e,rs:r,termMeta:"string"==typeof i?[i]:i,guideAdded:{term:t,index:n}})}},PdvL:function(e,t,n){"use strict";t.a=r;var i=n("jhki"),a=n("Aw5z"),c=n("63eB"),u=n("Cjb7"),l=n("85jk"),s=n("qHNY");function r(e){if(e){Object(l.c)("react_ui_deprecated_denzelNavigate.invoked",{url:e});var t=new RegExp("/pin/[\\w|-]+/$"),n=e.match(t);if(!(n&&0<=n.index&&s.c.getStatus()!==s.a.READY)){u.b.publish("site","navigateStarted",{url:e});var r=new c.a,o={url:e};r.evt={data:o},i.a.singleton().populateNavigateData(r),a.default.navigate(e,r)}}}},QbDI:function(e,t,n){"use strict";n.d(t,"a",function(){return b});var r=n("d6ZO"),p=n.n(r),f=n("4DBt"),d=n("gEaE");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}function u(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?y(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}function m(e,t){return(m=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var b=function(e){function i(){var e,t;a(this,i);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return h(y(y(t=u(this,(e=l(i)).call.apply(e,[this].concat(r))))),"state",{active:!1,focused:!1,hovered:!1}),h(y(y(t)),"handleBlur",function(){return t.setState({focused:!1})}),h(y(y(t)),"handleFocus",function(){t.setState({focused:!0})}),h(y(y(t)),"handleMouseDown",function(){t.setState({active:!0})}),h(y(y(t)),"handleMouseEnter",function(){t.setState({hovered:!0})}),h(y(y(t)),"handleMouseLeave",function(){t.setState({active:!1,hovered:!1})}),h(y(y(t)),"handleMouseUp",function(){t.setState({active:!1})}),t}return s(i,e),c(i,[{key:"render",value:function e(){var t=this.props,n=t.accessibilityLabel,r=t.bgColor,o=t.hoverBgColor,i=t.children,a=t.onClick,c=this.state,u=c.active,l=c.focused,s=c.hovered;return p.a.createElement(d.b,{position:"relative"},p.a.createElement("button",{"aria-label":n,onBlur:this.handleBlur,onClick:a,onFocus:this.handleFocus,onMouseDown:this.handleMouseDown,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,onMouseUp:this.handleMouseUp,style:{display:"block",border:"none",padding:0,cursor:"pointer",background:"transparent",outline:"none"}},p.a.createElement(f.a,{active:u,bgColor:r,focused:l,hovered:s,hoverBgColor:o,shape:"pill"},p.a.createElement(d.b,{display:"flex",alignItems:"center",justifyContent:"center",padding:1},i))))}}]),i}(r.Component)},TZaa:function(e,t,n){"use strict";n.d(t,"a",function(){return v});var r=n("d6ZO"),c=n.n(r),u=n("gEaE");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}function s(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?m(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}function d(e,t){return(d=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var h,b={__path:"M8.134 8.116a1.25 1.25 0 0 0-1.768 0L4.25 10.232 2.134 8.116A1.25 1.25 0 0 0 .366 9.884L2.483 12 .366 14.116a1.25 1.25 0 0 0 1.768 1.768l2.116-2.117 2.116 2.117a1.248 1.248 0 0 0 1.768 0 1.25 1.25 0 0 0 0-1.768L6.018 12l2.116-2.116a1.25 1.25 0 0 0 0-1.768M24 8v8a2.5 2.5 0 0 1-2.5 2.5h-8A2.5 2.5 0 0 1 11 16V8a2.5 2.5 0 0 1 2.5-2.5h8A2.5 2.5 0 0 1 24 8"},v=function(e){function i(){var e,t;a(this,i);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return y(m(m(t=s(this,(e=p(i)).call.apply(e,[this].concat(r))))),"state",{hovered:!1}),y(m(m(t)),"handleMouseEnter",function(e){return t.setState({hovered:!0})}),y(m(m(t)),"handleMouseLeave",function(e){return t.setState({hovered:!1})}),t}return f(i,e),l(i,[{key:"render",value:function e(){var t=this.props,n=t.bold,r=t.icon,o=t.image,i=t.text,a=t.description;return c.a.createElement("div",{onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave},c.a.createElement(u.b,{alignItems:"start",color:this.state.hovered?"lightGray":"transparent",display:"flex",direction:"row",overflow:"hidden",paddingX:4,paddingY:2,marginStart:-1,marginEnd:-1},r&&c.a.createElement(u.b,{flex:"none",padding:1},"unfollow"===r?c.a.createElement(u.n,{accessibilityLabel:"",color:"darkGray",dangerouslySetSvgPath:b,size:16}):c.a.createElement(u.n,{accessibilityLabel:"",color:"darkGray",icon:r,size:16})),c.a.createElement(u.b,{flex:"grow",display:"flex",direction:"column",padding:1,width:"100%"},c.a.createElement(u.K,{bold:n,size:"md"},i),c.a.createElement(u.b,{display:"flex",alignItems:"center"},o&&c.a.createElement(u.b,{marginTop:3,marginRight:3,marginBottom:1},c.a.createElement(u.u,{width:o.width,height:o.height,shape:"rounded",wash:!0},c.a.createElement(u.p,{src:o.url,naturalHeight:1,naturalWidth:1,alt:a||"",fit:"cover"}))),a&&c.a.createElement(u.b,{marginTop:1},c.a.createElement(u.K,{color:"darkGray",overflow:"normal"},a))))))}}]),i}(r.PureComponent);y(v,"defaultProps",{bold:!0})},ULUT:function(e,t,n){"use strict";var r=n("IaRT"),o=n.n(r),i=o.a.shape({access:o.a.arrayOf(o.a.string),ad_match_reason:o.a.number,aggregated_pin_data:o.a.shape({aggregated_stats:o.a.shape({done:o.a.number,likes:o.a.number,saves:o.a.number}),pin_tags:o.a.arrayOf(o.a.shape({pin_tag_key:o.a.string.isRequired,x_percent:o.a.number.isRequired,y_percent:o.a.number.isRequired}))}),attribution:o.a.shape({embed:o.a.shape({src:o.a.string})}),board:o.a.shape({followed_by_me:o.a.bool,id:o.a.string,url:o.a.string,name:o.a.string}),buyable_product:o.a.shape({display_active_max_price:o.a.string,display_active_min_price:o.a.string,short_description:o.a.string,title:o.a.string}),debug_info_html:o.a.string,description:o.a.string,domain:o.a.string,dominant_color:o.a.string,done_by_me:o.a.bool,embed:o.a.shape({src:o.a.string,type:o.a.string}),id:o.a.string,images:o.a.shape({"236x":o.a.shape({url:o.a.string,height:o.a.number}),"474x":o.a.shape({url:o.a.string,height:o.a.number})}),image_signature:o.a.string,is_quick_promotable:o.a.bool,is_eligible_for_web_closeup:o.a.bool,is_native:o.a.bool,link:o.a.string,native_creator:o.a.shape({username:o.a.string,full_name:o.a.string,id:o.a.string,image_small_url:o.a.string}),per_pin_analytics:o.a.shape({clickthrough:o.a.number,closeup:o.a.number,id:o.a.string,impression:o.a.number,repin:o.a.number,total_engagement:o.a.number,type:o.a.string}),pinner:o.a.shape({explicitly_followed_by_me:o.a.bool,full_name:o.a.string,id:o.a.string,image_small_url:o.a.string}),promoter:o.a.shape({username:o.a.string,full_name:o.a.string,image_small_url:o.a.string}),recommendationReason:o.a.shape({reason:o.a.string,board:o.a.shape({id:o.a.string,name:o.a.string,url:o.a.string}),interest:o.a.shape({id:o.a.string}),pin:o.a.shape({id:o.a.string})}),repin_count:o.a.number,rich_summary:o.a.shape({display_name:o.a.string}),source_interest:o.a.shape({name:o.a.string,url_name:o.a.string,id:o.a.string}),tracked_link:o.a.string,title:o.a.string,type:o.a.string,videos:o.a.shape({}),saved:o.a.bool})},UsZy:function(e,t,n){"use strict";var r=n("d6ZO"),o=n.n(r),i=n("RklN"),a=n.n(i),c=n("DUIN"),u=n("DGGO"),l=n("MQ2h"),s=n.n(l),O=n("woYD");function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function E(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(e){T(t,e,n[e])})}return t}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t,n){return t&&d(e.prototype,t),n&&d(e,n),e}function y(e,t){return!t||"object"!==p(t)&&"function"!=typeof t?g(e):t}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function b(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}function v(e,t){return(v=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function T(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var S={Article:{impressionType:"articleImpressions",idType:"articleIdStr",eventType:3829},Pin:{impressionType:"pinImpressions",idType:"pinIdStr",eventType:18},Board:{impressionType:"boardImpressions",idType:"boardIdStr",eventType:3700},Interest:{impressionType:"topicImpressions",idType:"topicIdStr",eventType:3703},Search:{impressionType:"searchImpressions",idType:"term",eventType:3803},HybridSearchHero:{impressionType:"hybridSearchHeroImpressions",idType:"hybridSearchHero",eventType:7308},User:{impressionType:"userImpressions",idType:"userIdStr",eventType:3704},News:{impressionType:"newsHubData",idType:"newsIdStr",eventType:4110},Guide:{impressionType:"guideImpressions",idType:"term",eventType:7573}},w=function(e){function o(){var e,_;f(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return T(g(g(_=y(this,(e=h(o)).call.apply(e,[this].concat(n))))),"trackImpression",function(){try{_.node=Object(i.findDOMNode)(g(g(_))),_.node instanceof HTMLElement&&u.b.start(_.node).onExitViewport(_.logImpression).setDebugId(_.props.loggingId||"unknown")}catch(e){window.console.error('Can only track impressions for type "HTMLElement"')}}),T(g(g(_)),"logImpression",function(e){var t,n=_.props,r=n.carousel_data,o=n.impressionType,i=n.trackCarousel,a=n.contextLogData,c=n.viewData,u=n.viewType,l=n.viewParameter,s=n.componentType,p=n.objectIdStr,f=n.loggingId,d=n.slotIndex,m=n.impressionAuxFields,y=S[o],h=y.idType,b=E((T(t={endTime:e.endTime},h,f),T(t,"slotIndex",d),T(t,"time",e.startTime),T(t,"renderDuration",e.endTime-e.startTime),t),m);if(i||Object(O.a)(y.eventType,E({viewData:c||{},view:u,viewParameter:l,component:s,objectIdStr:p,eventData:T({},y.impressionType,[b])},a)),r&&i){var v=r.carousel_slots,g=r.index,w=r.id;Object(O.a)(7352,E({viewData:c||{},view:u,viewParameter:l,component:s,objectIdStr:p,eventData:{pinCarouselSlotImpressions:[E({},b,{carouselDataId:Number(w),carouselSlotId:v[g]&&Number(v[g].id),slotIndex:g})]}},a))}}),_}return b(o,e),m(o,[{key:"componentDidMount",value:function e(){this.props.isPaused||this.trackImpression()}},{key:"componentDidUpdate",value:function e(t){t.isPaused&&!this.props.isPaused&&this.trackImpression()}},{key:"componentWillUnmount",value:function e(){this.node instanceof HTMLElement&&u.b.stop(this.node)}},{key:"render",value:function e(){return r.Children.only(this.props.children)}}]),o}(r.Component);t.a=Object(l.compose)(Object(c.connect)(function(e,t){var n=e.pins,r=t.loggingId;return{carousel_data:n[r]&&n[r].carousel_data}}))(w)},WOuy:function(e,t,n){"use strict";var r=n("d6ZO"),a=n.n(r),o=n("DUIN"),i=n("z8rO"),c=n("MDbR"),u=n.n(c),l=n("8pTe"),s=n.n(l),p=n("dZgC"),f=n("+B8E"),d=n("gEaE");function m(e,t){if(null==e)return{};var n=y(e,t),r,o;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)r=i[o],0<=t.indexOf(r)||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function y(e,t){if(null==e)return{};var n={},r=Object.keys(e),o,i;for(i=0;i<r.length;i++)o=r[i],0<=t.indexOf(o)||(n[o]=e[o]);return n}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function v(e,t,n){return t&&b(e.prototype,t),n&&b(e,n),e}function g(e,t){return!t||"object"!==S(t)&&"function"!=typeof t?E(e):t}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function _(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&O(e,t)}function O(e,t){return(O=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function T(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function S(e){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}var P=function e(n,t){return S(n)!==S(t)||(Array.isArray(t)?n.length!==t.length||t.some(function(e,t){return!Array.isArray(n)||e.type!==n[t].type||e.src!==n[t].src}):t!==n)},C=function e(t){if(Array.isArray(t)){var n=t.find(function(e){return"video/m3u8"===e.type});return n?n.src:void 0}return RegExp("m3u8$").test(t)?t:void 0},k=function(e){function i(){var e,o;h(this,i);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return T(E(E(o=g(this,(e=w(i)).call.apply(e,[this].concat(n))))),"state",{isManifestParsed:!1}),T(E(E(o)),"setVideoPlayerRef",function(e){o.videoPlayerRef=e}),T(E(E(o)),"hls",null),T(E(E(o)),"initializeHls",function(){o.destroyHls();var e=o.props,t=e.src,n=e.hlsConfig,r=new s.a(n);r.loadSource(t),null!==o.videoPlayerRef&&r.attachMedia(o.videoPlayerRef.video),r.on(s.a.Events.MANIFEST_PARSED,function(){o.setState({isManifestParsed:!0})}),o.hls=r}),T(E(E(o)),"destroyHls",function(){var e,t=E(E(o)).hls;t&&t.destroy()}),o}return _(i,e),v(i,[{key:"componentDidMount",value:function e(){this.initializeHls()}},{key:"componentDidUpdate",value:function e(t){P(t.src,this.props.src)&&this.initializeHls()}},{key:"componentWillUnmount",value:function e(){this.destroyHls()}},{key:"render",value:function e(){var t=this.props,n=t.playing,r=t.hlsConfig,o=m(t,["playing","hlsConfig"]),i=this.state.isManifestParsed;return a.a.createElement(d.P,Object.assign({ref:this.setVideoPlayerRef},o,{playing:i&&n}))}}]),i}(a.a.PureComponent);function I(t){var e=t.hlsConfig,n=t.src,r=m(t,["hlsConfig","src"]),o=C(n);return a.a.createElement(p.b,null,function(e){return o&&new f.c(e,"web_hls_video").enabled()?a.a.createElement(k,Object.assign({},t,{src:o})):a.a.createElement(d.P,Object.assign({},r,{src:n}))})}var j=n("QH8I");function x(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(e){R(t,e,n[e])})}return t}function R(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function A(e,t){if(null==e)return{};var n=D(e,t),r,o;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)r=i[o],0<=t.indexOf(r)||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function D(e,t){if(null==e)return{};var n={},r=Object.keys(e),o,i;for(i=0;i<r.length;i++)o=r[i],0<=t.indexOf(o)||(n[o]=e[o]);return n}function M(e){var t=e.eventData.videoEvent,n=t.videoDuration,r=t.startTime,o=t.endTime,i=t.videoStartTime,a=t.videoEndTime,c=t.isAudible,u=t.height,l=t.width,s=t.playbackState,p=t.quartile,f=t.quartilePercentValue,d=t.windowHeight,m=t.windowWidth,y=t.viewability,h;return x({},A(e,["eventData"]),{eventData:{videoEventData:{videoDuration:n,time:r,endTime:o,videoTime:i,endVideoTime:a,isAudible:c,height:u,width:l,playbackState:s,quartile:p,quartilePercentValue:f,windowHeight:d,windowWidth:m,viewability:y}}})}function N(e,t){if(null==e)return{};var n=L(e,t),r,o;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)r=i[o],0<=t.indexOf(r)||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function L(e,t){if(null==e)return{};var n={},r=Object.keys(e),o,i;for(i=0;i<r.length;i++)o=r[i],0<=t.indexOf(o)||(n[o]=e[o]);return n}function U(e){return(U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function B(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(e){Z(t,e,n[e])})}return t}function F(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function H(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Y(e,t,n){return t&&H(e.prototype,t),n&&H(e,n),e}function z(e,t){return!t||"object"!==U(t)&&"function"!=typeof t?K(e):t}function V(e){return(V=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function W(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&G(e,t)}function G(e,t){return(G=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}function K(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Z(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var q=[0,.25,.5,.75,.95,.97,1],X=[0,.5,.8,1],Q={threshold:X},J=Object.freeze({LOADING:0,PLAYING:1,PAUSED:2,STALLING:3});function $(){return(new Date).getTime()}function ee(e,t){for(var n=0;n<t.length;n+=1){var r=t[n],o=t[n+1];if(null==o)return r;if(r<=e&&e<o)return r}return null}function te(e){return ee(e,q)}function ne(e){return ee(e,X)}function re(e){return 0<e.volume}var oe=function(e){function n(e){var o;F(this,n),Z(K(K(o=z(this,V(n).call(this,e)))),"handleWindowResize",function(){var e=o.getDimensions(),t=o.currentInterval,n=t.height,r=t.width;e.height!==n||e.width!==r?o.startNewInterval(e):(o.currentInterval.windowHeight=e.windowHeight,o.currentInterval.windowWidth=e.windowWidth)}),Z(K(K(o)),"handleTimeChange",function(e){var t=te(e.time/o.currentInterval.videoDuration);if(o.props.playing&&null!=t&&q.includes(t)&&!o.seenQuartiles.has(t)){var n=$();o.logVideoEvent(6906,B({},o.currentInterval,{startTime:n,endTime:n,videoStartTime:0,videoEndTime:0,quartile:Math.floor(4*t),quartilePercentValue:t})),o.seenQuartiles.add(t)}o.videoTime=e.time,o.props.onTimeChange&&o.props.onTimeChange(e)}),Z(K(K(o)),"handleDurationChange",function(e){o.currentInterval.videoDuration=e.duration,o.props.onDurationChange&&o.props.onDurationChange(e)}),Z(K(K(o)),"handleReady",function(e){o.ready||(o.ready=!0,o.startNewInterval({playbackState:o.getPlaybackState(o.props)})),o.props.onReady&&o.props.onReady(e)}),Z(K(K(o)),"handleVisibilityChange",function(e,t){if(0!==e.length){var n,r=ne(e.slice(-1)[0].intersectionRatio);null!=r&&r!==o.currentInterval.viewability&&o.startNewInterval({viewability:r})}}),Z(K(K(o)),"handleContextMenu",function(e){e.preventDefault()});var t=$();return o.ready=!1,o.handleWindowResize=u()(o.handleWindowResize,1e3),o.videoWrapperRef=a.a.createRef(),o.currentInterval={videoDuration:0,startTime:t,endTime:t,videoStartTime:0,videoEndTime:0,isAudible:re(e),playbackState:o.getPlaybackState(e),quartile:-1,quartilePercentValue:0,height:null,width:null,windowHeight:null,windowWidth:null,viewability:null},o.videoTime=0,o.seenQuartiles=new Set,o}return W(n,e),Y(n,[{key:"componentDidMount",value:function e(){this.currentInterval=B({},this.currentInterval,this.getDimensions()),window.addEventListener("resize",this.handleWindowResize)}},{key:"componentDidUpdate",value:function e(t){var n={};re(t)&&!re(this.props)?n.isAudible=!1:!re(t)&&re(this.props)&&(n.isAudible=!0);var r=this.getPlaybackState(this.props);this.getPlaybackState(t)!==r&&(n.playbackState=r),0<Object.keys(n).length&&this.startNewInterval(n)}},{key:"componentWillUnmount",value:function e(){window.removeEventListener("resize",this.handleWindowResize),this.startNewInterval()}},{key:"getPlaybackState",value:function e(t){return this.ready?t.playing?J.PLAYING:J.PAUSED:J.LOADING}},{key:"getDimensions",value:function e(){var t,n;if("object"===U(this.videoWrapperRef)&&this.videoWrapperRef.current){var r=this.videoWrapperRef.current;r.clientHeight&&r.clientWidth&&(t=r.clientHeight,n=r.clientWidth)}return{height:t,width:n,windowHeight:window.innerHeight,windowWidth:window.innerWidth}}},{key:"logVideoEvent",value:function e(t,n){var r=n.height,o=n.width,i=n.windowHeight,a=n.windowWidth,c=n.viewability,u=N(n,["height","width","windowHeight","windowWidth","viewability"]);if(this.props.onLogVideoEvent&&null!=r&&null!=o&&null!=i&&null!=a&&null!=c){var l=B({},u,{height:r,width:o,windowHeight:i,windowWidth:a,viewability:c});this.props.onLogVideoEvent(t,B({},this.props.contextLogData,{eventData:{videoEvent:l}}))}}},{key:"startNewInterval",value:function e(t){var n=$();this.logVideoEvent(6904,B({},this.currentInterval,{endTime:n,videoEndTime:this.videoTime})),this.currentInterval=B({},this.currentInterval,t,{startTime:n,videoStartTime:this.videoTime,endTime:-1,videoEndTime:-1})}},{key:"render",value:function e(){var t=this.props,n=t.contextLogData,r=t.onLogVideoEvent,o=N(t,["contextLogData","onLogVideoEvent"]);return o.onDurationChange=this.handleDurationChange,o.onReady=this.handleReady,o.onTimeChange=this.handleTimeChange,a.a.createElement(j.a,{options:Q,onVisibilityChange:this.handleVisibilityChange},a.a.createElement("div",{ref:this.videoWrapperRef,onContextMenu:this.handleContextMenu},a.a.createElement(I,o)))}}]),n}(a.a.Component);Z(oe,"defaultProps",d.P.defaultProps);var ie=Object(o.connect)(void 0,function(r){return{onLogVideoEvent:function e(t,n){return r(Object(i.a)(t,M(n)))}}})(oe),ae=t.a=function(t){var e=t.contextLogData,n=N(t,["contextLogData"]);return a.a.createElement(p.b,null,function(e){return new f.c(e,"web_grid_video_logging_pwt").enabled()?a.a.createElement(I,n):a.a.createElement(ie,t)})}},Xafg:function(e,t,n){"use strict";var y=n("d6ZO"),r=n.n(y),o=n("WjSu"),i=n("hVsM"),a=n("SnoN");function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),e}function p(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?f(e):t}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function m(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}function h(e,t){return(h=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}var b=function(e){function t(){return u(this,t),p(this,d(t).apply(this,arguments))}return m(t,e),s(t,[{key:"componentDidMount",value:function e(){var t=this.props.log;if(t){var n=i.a.fromPlainObject(t);n.setEventType(13),n.setRequestIdentifier(o.a.initialPageContext.PAGE_LOAD_REQUEST_IDENTIFIER),a.a.getInstance().addEvent(n)}}},{key:"render",value:function e(){return this.props.children}}]),t}(y.Component),v=n("9FEF");function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function w(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function O(e,t,n){return t&&_(e.prototype,t),n&&_(e,n),e}function E(e,t){return!t||"object"!==g(t)&&"function"!=typeof t?T(e):t}function T(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function P(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&C(e,t)}function C(e,t){return(C=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}function k(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function I(e){var r=e.name,o=e.upwtActionName,t=e.resourceDependencies,i=void 0===t?function(){return[]}:t,n=e.routeContextLog,u=void 0===n?function(e,t,n){return null}:n,a=e.metatagResource,l=void 0===a?function(){return null}:a,c=e.placementId,s=void 0===c?null:c,p=e.redirect,f=void 0===p?function(){return null}:p,d=e.getRenderError,m=void 0===d?function(){return null}:d;return function e(c){var t,n;return n=t=function(e){function t(){return w(this,t),E(this,S(t).apply(this,arguments))}return P(t,e),O(t,[{key:"render",value:function e(){var t=this.props,n=t.params,r=t.location,o=void 0===r?{}:r,i,a=(this.props.route||{}).legacy_server_context;return y.createElement(b,{log:u(a||{},n||{},o||{})},y.createElement(c,this.props))}}]),t}(y.Component),k(t,"WrappedComponent",c),k(t,"routeName",r),k(t,"upwtActionName",o),k(t,"placementId",s),k(t,"displayName","StaticRouteData"),k(t,"getMetatagResource",l),k(t,"getContextLog",u),k(t,"getResourceDependencies",i),k(t,"getRedirect",f),k(t,"getRenderError",m),n}}t.a=I},YZkw:function(e,t,n){"use strict";var o=n("d6ZO"),r=n.n(o),a=n("DUIN"),i=n("IaRT"),c=n.n(i),s=n("JlYC"),p=n("H5ah");function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),e}function m(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?v(e):t}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}function b(e,t){return(b=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function w(n){return function(e){var t;return{experience:e.experiences.eligibleExperiences[n]}}}function _(u,l){var e=!(2<arguments.length&&void 0!==arguments[2])||arguments[2],t=!(3<arguments.length&&void 0!==arguments[3])||arguments[3],r=4<arguments.length?arguments[4]:void 0;return function(e){function n(e){var t;return f(this,n),g(v(v(t=m(this,y(n).call(this,e)))),"state",{}),g(v(v(t)),"setExtraContextState",function(e){return t.setState({extraContext:e})}),t}return h(n,e),d(n,[{key:"componentDidMount",value:function e(){this.dispatchPlacementMount(!1)}},{key:"UNSAFE_componentWillUpdate",value:function e(t,n){var r=t.dispatch,o=t.experience,i=l;if("function"==typeof l){var a=n.extraContext||{};i=l(t,a)}if(!Object(p.d)(o)&&"function"==typeof l&&i&&Object.keys(i).length){var c=l(this.props,this.state);JSON.stringify(c)!==JSON.stringify(i)&&r(Object(s.c)(u,i))}!o||this.props.experience&&o.id===this.props.experience.id||r(Object(s.i)(u,i))}},{key:"componentWillUnmount",value:function e(){var t;(0,this.props.dispatch)(Object(s.k)(u))}},{key:"dispatchPlacementMount",value:function e(t){var n=this.props.dispatch,r={};r="function"==typeof l?l(this.props,this.state):Object.assign({},l),n(Object(s.j)(u,r,t))}},{key:"render",value:function e(){var t=this.props.experience;return o.createElement(r,Object.assign({},this.props,{setPlacementExtraContext:this.setExtraContextState,experience:Object(p.d)(t)?t:null}))}}]),n}(o.Component)}var O={shouldUsePlacedExperience:!0,dispatchMountActionDuringSSR:!1};t.a=function(r){var o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},i=2<arguments.length?arguments[2]:void 0;return function(e){var t=w(r);i=Object.assign({},O,i);var n=_(r,o,i.shouldUsePlacedExperience,i.dispatchMountActionDuringSSR,e);return Object(a.connect)(t)(n)}}},Yu0i:function(e,t){},Z6T2:function(e,t,n){"use strict";function r(e,t,n){return{type:"PIN_SHOW_UNDO_AND_FEEDBACK",payload:{id:e,value:!0,text:t,undoAction:n}}}function o(e){return{type:"PIN_SHOW_FEEDBACK",payload:{id:e,value:!1}}}function i(e,t){return{type:"PIN_SHOW_FEEDBACK",payload:{id:e,value:!0,text:t}}}t.c=r,t.b=o,t.a=i},adgJ:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var d=n("d6ZO"),r=n.n(d),o=n("DUIN"),m=n("r7qI"),i=n("Xafg"),a=n("MQ2h"),c=n.n(a),y=function e(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return n.every(function(e){return!isNaN(e)})};function u(e){var t=e.showAsModal,n=e.params,r=e.location,o=e.router,i=n.id,a=r.query,c=parseInt(a.variant_id,10),u=parseInt(a.catalog_id,10),l=parseInt(a.x,10),s=parseInt(a.y,10),p=parseInt(a.w,10),f=parseInt(a.h,10);return d.createElement(m.a,{isAnimated:"1"===a.animation,replaceState:function e(){return o.replace.apply(o,arguments)},goBack:function e(){return o.goBack()},showAsModal:t,pinId:i,productImageIndex:y(c,u)?{variantId:c,catalogId:u}:void 0,initialCropArea:y(l,s,p,f)?{x:l,y:s,w:p,h:f}:void 0,inDenzelModal:!1,inPureReact:!0})}t.default=Object(a.compose)(Object(i.a)({name:"Flashlight",resourceDependencies:function e(t,n){return[{name:"PinResource",options:{id:n.id,field_set_key:"detailed",fetch_visual_search_objects:!0}}]}}),Object(o.connect)(function(e){return{showAsModal:1<e.location.history.length}}))(u)},cNcu:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r="favorited",o=void 0},dVaO:function(e,t){function n(e,t,n){for(var r=n-1,o=e.length;++r<o;)if(e[r]===t)return r;return-1}e.exports=n},djV9:function(e,t,n){"use strict";var r=n("d6ZO"),g=n.n(r),o=n("DUIN"),w=n("UsZy"),_=n("gEaE");function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t,n){return t&&c(e.prototype,t),n&&c(e,n),e}function l(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?d(e):t}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function f(e,t){return(f=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var y=.8,O=function e(t,n,r,o,i,a,c,u,l,s){var p=t.images,f=t.details,d=void 0===f?"":f,m,y,h,b;return h=u?(m=s||0,y=l||0,p&&p["564x"].url):o?(m=p&&p["564x"].width,y=p&&Math.min(p["564x"].width/.8,p["564x"].height),p&&p["564x"].url):(y=p&&p["236x"].height,m=p&&p["236x"].width,p&&p["236x"].url),b=i?"".concat(p["236x"].url," 1x"):o?"".concat(p["564x"].url," 1x"):[p["474x"]&&"".concat(p["474x"].url," 2x"),p["736x"]&&"".concat(p["736x"].url," 3x"),p.orig&&"".concat(p.orig.url," 4x")].filter(Boolean).join(", "),g.a.createElement(_.b,{key:"carousel slot ".concat(n+r),height:y,width:m},g.a.createElement(_.p,{alt:d||"carousel image ".concat(r),naturalHeight:y,naturalWidth:m,onError:a,onLoad:c,src:h,srcSet:b}))},h=function(e){function o(){var e,c;a(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return m(d(d(c=l(this,(e=s(o)).call.apply(e,[this].concat(n))))),"state",{showBadge:!0}),m(d(d(c)),"renderBadge",function(){var e=c.props,t=e.carousel_data,n=e.isCloseup,r=c.state.showBadge,o=t.carousel_slots,i=t.index,a=r?.8:0;return n?null:g.a.createElement(_.b,{display:"flex",justifyContent:"center",alignItems:"center",color:"darkGray",position:"absolute",right:!0,height:35,width:35,marginRight:5,marginTop:5,shape:"rounded",dangerouslySetInlineStyle:{__style:{zIndex:1,opacity:a,transition:"opacity .3s"}}},g.a.createElement(_.K,{color:"white",size:"md"},"".concat(i+1,"/").concat(o.length)))}),c}return p(o,e),u(o,[{key:"componentDidMount",value:function e(){var t=this;this.hideBadgeTimeout=setTimeout(function(){return t.setState({showBadge:!1})},3e3)}},{key:"componentDidUpdate",value:function e(t){var n=this,r=this.state.showBadge,o=t.carousel_data.index,i=this.props.carousel_data.index;r&&(this.hideBadgeTimeout&&clearTimeout(this.hideBadgeTimeout),this.hideBadgeTimeout=setTimeout(function(){return n.setState({showBadge:!1})},3e3)),o!==i&&(this.hideBadgeTimeout&&clearTimeout(this.hideBadgeTimeout),this.setState({showBadge:!0}))}},{key:"componentWillUnmount",value:function e(){this.hideBadgeTimeout&&clearTimeout(this.hideBadgeTimeout)}},{key:"render",value:function e(){var t=this.props,n=t.isCloseup,r=t.carouselIndex,o=t.closeupHeight,i=t.closeupWidth,a=void 0===i?0:i,c=t.carousel_data,u=t.highResOnly,l=t.lowResOnly,s=t.onError,p=t.onLoad,f=t.pinId,d=t.isEditMode,m=c.carousel_slots,y=void 0===m?[]:m,h=c.index,b=void 0!==r?r:h,v;return v=n?a:u?564:236,g.a.createElement(_.b,{height:o||"100%",width:v,overflow:"hidden"},!d&&this.renderBadge(),g.a.createElement(w.a,{trackCarousel:!0,key:"carousel-impression-key-".concat(b),impressionType:"Pin",loggingId:f,slotIndex:h,viewParameter:72,viewType:1},g.a.createElement(_.b,{position:"absolute",height:o||"100%",width:v,overflow:"hidden"})),g.a.createElement(_.b,{width:v*y.length,dangerouslySetInlineStyle:{__style:{left:b*v*-1+"px",transition:"left .3s"}},left:!0,height:"100%",display:"flex",direction:"row",position:"relative"},y.map(function(e,t){return O(e,f,t,u,l,s,p,n,a,o)})))}}]),o}(r.Component),b=function e(t,n){var r=t.pins,o=n.pinId;return{carousel_data:r[o]&&r[o].carousel_data}};t.a=Object(o.connect)(b)(h)},"e+EL":function(e,t,n){"use strict";var r=n("d6ZO"),d=n.n(r),o=n("DUIN"),i=n("OIxG"),a=n("BAXv"),m=n("yPpl"),y=n("TZaa"),c=n("rTF4"),_=n("W/Cr"),h=n("tmfO"),u=n("IaRT"),l=n.n(u),s=n("FTnl"),p=n("YZkw"),f=n("kxCB"),b=n("MQ2h"),v=n.n(b),g=n("6oz1"),O=n("cNcu"),E=n("suNN"),T=n("+B8E"),S=n("woYD"),w=n("kzic"),P=n("Z6T2"),C=n("mHth"),k=n("gEaE"),I=n("iQ6m");function j(e){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function x(e){return D(e)||A(e)||R()}function R(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function A(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function D(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length
);t<e.length;t++)n[t]=e[t];return n}}function M(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(e){V(t,e,n[e])})}return t}function N(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function L(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function U(e,t,n){return t&&L(e.prototype,t),n&&L(e,n),e}function B(e,t){return!t||"object"!==j(t)&&"function"!=typeof t?z(e):t}function F(e){return(F=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function H(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Y(e,t)}function Y(e,t){return(Y=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}function z(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function V(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var W=a.a.GEN.templateConst.settings.HELP_CENTER_URL+"articles/follow?source=hide_pin_toast_web",G=500832,K=1000125,Z=l.a.oneOf(["promoted","followed","topic","pfyBoard","pfy","search","newsHub","default"]),q=function(e){function n(e){var w;N(this,n),V(z(z(w=B(this,F(n).call(this,e)))),"getRecommendationDescription",function(){var e=w.props,t=e.ad_match_reason,n=e.board,r=e.feedbackType,o=e.pinner,i=e.promoter,a=e.recommendationReason,c=e.sourceInterest;return w.feedbackHelpers.getRecommendationDescription({ad_match_reason:t,board:n,feedbackType:r,makeNavigateLink:w.makeNavigateLink,pinner:o,promoter:i,recommendationReason:a,sourceInterest:c})}),V(z(z(w)),"getUnfollowAction",function(){var e=w.props,t=e.board,n=e.feedbackType,r=e.pinner,o=e.sourceInterest;return w.feedbackHelpers.getUnfollowAction({board:t,feedbackType:n,makeNavigateLink:w.makeNavigateLink,pinner:r,sourceInterest:o})}),V(z(z(w)),"generateUndoHideCallback",function(o,i){return function(){var e=w.props,t=e.dispatch,n=e.pinId,r=M({},o,{undo:!0});Object(I.a)(i,r),t(Object(P.b)(n))}}),V(z(z(w)),"feedbackHelpers",Object(c.a)({i18n:_.a,interpolateNamedTemplate:E.b})),V(z(z(w)),"showFollowingToast",function(){w.props.showToast(function(){return d.a.createElement(s.a,{duration:4e3,text:_.a._("Learn more about recommended Pins.","Toast caption after user hides a pin"),href:W,icon:"arrow-circle-forward",onClick:w.handleFollowingToastClick,onHide:function e(){}})})}),V(z(z(w)),"handleFollowingToastClick",function(e){var t=w.props,n=t.experience,r=t.experienceClient,o=t.router;e.preventDefault(),Object(S.a)(101,{component:20,view:1,viewParameter:0}),n&&n.experience_id===G&&r.completeExperience(K,G),o.push(W)}),V(z(z(w)),"makeNavigateLink",function(e,t,n){return d.a.createElement(h.b,{className:"underlineLink",key:e,to:t,onClick:w.props.onLinkClick},n)}),V(z(z(w)),"reportPinOption",function(){return{action:"reportPin",elementType:974,icon:"report",text:_.a._("Report","Report a pin in the dropdown"),description:_.a._("This goes against Pinterest's community guidelines","Description for the report pin option"),callback:w.props.reportPin}}),V(z(z(w)),"hidePinOption",function(e){var t=w.props,n=t.feedbackData,r=t.feedbackType,o=t.pinId,i="search"===r?973:982,a=w.feedbackHelpers.getHidePinAction({feedbackData:n,feedbackType:r,pinId:o}),c,u;return{action:a.action,actionOptions:a.actionOptions,feedbackText:w.pinHiddenFeedbackText(e),icon:"cancel",text:_.a._("Hide","message displayed in pin feedback list"),description:_.a._("See fewer Pins like this","Description for the hide pin option"),elementType:i}}),V(z(z(w)),"stopPinRecommendationOption",function(){var e=w.props,t=e.feedbackData,n=e.feedbackType,r=e.pinId,o=e.recommendationReason,i=o.reason_image&&o.reason_image["236x"]&&o.reason_image["236x"].url,a=982,c=w.feedbackHelpers.getHidePinAction({feedbackData:t,feedbackType:n,pinId:r}),u,l,s=i?{url:i,width:54,height:72}:null,p;return{action:c.action,actionOptions:c.actionOptions,feedbackText:{subTitle:_.a._("Got it! We'll stop showing recommendations based on this Pin.","message displayed after stopping recommendations from a pin"),image:s},icon:"remove",text:_.a._("Stop recommendation","message displayed in pin feedback list"),description:_.a._("Stop recommendations based on this Pin","Description for the hide pin option"),elementType:a,image:s}}),V(z(z(w)),"unfollowBoardOption",function(){var e=w.props.board,t=10614,n=w.makeNavigateLink("boardUrl",e.url,e.name);return{action:"unfollowBoard",actionOptions:{board_id:e.id},feedbackText:{title:_.a._("Unfollowed","Title shown when unfollowing a certain board"),subTitle:Object(E.b)(_.a._("You’ve unfollowed the board {{ formattedBoard }}.\n             You can follow it again by searching for it.","Confirmation text after unfollowing a board"),{formattedBoard:n})},icon:"unfollow",text:_.a._("Unfollow board","Primary caption displayed in pin feedback list to unfollow a board"),description:Object(E.b)(_.a._('Stop seeing Pins from the board "{{ boardName }}"',"Secondary caption displayed in pin feedback list to unfollow a board"),{boardName:e.name}),elementType:t}}),V(z(z(w)),"unfollowTopicOption",function(){var e=w.props.sourceInterest;if(e){var t=e.id,n=e.name,r=e.url_name,o="/topics/".concat(r),i=w.makeNavigateLink("topicUrl",o,n);return{action:"unfollowTopic",actionOptions:{interest_id:t,interest_list:O.a},feedbackText:{title:_.a._("Unfollowed","Title shown when unfollowing a certain topic"),subTitle:Object(E.b)(_.a._("You’ve unfollowed {{ formattedTopic }}. You can follow it again by searching for it.","Confirmation text after unfollowing a topic"),{formattedTopic:i})},icon:"unfollow",text:_.a._("Unfollow topic","Primary caption displayed in pin feedback list to unfollow a topic"),description:Object(E.b)(_.a._('Stop seeing Pins from the topic "{{ topicName }}"',"Secondary caption displayed in pin feedback list to unfollow a topic"),{topicName:e.name})}}return null}),V(z(z(w)),"unfollowUserOption",function(){var e=w.props.pinner,t=10640,n=e.id,r=e.username,o=e.full_name,i="/".concat(r),a=w.makeNavigateLink("pinnerUrl",i,o);return{action:"unfollowPinner",actionOptions:{user_id:n},feedbackText:{title:_.a._("Unfollowed","Title shown when unfollowing a certain user"),subTitle:Object(E.b)(_.a._("You’ve unfollowed {{ formattedUser }}. You can follow again by searching for them.","Confirmation text after unfollowing a user"),{formattedUser:a})},icon:"person",text:Object(E.b)(_.a._("Unfollow {{ fullName }}","Primary caption displayed in pin feedback list to unfollow a user"),{fullName:o}),description:_.a._("Stop seeing all their Pins","Secondary caption displayed in pin feedback list to unfollow a user"),elementType:t}}),V(z(z(w)),"downloadPinOption",function(){return{action:"downloadPin",icon:"download",text:_.a._("Download image","Button to download Pin image"),elementType:10836}}),V(z(z(w)),"_pinFeedbackText",function(){var e=w.props,t=e.location,n=e.feedbackType,r=e.requestContext,o=e.recommendationReason,i="followed"===w.props.feedbackType,a=t.pathname.includes("following"),c=(i||"topic"===n)&&!a,u=w.hidePinOption(c),l=w.reportPinOption(),s="promoted"!==n,p=o&&o.reason_image&&new T.c(r,"web_homefeed_control_contextual_pin_rec_feedback").enabled();switch(w.props.feedbackType){case"followed":var f=w.props.activateFollowingUnfollowExp,d=!1,m;if(a){var y=f?f():"";d=y.startsWith("enabled")||"employees"===y}return d||(m=w.getRecommendationDescription()),{description:m,options:x(c?[w.unfollowBoardOption()]:[]).concat(x("promoted"!==n?[w.downloadPinOption()]:[]),[u,l],x(d?[w.unfollowBoardOption(),w.unfollowUserOption()]:[]))};case"promoted":var h=w.props.ad_match_reason,b,v=[u,{icon:"question-mark",link:w.feedbackHelpers.getLearnMoreUrl(h),text:_.a._("Why am I seeing this ad?","Link to promoted pins explanation page")},l];return{description:w.getRecommendationDescription(),options:v};case"topic":var g=w.unfollowTopicOption();return{description:w.getRecommendationDescription(),options:x(c&&g?[g]:[]).concat(x(s?[w.downloadPinOption()]:[]),[u,l])};default:return{description:w.getRecommendationDescription(),options:x(s?[w.downloadPinOption()]:[]).concat([u],x(p?[w.stopPinRecommendationOption()]:[]),[l])}}}),V(z(z(w)),"pinHiddenFeedbackText",function(e){var t=e?null:w.getUnfollowAction();return t?{title:_.a._("Pin hidden","Pin feedback"),subTitle:w.getRecommendationDescription(),unfollow:t}:{title:_.a._("Pin hidden","message displayed after hiding a pin"),subTitle:_.a._("Got it! We'll try to show you more relevant Pins in the future.","message displayed after hiding a pin")}});var t=w._pinFeedbackText();return w.state={pinFeedbackConfig:t},w}return H(n,e),U(n,[{key:"onPinFeedbackActionButtonClick",value:function e(t,n,r,o){var i=this.props,a=i.experience,c=i.location;t.stopPropagation(),n.auxData?this.handleClickLogging(n.elementType,n.auxData):this.handleClickLogging(n.elementType),Object(I.a)(n.action,n.actionOptions,r);var u=a&&a.experience_id===G;if("complaint"===n.action&&!c.pathname.includes("following")&&u){var l=o?o():"";(l.startsWith("enabled")||"employees"===l)&&this.showFollowingToast()}}},{key:"onPinHide",value:function e(t,n,r,o){var i=this.props,a=i.dispatch,c=i.onHide,u=i.pinId;c(),a(n&&r&&o?Object(P.c)(u,t,this.generateUndoHideCallback(r,o)):Object(P.a)(u,t))}},{key:"getThroughId",value:function e(){var t=this.props.recommendationReason;return t.board?t.board.id:t.pin?t.pin.id:t.interest?t.interest.id:""}},{key:"getComponentType",value:function e(){var t;switch(this.props.feedbackType){case"promoted":return 60;case"followed":case"topic":return 100;case"pfyBoard":case"pfy":return 58}}},{key:"makeStrongText",value:function e(t,n){return d.a.createElement("strong",{key:t},n)}},{key:"handleClickLogging",value:function e(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=this.props,o=r.viewParameter,i=r.viewType;Object(S.a)(101,M({},n,{view:i,viewParameter:o,element:t,component:this.getComponentType()}))}},{key:"renderButtons",value:function e(){for(var a=this,t=this.props,c=t.pinImgSrc,u=t.pinTitle,l=t.pinDescription,n,s=this.state.pinFeedbackConfig.options,p=[],f=s.length,r=function e(t){var o=s[t],n=t<f-1,r=I.b.includes(o.action),i=o.callback?o.callback:function(){return a.onPinHide(o.feedbackText,r,o.actionOptions,o.action)};"downloadPin"!==o.action?p.push(d.a.createElement(k.b,{key:t},o.link?d.a.createElement(h.b,{external:!0,to:o.link},d.a.createElement(y.a,{text:o.text,icon:o.icon,description:o.description,image:o.image})):d.a.createElement(g.b,{name:"web_following_tab_for_pfy_off_users2",activate:!1},function(e){var r=e.customActivate;return d.a.createElement(k.O,{onTouch:function e(t){var n=t.event;return a.onPinFeedbackActionButtonClick(n,o,i,r)},fullWidth:!1},d.a.createElement(y.a,{text:o.text,icon:o.icon,description:o.description,image:o.image}))}),n&&d.a.createElement(k.j,null))):p.push(d.a.createElement(k.b,{key:t},d.a.createElement(m.a,{imgSrc:c,filename:u||l},function(e){return d.a.createElement(k.O,{onTouch:e,fullWidth:!1},d.a.createElement(y.a,{text:_.a._("Download image","Button to download Pin image"),icon:"download"}))}),n&&d.a.createElement(k.j,null)))},o=0;o<f;o+=1)r(o);return p}},{key:"render",value:function e(){var t,n=this.state.pinFeedbackConfig.description;return d.a.createElement(k.b,{overflow:"hidden",width:"100%"},this.renderButtons(),n&&d.a.createElement(k.b,null,d.a.createElement(k.j,null),d.a.createElement(k.b,{paddingX:4,paddingY:3},d.a.createElement(k.K,{color:"darkGray"},n))))}}]),n}(d.a.Component);t.a=Object(b.compose)(Object(o.connect)(),i.b,C.a,Object(p.a)(K),f.a,w.withRouter)(q)},gMBz:function(e,t,n){var r=n("sVTc"),o=n("DOck"),i=n("o9Bl"),a=1/0,c=r&&1/i(new r([,-0]))[1]==a?function(e){return new r(e)}:o;e.exports=c},gRQm:function(e,t,n){var r=n("14Wj"),o=n("KjQs"),i=n("dVaO");function a(e,t,n){return t==t?i(e,t,n):r(e,o,n)}e.exports=a},i0Ug:function(e,t,n){"use strict";var r=n("DUIN"),o=function e(t){var n;return{viewer:t.viewer}};t.a=Object(r.connect)(o)},iQ6m:function(e,t,n){"use strict";n.d(t,"b",function(){return g}),t.a=w;var r=n("THYI"),o=n.n(r);function i(e,t){var n;o.a.create("BoardFollowResource",e).callDelete().then(function(){return t()})}function a(e,t){var n;o.a.create("BoardFollowResource",e).callCreate().then(function(){return t()})}function c(e,t){var n;o.a.create("UserFollowResource",e).callDelete().then(function(){return t()})}function u(e,t){var n;o.a.create("UserFollowResource",e).callCreate().then(function(){return t()})}function l(e,t){var n;o.a.create("InterestFollowResource",e).callDelete().then(function(){return t()})}function s(e,t){var n;o.a.create("InterestFollowResource",e).callCreate().then(function(){return t()})}function p(e,t){var n;o.a.create("PFYPreferenceResource",e).callCreate().then(function(){return t()})}function f(e,t){var n;o.a.create("PinFeedbackResource",e).callUpdate().then(function(){return t()})}function d(e,t){var n;o.a.create("PinFeedbackResource",e).callUpdate().then(function(){return t()})}function m(e,t){t()}function y(e,t){var n;o.a.create("SearchPinFeedbackResource",e).callUpdate().then(function(){return t()})}function h(e,t){var n;o.a.create("RelatedPinFeedbackResource",e).callUpdate().then(function(){return t()})}function b(e,t){var n;o.a.create("NewsHubPinFeedbackResource",e).callUpdate().then(function(){return t()})}var v={complaint:f,enablePFY:p,followBoard:a,followPinner:u,followTopic:s,newsHubPinHide:b,promotedComplaint:d,relatedPinHide:h,reportPin:m,unfollowBoard:i,unfollowPinner:c,unfollowTopic:l,unrelatedSearchPin:y},g=["complaint","relatedPinHide","unrelatedSearchPin","promotedComplaint","newsHubPinHide"];function w(e,t,n){var r=v[e];return r?r(t,n):n()}},k5Wr:function(e,t){},kxCB:function(e,t,n){"use strict";t.a=g;var r=n("d6ZO"),o=n.n(r),i=n("IaRT"),a=n.n(i),c=n("qMdf"),u=n.n(c);function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t,n){return t&&p(e.prototype,t),n&&p(e,n),e}function d(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?b(e):t}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function y(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}function h(e,t){return(h=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function g(t){var e,n;return n=e=function(e){function i(){var e,t;s(this,i);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return v(b(b(t=d(this,(e=m(i)).call.apply(e,[this].concat(r))))),"showToast",function(n){t.context.showToast?t.context.showToast(n):u()().then(function(e){var t;e.default.showReactToast(n)})}),v(b(b(t)),"hideAllToasts",function(){t.context.hideAllToasts?t.context.hideAllToasts():u()().then(function(e){var t;e.default.removeAllToasts()})}),t}return y(i,e),f(i,[{key:"render",value:function e(){return r.createElement(t,Object.assign({},this.props,{hideAllToasts:this.hideAllToasts,showToast:this.showToast}))}}]),i}(r.Component),v(e,"displayName","WithShowToast(".concat(t.displayName||t.name,")")),v(e,"contextTypes",{showToast:a.a.func,hideAllToasts:a.a.func}),n}},lWtR:function(e,t,n){"use strict";var r=n("d6ZO"),d=n.n(r),o=n("DUIN"),m=n("biwq"),y=n("UsZy"),h=n("I86I"),i=n("ULUT"),a=n("IaRT"),c=n.n(a),u=n("MQ2h"),l=n.n(u),b=n("te8a");function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function v(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(e){S(t,e,n[e])})}return t}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(e,t,n){return t&&f(e.prototype,t),n&&f(e,n),e}function w(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?T(e):t}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function O(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&E(e,t)}function E(e,t){return(E=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}function T(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function S(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var P=function(e){function i(){var e,t;p(this,i);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return S(T(T(t=w(this,(e=_(i)).call.apply(e,[this].concat(r))))),"state",{startImpressionTimer:!1}),S(T(T(t)),"handleLoad",function(){t.setState({startImpressionTimer:!0})}),S(T(T(t)),"handleError",function(){t.setState({startImpressionTimer:!1})}),t}return O(i,e),g(i,[{key:"render",value:function e(){var t=this.props,n=t.componentType,r=t.contextLogData,o=t.impressionAuxFields,i=t.pin,a=t.slotIndex,c=t.location,u=t.viewData,l=t.viewType,s=t.viewParameter,p=Object(m.a)(i,c),f=i.videos&&i.videos.id?i.videos.id:void 0;return d.a.createElement(y.a,{componentType:n,contextLogData:v({},r,Object(b.b)(i,r)),loggingId:i.id,impressionType:"Pin",impressionAuxFields:v({},o||{},{richTypes:i.shopping_flags||[],imageURL:i.images&&i.images["236x"].url,clientTrackingParams:p||"".concat(i.tracking_params,"-0"),videoIdStr:f,isNativeVideoAndWatchable:!!f||void 0}),isPaused:!this.state.startImpressionTimer,slotIndex:a,viewData:u,viewType:l,viewParameter:s},d.a.createElement(h.b,Object.assign({},this.props,{onError:this.handleError,onLoad:this.handleLoad})))}}]),i}(r.Component);S(P,"defaultProps",{showPersistentPromoteButton:!1,showCondensedInfo:!1}),t.a=Object(u.compose)(Object(o.connect)(function(e){return{location:e.location}}))(P)},lvmc:function(e,t,n){"use strict";var r=n("d6ZO"),l=n.n(r),o=n("DUIN"),s=n("+Lqo"),p=n("gEaE"),i=function e(t){var n=t.carousel_data,r,o=t.title;if(n){var i=n.carousel_slots,a=void 0===i?[]:i,c=n.index;a[c]&&a[c].title&&(o=a[c].title)}var u=n?{height:"40px",overflow:"hidden"}:{};return l.a.createElement(p.b,{dangerouslySetInlineStyle:{__style:u},paddingY:1},l.a.createElement(p.K,{size:"sm",bold:!0},l.a.createElement(s.a,{text:o,options:{hashtags:{appendText:"".concat(o),source:"hashtag_pinrep"}}})))},a=function e(t,n){var r=t.pins,o=n.pinId;return{carousel_data:r[o]&&r[o].carousel_data}};t.a=Object(o.connect)(a)(i)},"mZ/m":function(e,t,n){"use strict";n.d(t,"b",function(){return Oe}),n.d(t,"a",function(){return u}),t.d=Se;var r=n("Awha"),ve=n.n(r),i=n("B0A7");function ge(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(e){we(t,e,n[e])})}return t}function we(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _e(e){return c(e)||a(e)||o()}function o(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function a(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function c(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}var l=["search_banner_story","search_articles_story","hashtag_pins_story"],Oe={AGGREGATED_COMMENTS:"aggregatedComments",BOARD_ACTIVITYITEMS:"boardActivityItems",BOARD_ACTIVITYCOMMENTS:"boardActivityComments",BOARD_PINS:"boardPins",BOARD_SECTIONS:"boardSections",COMMUNITY_BANNED_USERS:"communityBannedUsers",COMMUNITY_COMMENTS:"communityComments",COMMUNITY_MEMBERS:"communityMembers",COMMUNITY_POSTS:"communityPosts",HOMEFEED_MORE_IDEAS_TABS:"homefeedMoreIdeasTabs",SEARCH_PINS:"searchPins",SECTION_PINS:"sectionPins",USER_DID_IT_DATA:"userDidItData",PROFILE_BOARDS:"profileBoards"},u="communityActivityFeed",Ee={AggregatedActivityFeedResource:function e(t){var n=t.options.aggregated_pin_data_id;return{type:Oe.USER_DID_IT_DATA,id:n}},AggregatedCommentResource:function e(t){var n=t.options.objectId;return{type:Oe.AGGREGATED_COMMENTS,id:n}},AggregatedCommentReplyResource:function e(t){var n=t.options.objectId;return{type:Oe.AGGREGATED_COMMENTS,id:n,reversed:!0}},BoardActivityFeedResource:function e(t){var n=t.options.board_id;return{type:Oe.BOARD_ACTIVITYITEMS,id:n}},BoardActivityCommentFeedResource:function e(t){var n=t.options,r=n.activityId,o=n.parentType;return{type:Oe.BOARD_ACTIVITYCOMMENTS,id:r,reversed:"boardactivitycomment"===o}},BoardFeedResource:function e(t){var n=t.options.board_id;return{type:Oe.BOARD_PINS,id:n}},BoardSectionPinsResource:function e(t){var n=t.options.section_id;return{type:Oe.SECTION_PINS,id:n}},BoardSectionsResource:function e(t){var n=t.options.board_id;return{type:Oe.BOARD_SECTIONS,id:n}},BoardsResource:function e(t){var n=t.options,r=n.username,o=n.sort;return{type:Oe.PROFILE_BOARDS,id:Object(i.c)(r,o)}},BaseSearchResource:function e(t){var n=t.options,r=n.auto_correction_disabled,o=n.scope,i=n.filters,a=n.query_pin_sigs,c=n.query,u=t.data;return{type:Oe.SEARCH_PINS,id:r?"auto-correction-disabled:".concat(o,":").concat(i||"",":").concat(a||"",":").concat(c):"".concat(o,":").concat(i||"",":").concat(a||"",":").concat(c),items:u&&u.results&&u.results.filter(function(e){return!(e.story_type&&l.includes(e.story_type))})||[]}},CommunityBannedUsersFeedResource:function e(t){var n=t.options.communityId;return{type:Oe.COMMUNITY_BANNED_USERS,id:n}},CommunityMembersFeedResource:function e(t){var n=t.options.communityId;return{type:Oe.COMMUNITY_MEMBERS,id:n}},CommunityItemCommentsFeedResource:function e(t){var n=t.options,r=n.communityItemId,o=n.parentType;return{type:Oe.COMMUNITY_COMMENTS,id:r,reversed:"communitycomment"===o}},CommunityPostFeedResource:function e(t){var n=t.options.communitySlugOrId;return{type:Oe.COMMUNITY_POSTS,id:n}},CommunityPostActivityFeedResource:function e(){return{type:Oe.COMMUNITY_POSTS,id:u}},DidItCommentsResource:function e(t){var n=t.options.objectId;return{type:Oe.AGGREGATED_COMMENTS,id:n,reversed:!0}},DidItUserFeedResource:function e(t){var n=t.options.username;return{type:Oe.USER_DID_IT_DATA,id:n}},MoreIdeasTabsResource:function e(){return{type:Oe.HOMEFEED_MORE_IDEAS_TABS,id:"hf"}}},Te={aggregatedComments:{},boardActivityItems:{},boardActivityComments:{},boardPins:{},boardSections:{},communityBannedUsers:{},communityComments:{},communityMembers:{},communityPosts:{},homefeedMoreIdeasTabs:{},searchPins:{},sectionPins:{},userDidItData:{},profileBoards:{}};function Se(e,t,n){var r=_e(e),o=r.splice(t,1)[0];return r.splice(n,0,o),r}var Pe=function e(t,n){switch(t.type){case"story":return{id:t.id,type:"story",story_type:t.story_type};case"module":return{id:t.id,type:"module",name:t.name};case"user":return{id:t.id,type:"user",community_roles:t.community_roles};case"communitypost":return{id:t.id,type:"communitypost",sticky:t.sticky};case"board":return n===Oe.PROFILE_BOARDS?{id:t.id,type:"board",onProfile:!0,profileGroup:t.archived_by_me_at?"archived":t.privacy||"public"}:{id:t.id,type:"board",onProfile:!1};case"boardactivity":return{id:t.id,type:"boardactivity"};case"boardactivitycomment":return{id:t.id,type:"boardactivitycomment"};case"board_section":return{type:"board_section",id:t.id};case"communitycomment":return{type:"communitycomment",id:t.id};case"userdiditdata":return{type:"userdiditdata",id:t.id};case"aggregatedcomment":return{type:"aggregatedcomment",id:t.id};default:return{type:"pin",id:t.id}}},s=function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:Te,n=1<arguments.length?arguments[1]:void 0;switch(n.type){case"RESOURCE_FETCH_COMPLETE":case"RESOURCE_FETCH_MORE_COMPLETE":var r=n.payload;if(!r.options.redux_normalize_feed)return t;var o=Ee[r.name](r),i=o.type,a=o.id,c=o.items,u=o.reversed,l=(c||r.data||[]).map(function(e){return Pe(e,i)});u&&(l=l.reverse());var s=t[i][a];if(s||"RESOURCE_FETCH_MORE_COMPLETE"!==n.type){var p=s||[],f=l;return"RESOURCE_FETCH_MORE_COMPLETE"===n.type&&(f=u?l.concat(p):p.concat(l)),ge({},t,we({},i,ge({},t[i],we({},a,f))))}break;case"FEED_ITEM_REORDERED":var d=n.payload,m=d.feedType,y=d.feedId,h=d.itemType,b=d.targetItemId,v=d.sourceItemId,g=t[m]||{},w=g[y]||[],_=-1,O=-1;if([Oe.BOARD_PINS,Oe.SECTION_PINS,Oe.BOARD_SECTIONS,"profileBoards"].includes(m)&&(_=w.findIndex(function(e){return e.type===h&&e.id===v}),O=w.findIndex(function(e){return e.type===h&&e.id===b})),-1!==_&&-1!==O)return ge({},t,we({},m,ge({},g,we({},y,Se(w,_,O)))));break;case"FEED_ITEMS_REMOVED":var E=n.payload,T=E.feedType,S=E.feedId,P=E.inverseSelection,C=E.itemType,k=E.itemIds,I=void 0===k?[]:k,j=t[T]||{},x=j[S],R,A,D;if(x&&0<x.length&&(T===Oe.SECTION_PINS||T===Oe.BOARD_PINS)){var M=x.filter(function(e){var t=I.includes(e.id),n;return!(e.type===C&&(P&&!t||!P&&t))}),N;return ge({},t,we({},T,ge({},j,we({},S,!!M.find(function(e){return"pin"===e.type})?M:[]))))}if(x&&0<x.length&&T===Oe.BOARD_SECTIONS)return ge({},t,we({},T,ge({},j,we({},S,x.filter(function(e){var t=I.includes(e.id);return!(e.type===C&&t)})))));if(x&&0<x.length&&(T===Oe.BOARD_ACTIVITYITEMS||T===Oe.AGGREGATED_COMMENTS||T===Oe.BOARD_ACTIVITYCOMMENTS||T===Oe.COMMUNITY_POSTS||T===Oe.COMMUNITY_COMMENTS||T===Oe.USER_DID_IT_DATA))return ge({},t,we({},T,ge({},j,we({},S,x.filter(function(e){var t=I.includes(e.id);return!(e.type===C&&t)})))));if(x&&0<x.length&&(T===Oe.COMMUNITY_MEMBERS||T===Oe.COMMUNITY_BANNED_USERS))return ge({},t,we({},T,we({},S,x.filter(function(e){var t=I.includes(e.id);return!(e.type===C&&t)}))));break;case"FEED_ITEMS_ADDED":var L=n.payload,U=L.feedType,B=L.feedId,F=L.itemType,H=L.itemIds,Y=void 0===H?[]:H,z=L.prepend,V=t[U]||{},W=V[B];if(W&&(U===Oe.SECTION_PINS||U===Oe.BOARD_PINS)){var G=Y.map(function(e){return{id:e,type:F}}),K=0,Z;return"story"===(W[0]||{}).type&&(K=1),"story"===(W[1]||{}).type&&(K=2),ge({},t,we({},U,ge({},V,we({},B,_e(W.slice(0,K)).concat(_e(G),_e(W.slice(K)))))))}if(W&&U===Oe.BOARD_SECTIONS){var q=Y.reverse().map(function(e){return{id:e,type:"board_section"}}),X;return ge({},t,we({},U,ge({},V,we({},B,W?_e(q).concat(_e(W)):_e(q)))))}if(U===Oe.BOARD_ACTIVITYITEMS||U===Oe.AGGREGATED_COMMENTS||U===Oe.BOARD_ACTIVITYCOMMENTS||U===Oe.COMMUNITY_COMMENTS){var Q=Y.map(function(e){return{id:e,type:F}}),J;return ge({},t,we({},U,ge({},V,we({},B,W?_e(z?Q:W).concat(_e(z?W:Q)):Q))))}if(U===Oe.COMMUNITY_POSTS){var $=Y.map(function(e){return{id:e,type:"communitypost",sticky:!1}}),ee=W||[],te=ee.filter(function(e){return"communitypost"===e.type&&!0===e.sticky}),ne=ee.filter(function(e){return"communitypost"===e.type&&!1===e.sticky}),re;return ge({},t,we({},U,ge({},V,we({},B,_e(te).concat(_e($),_e(ne))))))}if(U===Oe.USER_DID_IT_DATA){var oe=Y.map(function(e){return{id:e,type:F}}),ie;return ge({},t,we({},U,we({},B,W?_e(oe).concat(_e(W)):oe)))}if(U!==Oe.COMMUNITY_MEMBERS&&U!==Oe.COMMUNITY_BANNED_USERS)break;var ae=Y.map(function(e){return{id:e,type:F}}),ce;return ge({},t,we({},U,we({},B,W?_e(W).concat(_e(ae)):ae)));case"FEED_INVALIDATE":var ue=n.payload,le=ue.feedType,se=ue.feedId,pe=t[le]||{};if(pe[se])return ge({},t,we({},le,ge({},pe,we({},se,null))));break;case"FEED_ITEM_UPDATED":var fe=n.payload,de=fe.feedType,me=fe.feedId,ye=fe.updatedItem,he=t[de]||{},be=he[me];if(be&&(de===Oe.COMMUNITY_MEMBERS||Oe.COMMUNITY_POSTS))return ge({},t,we({},de,ge({},he,we({},me,be.map(function(e){return e.id===ye.id?ve()(e,ye):e})))))}return t};t.c=s},mnfW:function(e,t,n){"use strict";n.d(t,"a",function(){return r}),t.c=o;var g=n("W/Cr"),a=function e(t){return g.a.getPluralFunction(t)},u=function e(t,n,r,o){var i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:"symbol",a={maximumFractionDigits:t,minimumFractionDigits:n};return r&&"currency"===(a.style=r)&&(a.currency=o,a.currencyDisplay=i),a},w=function e(t,n){var r=n||0,o=Math.pow(10,r),i=+(r?t*o:t).toFixed(8),a=Math.floor(i),c=i-a,u=1e-8,l=.5-u<c&&c<.5+u?a%2==0?a:a+1:Math.round(i);return r?l/o:l},r={USD:"$",GBP:"£",CAD:"$",EUR:"€",AUD:"A$",NZD:"NZ$",SEK:"kr"};function _(e,t,n,r,o,i,a){var c=u(n,r,o,i,a);return t.toLocaleString([e],c)}function o(e,t,n){var r,o,i=n&&n.style||void 0,a=n&&n.shortform||!1,c=n&&n.uplimit||void 0,u=n&&n.currency||void 0;if(c&&c<t)return"".concat(c,"+");if(o="currency"===i?(r=void 0===n||void 0===n.maximum_fraction_digits?2:n.maximum_fraction_digits,void 0===n||void 0===n.minimum_fraction_digits?2:n.minimum_fraction_digits):(r=void 0===n||void 0===n.maximum_fraction_digits?0:n.maximum_fraction_digits,void 0===n||void 0===n.minimum_fraction_digits?0:n.minimum_fraction_digits),a&&999<t&&(r=void 0===n||void 0===n.shortform_maximum_fraction_digits?2:n.shortform_maximum_fraction_digits,o=0),r<o)return String(t);var l=t,s="",p=[{"100M":{value:1e8,localeKey:g.a._("億","Abbreviation for one hundred millions. This abbreviation is only used in Chinese, Japanese and Korean.")}},{"10k":{value:1e4,localeKey:g.a._("万","Abbreviation for ten thousand. This abbreviation is only used in Chinese, Japanese and Korean.")}}],f=[{b:{value:1e9,localeKey:g.a._("b","Abbreviation for one billion.")}},{m:{value:1e6,localeKey:g.a._("m","Abbreviation for one million.")}},{k:{value:1e3,localeKey:g.a._("k","Abbreviation for one thousand.")}}],d=/^zh|ja|ko/.test(e),m;if(a&&999<t)for(var y=d?p:f,h=0;h<y.length;h+=1){var b=Object.keys(y[h])[0],v=y[h][b].value;if(v<=t){l=w(t/v*Math.pow(10,r))/Math.pow(10,r),s=y[h][b].localeKey;break}}return _(e,l,r,o,i,u||void 0)+s}function i(e,t,n,r){var o=+a(e)(r),i;return i="en-US"===e&&1===o?n:t,g.a._(i,"",o)}var c={LONG:"long",YEAR:"year",WEEKDAY_DATE:"weekday_date",SHORT_WEEKDAY_DATE:"short_weekday_date",LONG_MONTH_YEAR:"long_month_year",NUMERIC:"numeric",MONTH_DAY:"month_day",SHORT_MONTH_DAY:"short_month_day"},l,s={DateFormatType:c,formatDate:function e(t,n,r){var o=!(3<arguments.length&&void 0!==arguments[3])||arguments[3],i,a;if(r===c.YEAR)return(n.getYear()+1900).toString();switch(r){case c.LONG:i={year:"numeric",month:"long",day:"numeric"};break;case c.NUMERIC:i={year:"numeric",month:"numeric",day:"numeric"};break;case c.WEEKDAY_DATE:i={weekday:"long",month:"long",day:"numeric",year:"numeric"};break;case c.SHORT_WEEKDAY_DATE:i={weekday:"short",month:"numeric",day:"numeric"};break;case c.MONTH_DAY:i={month:"long",day:"numeric"};break;case c.SHORT_MONTH_DAY:i={month:"short",day:"numeric"};break;case c.LONG_MONTH_YEAR:i={month:"long",year:"numeric"};break;default:throw new Error('invalid dateFormatType "'+r+'"')}return o&&(i.timeZone="UTC"),IntlPolyfill.__disableRegExpRestore(),new IntlPolyfill.DateTimeFormat(t,i).format(n)},ngettext:i,prettyNumberFormat:o,numberFormat:_,currencySymbols:r};t.b=s},nX0T:function(e,t,n){"use strict";var r=n("d6ZO"),o=n.n(r),i=n("s149"),a=n("gEJd"),c=function e(t){return r.createElement(a.a,Object.assign({},t,{timeSpentManager:i.a}))};t.a=c},ncdy:function(e,t,n){var d=n("vRa5"),m=n("JmUs"),y=n("6Hh8"),h=n("u923"),b=n("gMBz"),v=n("o9Bl"),r=200;function o(e,t,n){var r=-1,o=m,i=e.length,a=!0,c=[],u=c;if(n)a=!1,o=y;else if(200<=i){var l=t?null:b(e);if(l)return v(l);a=!1,o=h,u=new d}else u=t?[]:c;e:for(;++r<i;){var s=e[r],p=t?t(s):s;if(s=n||0!==s?s:0,a&&p==p){for(var f=u.length;f--;)if(u[f]===p)continue e;t&&u.push(p),c.push(s)}else o(u,p,n)||(u!==c&&u.push(p),c.push(s))}return c}e.exports=o},"pN+K":function(e,t,n){"use strict";t.a=I,t.c=M;var s=n("d6ZO"),r=n.n(s),o=n("DUIN"),i=n("lJK6"),y=n("FfPm"),a=n("IaRT"),c=n.n(a),u=n("S+Qs");function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function p(e,t){if(null==e)return{};var n=f(e,t),r,o;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)r=i[o],0<=t.indexOf(r)||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function f(e,t){if(null==e)return{};var n={},r=Object.keys(e),o,i;for(i=0;i<r.length;i++)o=r[i],0<=t.indexOf(o)||(n[o]=e[o]);return n}function d(e){return b(e)||h(e)||m()}function m(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function h(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function b(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}function v(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(e){C(t,e,n[e])})}return t}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _(e,t,n){return t&&w(e.prototype,t),n&&w(e,n),e}function O(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?P(e):t}function E(e){return(E=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function T(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&S(e,t)}function S(e,t){return(S=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}function P(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function C(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var k=function e(t,n){return JSON.stringify(t)===JSON.stringify(n)};function I(e,t){return Object(i.a)("function"==typeof e?e(t):e||{})}var j=function e(t){var m={};return function(c){return function(e,l){var t=e.resources,r=t.fetching,s=t.data,n=c.some(function(e){var t=e.name,n=e.options;return r[t]&&r[t][I(n,l)]}),p={},f,d=[];c.forEach(function(e){var t=e.name,n=e.options,r=e.key;if(s[t]){var o=I(n,l);if(m[t]||(o in s[t]?y.default.increment("webapp.withResource.cache-hit",.05,{resource:t,cache_size:Object.keys(s[t]).length,level:"success",v:1}):Object.keys(s[t]).length?y.default.increment("webapp.withResource.populated-cache-miss",.05,{resource:t,cache_size:Object.keys(s[t]).length,level:"error",v:1}):y.default.increment("webapp.withResource.empty-cache-miss",.05,{resource:t,cache_size:Object.keys(s[t]).length,level:"warn",v:1})),m[t]=!0,s[t][o]){var i=s[t][o],a=i.data,c=i.nextBookmark,u=i.error;p[r]=a,d.push(c),u&&(f=u)}}else y.default.increment("webapp.withResource.no-cache",.05,{resource:t,cache_size:0,level:"error",v:1})});var o=c.every(function(e){var t=e.key;return void 0!==p[t]}),i,a;return{resourceLoaded:o,isAtEnd:o&&!n&&d.every(function(e){return"-end-"===e}),isFetching:n,nextBookmark:d[0],resourceData:p,error:f}}}},x=function e(a){var c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return function(l){var e,t;return t=e=function(e){function i(){var e,t;g(this,i);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return C(P(P(t=O(this,(e=E(i)).call.apply(e,[this].concat(r))))),"loadData",function(o){var i=c;a.forEach(function(e){var t=e.options,n=e.name,r="function"==typeof t?t(o):t;o.dispatch(Object(u.a)(n,r,void 0,void 0,i.traceLoggerHandlerName))})}),C(P(P(t)),"loadMoreData",function(o){var i=c;a.forEach(function(e){var t=e.options,n=e.name,r="function"==typeof t?t(o):t;o.dispatch(Object(u.d)(n,r,void 0,void 0,i.traceLoggerHandlerName))})}),C(P(P(t)),"resourcesHash",JSON.stringify(a.map(function(e){return v({},e,{options:I(e.options,t.props)})}))),t}return T(i,e),_(i,[{key:"componentDidMount",value:function e(){!1!==c.allowStale&&this.props.resourceLoaded||this.loadData(this.props)}},{key:"shouldComponentUpdate",value:function e(t){var n=d(Object.keys(this.props)).concat(d(Object.keys(t))),r=!0,o=!1,i=void 0;try{for(var a=n[Symbol.iterator](),c;!(r=(c=a.next()).done);r=!0){var u=c.value;if("resourceData"===u){if(!k(this.props.resourceData,t.resourceData))return!0}else if(this.props[u]!==t[u])return!0}}catch(e){o=!0,i=e}finally{try{r||null==a.return||a.return()}finally{if(o)throw i}}return!1}},{key:"UNSAFE_componentWillUpdate",value:function e(t){!this.props.resourceLoaded&&t.resourceLoaded&&this.props.onResourceLoaded&&this.props.onResourceLoaded(),!this.props.error&&t.error&&this.props.onResourceError&&this.props.onResourceError(t.error);var n=JSON.stringify(a.map(function(e){return v({},e,{options:I(e.options,t)})}));this.resourcesHash!==n&&(this.loadData(t),this.resourcesHash=n)}},{key:"render",value:function e(){var t=this,n=this.props,r=n.error,o=n.isAtEnd,i=n.isFetching,a=n.resourceData,c=n.resourceLoaded,u=p(n,["error","isAtEnd","isFetching","resourceData","resourceLoaded"]);return delete u.onResourceError,delete u.onResourceLoaded,s.createElement(l,Object.assign({},a,u,{error:r,fetchMoreData:function e(){return t.loadMoreData(t.props)},isAtEnd:o,isFetching:i,refreshData:function e(){return t.loadData(t.props)},resourceLoaded:c}))}}]),i}(s.Component),C(e,"WrappedComponent",l),C(e,"displayName",1===a.length?a[0].name:"".concat(a.length," resources")),t}},R=function e(n){var r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return function(e){var t={name:n.name,options:n.options||{},key:n.key||"data"};return Object(o.connect)(j(e)([t]))(x([t],r)(e))}},A=R;t.b=R;var D=function e(t){var i=t.name,a=t.options;return function(e,t){var n=e.resources.data;if(n[i]){var r=I(a,t),o;if(n[i][r])return{data:n[i][r].data}}return{data:null}}};function M(e){var t=e.name,n=e.options;return Object(o.connect)(D({name:t,options:n||{}}))}},qMdf:function(e,t,n){e.exports=function(){return new Promise(function(t){n.e(22).then(function(e){t(n("6VYw"))}.bind(null,n)).catch(n.oe)})}},r2pX:function(e,t,n){"use strict";var r=n("d6ZO"),o=n.n(r),a=n("gEaE");function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t,n){return t&&u(e.prototype,t),n&&u(e,n),e}function s(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?m(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}function d(e,t){return(d=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var h=function(e){function i(){var e,t;c(this,i);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return y(m(m(t=s(this,(e=p(i)).call.apply(e,[this].concat(r))))),"state",{LoadedComponent:null}),t}return f(i,e),l(i,[{key:"componentDidMount",value:function e(){var t=this;this._isMounted=!0,this.props.loader().then(function(e){t._isMounted&&e.default!==t.state.LoadedComponent&&t.setState({LoadedComponent:e.default})})}},{key:"UNSAFE_componentWillReceiveProps",value:function e(t){var n=this;t.loader!==this.props.loader&&(t.loader().then(function(e){n._isMounted&&e.default!==n.state.LoadedComponent&&n.setState({LoadedComponent:e.default})}),this.setState({LoadedComponent:null}))}},{key:"componentWillUnmount",value:function e(){this._isMounted=!1}},{key:"render",value:function e(){var t=this.props.children,n=this.state.LoadedComponent;return n?t(n):this.props.showSpinner?r.createElement(a.b,{display:"flex",alignItems:"center",justifyContent:"center"},r.createElement(a.G,{accessibilityLabel:this.props.spinnerLabel,show:!0})):null}}]),i}(r.Component);t.a=h},r7qI:function(e,t,n){"use strict";var h=n("d6ZO"),g=n.n(h),w=n("QbDI"),_=n("9oPq"),f=n("SnoN"),r=n("GGB8"),b=n.n(r),o=n("IaRT"),i=n.n(o),l=n("OlMo"),a=n("pN+K"),c=n("MQ2h"),u=n.n(c),s=n("y2lE");function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function d(e){return v(e)||y(e)||m()}function m(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function y(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function v(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}function O(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function T(e,t,n){return t&&E(e.prototype,t),n&&E(e,n),e}function S(e,t){return!t||"object"!==p(t)&&"function"!=typeof t?P(e):t}function P(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function C(e){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function k(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&I(e,t)}function I(e,t){return(I=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}var j=function(e){function r(e){var t;O(this,r),t=S(this,C(r).call(this,e));var n=e.searchResultMetaData&&e.searchResultMetaData.search_identifier;return n&&e.onSearchIdUpdate(n),t}return k(r,e),T(r,[{key:"UNSAFE_componentWillReceiveProps",value:function e(t){var n=t.searchResultMetaData,r=this.props.searchResultMetaData,o=r&&r.search_identifier,i=n&&n.search_identifier;o!==i&&this.props.onSearchIdUpdate(i)}},{key:"render",value:function e(){var t=this.props,o=t.contextLog,i=t.onAdd,a=t.onRemove,n=t.searchResultMetaData,c=0,u=n&&n.search_identifier,r=n?d(n.query_filters.map(function(e){return{label:e,selected:!0}})).concat(d(n.annotations.map(function(e){return{label:e,selected:!1}}))):[];return g.a.createElement("div",{className:"flashlightAnnotationList"},r.map(function(e){var n=e.selected,r=e.label,t={};return n||(t.backgroundColor=l.a[c%l.a.length],c+=1),g.a.createElement("div",{key:r,className:"flashlightAnnotationListItem"},g.a.createElement("button",{className:b()({selected:n}),onClick:function e(t){o(101,{viewData:{search_identifier:u},component:4,element:1032,annotation_type:n?"remove":"add",search_identifier:u,label:r}),t.stopPropagation(),(n?a:i)(r)},type:"button",style:t},g.a.createElement("span",null,r)))}))}}]),r}(h.Component),x=Object(c.compose)(s.a,Object(a.b)({name:"VisualLiveSearchResource",options:function e(t){var n;return t.resourceOptions},key:"searchResultMetaData"}))(j);function R(e){return(R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function A(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(e){Y(t,e,n[e])})}return t}function D(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function M(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function N(e,t,n){return t&&M(e.prototype,t),n&&M(e,n),e}function L(e,t){return!t||"object"!==R(t)&&"function"!=typeof t?H(e):t}function U(e){return(U=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function B(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&F(e,t)}function F(e,t){return(F=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}function H(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var z=function(e){function o(){var e,O;D(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Y(H(H(O=L(this,(e=U(o)).call.apply(e,[this].concat(n))))),"state",{cropArea:O.props.initialCropArea||{h:0,w:0,x:0,y:0},cropChangeType:null,showShadowOverlay:!0}),Y(H(H(O)),"cropResizeDirection",null),Y(H(H(O)),"_checkCropHandleValid",function(e,t){var n=O.state.cropArea,r=n.h,o=n.w,i=n.x,a=n.y;switch(O.cropResizeDirection){case"ne":e<i&&a+r<t?O.cropResizeDirection="sw":e<i?O.cropResizeDirection="nw":a+r<t&&(O.cropResizeDirection="se");break;case"nw":i+o<e&&a+r<t?O.cropResizeDirection="se":i+o<e?O.cropResizeDirection="ne":a+r<t&&(O.cropResizeDirection="sw");break;case"se":e<i&&t<a?O.cropResizeDirection="nw":e<i?O.cropResizeDirection="sw":t<a&&(O.cropResizeDirection="ne");break;case"sw":i+o<e&&t<a?O.cropResizeDirection="ne":i+o<e?O.cropResizeDirection="se":t<a&&(O.cropResizeDirection="nw")}}),Y(H(H(O)),"handleOnTouchStart",function(e){if(e.preventDefault(),e.stopPropagation(),e.target){var t=e.touches[0],n=t.clientX,r=t.clientY;O.handleOnPointerDown(e,n,r)}}),Y(H(H(O)),"handleOnMouseDown",function(e){if(e.preventDefault(),e.stopPropagation(),e.target){var t=e.clientX,n=e.clientY;O.handleOnPointerDown(e,t,n)}}),Y(H(H(O)),"handleOnPointerDown",function(e,t,n){var r=e.target,o=O.state.showShadowOverlay,i=O._cropperOverlay.getBoundingClientRect();O._cropperOverlayCoor={x:i.left,y:i.top};var a=t-O._cropperOverlayCoor.x,c=n-O._cropperOverlayCoor.y;if(r.className.includes("cropperHandle")){O.setState({cropChangeType:"resize"});var u=r.className;u.includes("ne")&&(O.cropResizeDirection="ne"),u.includes("nw")&&(O.cropResizeDirection="nw"),u.includes("se")&&(O.cropResizeDirection="se"),u.includes("sw")&&(O.cropResizeDirection="sw")}else r.className.includes("cropSection")?(O.setState({cropChangeType:"move"}),O.cropChangeStartCoor={x:a,y:c}):!r.className.includes("shadowMask")&&o||(O.cropChangeStartCoor={x:a,y:c},O.setState({cropArea:{h:0,w:0,x:a,y:c},cropChangeType:"select",showShadowOverlay:!0}))}),Y(H(H(O)),"handleOnTouchMove",function(e){return O._cropperOverlayCoor&&O.handleOnPointerMove(e.touches[0].clientX,e.touches[0].clientY)}),Y(H(H(O)),"handleOnMouseMove",function(e){return O._cropperOverlayCoor&&O.handleOnPointerMove(e.clientX,e.clientY)}),Y(H(H(O)),"handleOnPointerMove",function(e,t){var n=O.state,r=n.cropArea,o=r.h,i=r.w,a=r.x,c=r.y,u=n.cropChangeType,l=O.props.imageSize,s=e-O._cropperOverlayCoor.x,p=t-O._cropperOverlayCoor.y;if("resize"===u){var f=Math.max(Math.min(s,l.w),0),d=Math.max(Math.min(p,l.h),0);switch(O._checkCropHandleValid(f,d),O.cropResizeDirection){case"ne":O.setState({cropArea:{h:o+(c-d),w:Math.abs(f-a),x:a,y:d}});break;case"nw":O.setState({cropArea:{h:o+(c-d),w:i+(a-f),x:f,y:d}});break;case"se":O.setState({cropArea:{h:Math.abs(d-c),w:Math.abs(f-a),x:a,y:c}});break;case"sw":O.setState({cropArea:{h:Math.abs(d-c),w:i+(a-f),x:f,y:c}})}}else if("move"===u){var m=s-O.cropChangeStartCoor.x,y=p-O.cropChangeStartCoor.y,h=Math.max(Math.min(a+m,l.w-i),0),b=Math.max(Math.min(c+y,l.h-o),0);O.cropChangeStartCoor={x:s,y:p},O.setState({cropArea:{h:o,w:i,x:h,y:b}})}else if("select"===u){var v=Math.max(Math.min(s,l.w),0),g=Math.max(Math.min(p,l.h),0),w=v-O.cropChangeStartCoor.x,_=g-O.cropChangeStartCoor.y;O.setState({cropArea:{h:Math.abs(_),w:Math.abs(w),x:Math.min(O.cropChangeStartCoor.x,v),y:Math.min(O.cropChangeStartCoor.y,g)}})}}),Y(H(H(O)),"handleOnMouseUp",function(e){return O.handleOnPointerUp()}),Y(H(H(O)),"handleOnTouchEnd",function(e){return O.handleOnPointerUp()}),Y(H(H(O)),"handleOnPointerUp",function(){var e=O.state.cropChangeType;"resize"!==e&&"move"!==e&&"select"!==e||O.handleCrop(),O.cropResizeDirection=null}),O}return B(o,e),N(o,[{key:"componentDidMount",value:function e(){this._cropperOverlay&&document.body&&(window.addEventListener("mouseup",this.handleOnMouseUp),document.body.addEventListener("mousemove",this.handleOnMouseMove),this._cropperOverlay.addEventListener("mousedown",this.handleOnMouseDown))}},{key:"UNSAFE_componentWillReceiveProps",value:function e(t){t.initialCropArea&&(this.props.initialCropArea&&t.initialCropArea.h===this.props.initialCropArea.h&&t.initialCropArea.w===this.props.initialCropArea.w&&t.initialCropArea.x===this.props.initialCropArea.x&&t.initialCropArea.y===this.props.initialCropArea.y||this.setState({cropArea:t.initialCropArea}))}},{key:"componentWillUnmount",value:function e(){this._cropperOverlay&&document.body&&(window.removeEventListener("mouseup",this.handleOnMouseUp),document.body.removeEventListener("mousemove",this.handleOnMouseMove),this._cropperOverlay.removeEventListener("mousedown",this.handleOnMouseDown))}},{key:"handleCrop",value:function e(){var t=this.props,n=t.imageSize,r=t.onChange,o=this.state.cropArea;0===o.w&&0===o.h?(this.setState({showShadowOverlay:!1,cropChangeType:null}),r({crop:{h:1,w:1,x:0,y:0},origCrop:{h:n.h,w:n.w,x:0,y:0}})):(this.setState({showShadowOverlay:!0,cropChangeType:null}),r({crop:{h:o.h/n.h,w:o.w/n.w,x:o.x/n.w,y:o.y/n.h},origCrop:A({},o)}))}},{key:"render",value:function e(){var n=this,t=this.props,r=t.imageSize,o=r.h,i=r.w,a=t.children,c=this.state,u=c.cropArea,l=u.h,s=u.w,p=u.x,f=u.y,d=c.cropChangeType,m=c.showShadowOverlay,y=b()("shadowOverlay","absolute",{shadowOverlayHide:!m});return h.createElement("div",{onTouchMove:this.handleOnTouchMove,onTouchEnd:this.handleOnTouchEnd},h.createElement("div",{className:"cropperWrapper block"},h.createElement("div",{className:"relative",ref:function e(t){n._cropperOverlay=t},onTouchStart:this.handleOnTouchStart},h.createElement("div",{className:"cropSection absolute",style:{height:l,left:p,top:f,width:s}},"select"!==d&&m&&h.createElement("div",null,h.createElement("div",{className:"cropperHandle absolute ord-nw"}),h.createElement("div",{className:"cropperHandle absolute ord-ne"}),h.createElement("div",{className:"cropperHandle absolute ord-sw"}),h.createElement("div",{className:"cropperHandle absolute ord-se"}))),h.createElement("div",{className:y},h.createElement("div",{className:"shadowMask absolute",style:{height:f,left:0,top:0,width:"100%"}}),h.createElement("div",{className:"shadowMask absolute",style:{height:l,left:0,top:f,width:p}}),h.createElement("div",{className:"shadowMask absolute",style:{height:o-f-l,left:0,top:f+l,width:"100%"}}),h.createElement("div",{className:"shadowMask absolute",style:{height:l,left:p+s,top:f,width:i-p-s}})),h.createElement("div",{className:"absolute cropperAdditional"},a))))}}]),o}(h.Component),V=n("gEaE");function W(e){return(W="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function G(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function K(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Z(e,t,n){return t&&K(e.prototype,t),n&&K(e,n),e}function q(e,t){return!t||"object"!==W(t)&&"function"!=typeof t?$(e):t}function X(e){return(X=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function Q(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&J(e,t)}function J(e,t){return(J=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}function $(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ee(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var te=4,ne=15,re=function e(n,r){var t;return Object.keys(n).reduce(function(e,t){return e+Math.abs(n[t]-r[t])},0)<=4},oe=function e(t){var n=t.cropArea,r=t.imageSize,o=n.h,i=n.w,a=n.x,c=n.y;return{h:Math.floor(o*r.h),w:Math.floor(i*r.w),x:Math.floor(a*r.w),y:Math.floor(c*r.h)}},ie=function(e){function c(e){var a;G(this,c),ee($($(a=q(this,X(c).call(this,e)))),"handleChange",function(e){var t;(0,a.props.onChange)(e)}),ee($($(a)),"handleSpotlightClick",function(e){var t=a.props,n=t.imageSize,r=t.onChange,o=t.spotlightAreas,i=oe({cropArea:o[e],imageSize:n});r({crop:o[e],origCrop:i})}),ee($($(a)),"renderSpotlightDot",function(e,n){var t=a.state.currentSpotlightIdx;if(n===t)return null;var r=a.props.imageSize,o=oe({cropArea:e,imageSize:r}),i={x:o.x+o.w/2,y:o.y+o.h/2};return g.a.createElement("button",{className:"absolute no-border p0 spotlightButton",key:n,onClick:function e(t){t&&(t.stopPropagation(),t.preventDefault()),a.handleSpotlightClick(n)},style:{left:i.x,top:i.y}},g.a.createElement(V.u,{height:15,shape:"circle",width:15},g.a.createElement("div",{className:"spotlightDot bg-white",style:{height:15,width:15}})))});var t=a.props,n=t.imageSize,r=t.initialCropArea,o,i=t.spotlightAreas.findIndex(function(e){return re(r,oe({cropArea:e,imageSize:n}))});return a.state={currentSpotlightIdx:i},a}return Q(c,e),Z(c,[{key:"UNSAFE_componentWillReceiveProps",value:function e(t){var n=t.imageSize,r=t.initialCropArea,o,i=t.spotlightAreas.findIndex(function(e){return re(r,oe({cropArea:e,imageSize:n}))});this.setState({currentSpotlightIdx:i})}},{key:"render",value:function e(){var n=this,t=this.props,r=t.imageSize,o=t.initialCropArea,i=t.spotlightAreas,a=i&&!!i.length;return g.a.createElement(z,{imageSize:r,initialCropArea:o,onChange:this.handleChange},a&&g.a.createElement("div",{className:"spotlightWrapper absolute",style:{width:r.w}},i.map(function(e,t){return n.renderSpotlightDot(e,t)})))}}]),c}(h.Component);ee(ie,"defaultProps",{spotlightAreas:[]});var ae=n("W/Cr"),ce=n("lWtR"),ue=n("ULUT"),le=n("LQXo");function se(e){return(se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function pe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function fe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function de(e,t,n){return t&&fe(e.prototype,t),n&&fe(e,n),e}function me(e,t){return!t||"object"!==se(t)&&"function"!=typeof t?ve(e):t}function ye(e){return(ye=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function he(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&be(e,t)}function be(e,t){return(be=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}function ve(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ge(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var we=function(e){function o(){var e,a;pe(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return ge(ve(ve(a=me(this,(e=ye(o)).call.apply(e,[this].concat(n))))),"renderItem",function(e){var t=e.data,n=e.itemIdx,r=a.props,o=r.resourceOptions.image_signature,i=r.searchId;return g.a.createElement(V.b,{marginTop:4,marginLeft:0,marginRight:0,marginBottom:0},g.a.createElement(ce.a,{pin:t,slotIndex:n,showEditPinButton:!1,showLikeItButton:!0,contextLogData:{viewData:{search_identifier:i},search_identifier:i,image_signature:o},viewType:72,viewParameter:3050}))}),a}return he(o,e),de(o,[{key:"render",value:function e(){var t=this.props,n=t.fetchMoreData,r=t.isFetching,o=t.pins,i=t.searchId;return g.a.createElement(V.b,null,o&&i&&g.a.createElement(V.b,{position:"relative",dangerouslySetInlineStyle:{__style:{top:-14}}},g.a.createElement(V.v,{columnWidth:le.c,comp:this.renderItem,gutterWidth:le.e,items:o,loadItems:n,minCols:1,scrollContainer:function e(){return window}})),g.a.createElement(V.G,{accessibilityLabel:ae.a._("Loading search results...","Accessibility label for loading visual search results"),show:r||!i}))}}]),o}(h.PureComponent),_e=Object(c.compose)(Object(a.b)({name:"VisualLiveSearchResultResource",options:function e(t){var n;return t.resourceOptions},key:"pins"}))(we),Oe=n("F3c4"),Ee=n("Esb+"),Te=n.n(Ee),Se=n("vCSV"),Pe=n("Cjb7"),Ce=n("nX0T"),ke=n("Exm5"),Ie=n.n(ke);function je(e){return(je="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function xe(e,t){if(null==e)return{};var n=Re(e,t),r,o;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)r=i[o],0<=t.indexOf(r)||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Re(e,t){if(null==e)return{};var n={},r=Object.keys(e),o,i;for(i=0;i<r.length;i++)o=r[i],0<=t.indexOf(o)||(n[o]=e[o]);return n}function Ae(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function De(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Me(e,t,n){return t&&De(e.prototype,t),n&&De(e,n),e}function Ne(e,t){return!t||"object"!==je(t)&&"function"!=typeof t?Fe(e):t}function Le(e){return(Le=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function Ue(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Be(e,t)}function Be(e,t){return(Be=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}function Fe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function He(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(e){Ye(t,e,n[e])})}return t}function Ye(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ze=564,Ve=20,We=400,Ge=function e(t,n,r){var o=t.x,i=t.y,a=t.w,c=t.h,u=[];if(r){var l=r.variantId,s=r.catalogId;u=u.concat(["variant_id=".concat(l),"catalog_id=".concat(s)])}0<=o&&0<=i&&0<=a&&0<=c&&(u=u.concat(["x=".concat(o),"y=".concat(i),"w=".concat(a),"h=".concat(c)]));var p=u.length?"?".concat(u.join("&")):"";return"/pin/".concat(n,"/visual-search/").concat(p)},Ke=function e(t){var n=t.pin,r=t.productImageIndex,o=n.images,i=n.image_signature;if(r&&n.buyable_product){var a=r.variantId,c=r.catalogId,u=n.buyable_product.items[a];if(u){var l=u.images[c];l&&(o=l.canonical_images,i=l.image_signature)}}var s=o["564x"]&&o.orig,p=s.url,f=s.width,d=s.height;return 564<f&&(d*=564/f,f=564),{width:f,height:d,url:p,imageSignature:i}},Ze=function e(t){var n=t.initialCropArea,r=t.pin,o=t.productImageIndex,i;if(n)i=He({},n);else{var a=r.visual_objects,c=Ke({pin:r,productImageIndex:o}),u=c.width,l=c.height;if(a&&a.length){var s=a[0],p=s.x,f=s.y,d=s.w,m=s.h,y=[p*u,f*l,d*u,m*l];i={x:p=y[0],y:f=y[1],w:d=y[2],h:m=y[3]}}else{var h=u/6,b=l/6,v,g;i={x:h,y:b,w:u-2*h,h:l-2*b}}}return{x:Math.floor(i.x),y:Math.floor(i.y),w:Math.floor(i.w),h:Math.floor(i.h)}},qe=0,Xe="",Qe=function(e){function o(){var e,u;Ae(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Ye(Fe(Fe(u=Ne(this,(e=Le(o)).call.apply(e,[this].concat(n))))),"state",{animationState:u.props.isAnimated?"initial":"finished",searchId:"",textFilters:[]}),Ye(Fe(Fe(u)),"getResourceOptions",function(e,t,n){var r=u.props.pin,o=r.image_signature,i=r.id,a=u.state.textFilters;return{pin_id:i,image_signature:o,crop:{x:e.x/t,y:e.y/n,w:e.w/t,h:e.h/n},text_filters:a,keep_duplicates:!1}}),Ye(Fe(Fe(u)),"saveFlashlightImageContainerRef",function(e){u.flashlightImageContainerRef=e}),Ye(Fe(Fe(u)),"handleCropperChange",function(e){var t=e.origCrop,n=u.props,r=n.pin,o=n.productImageIndex,i=n.replaceState,a=Ge(t,r.id,o),c;a!==window.location.pathname+window.location.search&&i(a)}),u}return Ue(o,e),Me(o,[{key:"componentDidMount",value:function e(){var t=this,n=this.props,r=n.isAnimated,o=n.inDenzelModal,i=n.initialCropArea,a=n.contextLog,c=n.pin,u=n.productImageIndex,l=n.replaceState;if(o&&(this._previousView=f.a.getInstance().getViewFromContext(),
this._origUrl=window.location.href,Pe.a.instance.publish("site","unhideModal",null)),!i){var s=Ze({initialCropArea:i,pin:c,productImageIndex:u}),p;l(Ge(s,c.id,u))}r&&(this._animationTimer=setTimeout(function(){t.setState({animationState:"finished"})},400)),this.flashlightImageContainerRef&&Xe===c.id&&(this.flashlightImageContainerRef.scrollTop=qe),a(13,{view:72,viewParameter:3050,viewData:{pin_id:c.id}})}},{key:"UNSAFE_componentWillReceiveProps",value:function e(t){Te()(t.initialCropArea,this.props.initialCropArea)||this.setState({textFilters:[],searchId:""})}},{key:"componentWillUnmount",value:function e(){var t=this.props,n=t.inDenzelModal,r=t.replaceState,o=t.pin,i;(this.flashlightImageContainerRef&&(qe=this.flashlightImageContainerRef.scrollTop,Xe=o.id),this._animationTimer&&clearTimeout(this._animationTimer),n)&&(this._previousView&&f.a.getInstance().addViewToContext(this._previousView),0<window.location.href.indexOf("/visual-search/")&&r(this._origUrl))}},{key:"render",value:function e(){var n=this,t=this.props,r=t.pin,o=t.productImageIndex,i=t.initialCropArea,a=t.inDenzelModal,c=t.isAnimated,u=t.goBack,l=Ke({pin:r,productImageIndex:o}),s=l.width,p=l.height,f=l.url,d=this.state,m=d.searchId,y=d.textFilters,h=Ze({initialCropArea:i,pin:r,productImageIndex:o}),b=this.getResourceOptions(h,s,p),v=s+20;return g.a.createElement(Ce.a,{view:72,objectId:m},g.a.createElement("div",null,g.a.createElement(_.a,{position:"sticky",style:{width:"100%",zIndex:3,backgroundColor:"#ffff"}},g.a.createElement(V.b,{paddingY:3},g.a.createElement(V.b,{width:"100%",paddingX:9},g.a.createElement(w.a,{accessibilityLabel:ae.a._("Go back","Accessible icon for close button"),bgColor:"transparent",hoverBgColor:"lightGray",onClick:u},g.a.createElement(V.b,{display:"flex",alignItems:"center",justifyContent:"center"},g.a.createElement(V.b,{padding:1},g.a.createElement(V.n,{icon:"arrow-back",color:"darkGray",inline:!0,accessibilityLabel:"",size:20})),g.a.createElement("div",null,g.a.createElement(V.b,{padding:1},g.a.createElement(V.K,{bold:!0,color:"darkGray",size:"md"},ae.a._("Pin","Back button from visual search to pin closeup"))))))),g.a.createElement(V.b,{paddingX:12,width:"100%",display:"flex"},g.a.createElement(V.b,{marginTop:2,minWidth:v},g.a.createElement(V.K,{size:"xl",bold:!0},ae.a._("Visually similar results","Header explaining results of flashlight search"))),g.a.createElement(V.b,{display:"flex",flex:"grow",alignItems:"start",justifyContent:"end"},g.a.createElement(x,{onAdd:function e(t){return n.setState({textFilters:Ie()(y.concat([t]))})},onRemove:function e(t){return n.setState({textFilters:y.filter(function(e){return e!==t})})},onSearchIdUpdate:function e(t){return n.setState({searchId:t})},resourceOptions:b}))))),g.a.createElement(Oe.a,null,function(e){return g.a.createElement(V.b,{display:"flex",paddingX:12},g.a.createElement("div",{style:{position:"fixed",width:v,height:"inherit",overflow:"auto",top:e+110,bottom:0,marginBottom:10},ref:n.saveFlashlightImageContainerRef},g.a.createElement("div",{className:"FlashlightEnabledImage",style:{width:s,height:p}},g.a.createElement(V.u,{height:p,shape:"rounded",width:s},g.a.createElement(ie,{imageSize:{h:p,w:s},initialCropArea:h,isAnimated:c,onChange:n.handleCropperChange,spotlightAreas:r.visual_objects}),g.a.createElement(Se.a,{alt:r.description,className:"pinImage rounded",src:f,width:s})))),g.a.createElement("div",{style:{marginLeft:v+16,width:"100%"}},g.a.createElement(_e,{inDenzelModal:a,resourceOptions:b,searchId:m})))})))}}]),o}(h.Component),Je=t.a=Object(c.compose)(s.a,Object(a.b)({name:"PinResource",key:"pin",options:function e(t){var n;return{id:t.pinId,field_set_key:"detailed",fetch_visual_search_objects:!0}}}))(function(e){var t=e.resourceLoaded,n=xe(e,["resourceLoaded"]);return g.a.createElement(V.b,null,t&&g.a.createElement(Qe,n),g.a.createElement(V.G,{accessibilityLabel:ae.a._("Loading visual search...","Accessibility label for loading visual search page"),show:!t}))})},rTF4:function(e,t,n){"use strict";var r=n("OfNO"),O=n("cNcu");t.a=function(e){var P=e.i18n,C=e.interpolateNamedTemplate;return{getLearnMoreUrl:function e(t){switch(t){case 1:return r.a.settings.HELP_PROMOTED_PINS_RETARGETED_PIN_URL;case 2:case 3:return r.a.settings.HELP_PROMOTED_PINS_LOOKALIKE_TARGETING_URL;default:return r.a.settings.HELP_PROMOTED_PINS_URL}},getRecommendationDescription:function e(t){var n=t.ad_match_reason,r=t.board,o=t.feedbackType,i=t.makeNavigateLink,a=t.pinner,c=t.promoter,u=t.recommendationReason,l=t.sourceInterest;switch(o){case"pfy":return P._("This Pin is inspired by your recent activity.","Pin feedback reason");case"pfyBoard":var s=u.board,p=s.name,f,d=i("navigation",s.url,p);return C(P._("This Pin is inspired by your board {{ boardLink }}.","Pin feedback - inspired by your board"),{boardLink:d});case"topic":var m=l.name,y=l.url_name,h,b=i("topicUrl","/topics/".concat(y),m);return C(P._("You’re seeing this Pin because you follow the Topic {{ formattedTopic }}.","Pin feedback"),{formattedTopic:b});case"followed":var v="/".concat(a.username),g=i("boardUrl",r.url,r.name),w=i("pinnerUrl",v,a.full_name),_;return _=a.explicitly_followed_by_me?C(P._("You’re seeing this Pin because you follow {{ formattedPinner }}’s Board {{ formattedBoard }}.","Pin feedback"),{formattedPinner:w,formattedBoard:g}):C(P._("You’re seeing this Pin because you follow the Board {{ formattedBoard }}.","Pin feedback"),{formattedBoard:g});case"promoted":switch(n){case 1:case 2:case 3:return P._("This ad was personalized for you using info from one of our partners.","Pin feedback");default:var O=c.full_name,E=c.username,T,S=i("promotedLink",E?"/"+E+"/":"/",O);return C(P._("{{ promoterLink }} paid to have this Pin show up where\n              you’d be more likely to notice it.","Pin feedback"),{promoterLink:S})}default:return null}},getFeedbackType:function e(t){var n=t.board,r=t.feedback,o=t.viewParameter,i=t.pin,a=i.promoter,c=i.recommendation_reason,u=t.pinner,l=r&&r.type;return a?"promoted":l||(c?"FOLLOWED_INTEREST"===c.reason?"topic":c.board?"pfyBoard":"pfy":n&&n.followed_by_me||u&&u.explicitly_followed_by_me?"followed":140===o||144===o||141===o||145===o||139===o?"related":92===o?"default":3082===o?"newsHub":null)},getHidePinAction:function e(t){var n=t.feedbackData,r=t.feedbackType,o=t.pinId,i="promoted"===r,a,c;switch(r){case"promoted":a="promotedComplaint";break;case"search":a="unrelatedSearchPin";break;case"related":a="relatedPinHide";break;case"newsHub":a="newsHubPinHide";break;default:a="complaint"}switch(r){case"search":c={query:n.query,pin_id:o};break;case"related":c={pin:o};break;case"newsHub":c={pinId:o,newsId:n.newsId};break;default:c={complaint_reason:0,pin_id:o,feedback_type:1,promoted:i}}return{action:a,actionOptions:c}},getUnfollowAction:function e(t){var n=t.board,r=t.feedbackType,o=t.makeNavigateLink,i=t.pinner,a=t.sourceInterest;if("topic"===r){if(a){var c=a.id,u=a.name,l=a.url_name,s,p=o("topicUrl","/topics/".concat(l),u);return{action:"unfollowTopic",actionOptions:{interest_id:c,interest_list:O.a},title:P._("Unfollowed","Title shown when unfollowing a certain topic / pin / board"),subTitle:C(P._("You’ve unfollowed {{ formattedTopic }}. You can follow it again by searching for it.","Confirmation text after unfollowing a topic"),{formattedTopic:p})}}}else if("followed"===r){var f=n||{},d=f.id,m=f.name,y=f.url,h=i.explicitly_followed_by_me,b=i.full_name,v=i.username,g="/".concat(v);if(n&&i){var w=o("boardUrl",y,m),_=o("pinnerUrl",g,b);return{action:"unfollowBoard",actionOptions:{board_id:d},title:P._("Unfollowed","Title shown when unfollowing a certain topic / pin / board"),subTitle:C(h?P._("You’ve unfollowed {{ formattedPinner }}’s Board {{ formattedBoard }}. You can follow it again by searching for it.","Confirmation text after unfollowing a board"):P._("You’ve unfollowed {{ formattedBoard }}. You can follow it again by searching for it.","Confirmation text after unfollowing a board"),{formattedPinner:_,formattedBoard:w})}}}return null}}}},rgtM:function(e,t,n){"use strict";t.a=a;var o=n("d6ZO"),r=n.n(o),i=n("gEaE");function a(e){var t=e.children,n=e.display,r=e.id;return o.createElement(i.b,{"data-test-id":r,display:n},t)}},sHx0:function(e,t,n){"use strict";var r=n("d6ZO"),i=n.n(r),o=n("RklN"),a=n.n(o),c=n("AGGR"),u=n("Cjb7");function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t,n){return t&&p(e.prototype,t),n&&p(e,n),e}function d(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?b(e):t}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function y(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}function h(e,t){return(h=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var g=new Map,w=null,_=function e(t){t.forEach(function(e){var t=g.get(e.target);t&&t(e)})},O=function e(t){w.unobserve(t),g.delete(t)},E=function e(t,n){var r={root:document.querySelector("#mainContainer"),rootMargin:"-64px 0px 0px 0px",threshold:[0,1]};w=w||new window.IntersectionObserver(_,r),g.set(t,n),w.observe(t)},T=function e(t){return g.has(t)},S=function e(t){var n=function(e){function o(){var e,i;s(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return v(b(b(i=d(this,(e=m(o)).call.apply(e,[this].concat(n))))),"seen",!1),v(b(b(i)),"flushTimeout",null),v(b(b(i)),"impressionsExpGroup",""),v(b(b(i)),"attachDenzelNavigateListener",function(){i.denzelNavigateListener=u.a.instance.subscribe("site","navigateStarted",function(e,t,n,r){var o=new RegExp("/pin/[\\w|-]+/$");!r&&n&&"string"==typeof n.url&&o.test(n.url)&&i.leave()})}),v(b(b(i)),"detachDenzelNavigateListener",function(){i.denzelNavigateListener&&(i.denzelNavigateListener.unsubscribe(),delete i.denzelNavigateListener)}),v(b(b(i)),"enter",function(e){var t;t=i.impressionsExpGroup.startsWith("enabled")?0<e.intersectionRatio||e.isIntersecting:0<e.intersectionRatio,i.seen=t,i.seen&&(i.props.onVisibilityChanged(!0),i.attachDenzelNavigateListener())}),v(b(b(i)),"leave",function(){var e=i._node;e&&T(e)&&i.seen&&(i.props.onVisibilityChanged(!1),i.seen=!1,i.detachDenzelNavigateListener())}),v(b(b(i)),"observe",function(){try{i._node=a.a.findDOMNode(b(b(i)))}catch(e){return}if(i._node){var r=i._node;E(r,function(e){if(g.has(r)){var t;t=i.impressionsExpGroup.startsWith("enabled")?i.props.trackFullVisible?1<=e.intersectionRatio:0<e.intersectionRatio||e.isIntersecting:i.props.trackFullVisible?1<=e.intersectionRatio:0<e.intersectionRatio;var n=i.props.trackFullVisible?0===e.intersectionRatio:!t;!i.seen&&t?i.enter(e):i.seen&&n&&i.leave()}})}}),i}return y(o,e),f(o,[{key:"componentDidMount",value:function e(){this.impressionsExpGroup=c.a.getInstance().activate("www_mqtt_video_impressions")||"",this.observe()}},{key:"componentWillUnmount",value:function e(){var t=this._node;t&&(this.leave(),O(t))}},{key:"render",value:function e(){return i.a.createElement(t,this.props)}}]),o}(r.Component);return v(n,"displayName","WithVisibilityChanged(".concat(t.displayName||t.name,")")),n};t.a=S},uHNA:function(e,t,n){"use strict";var r=n("d6ZO"),v=n.n(r),o=n("DUIN"),i=n("2E55"),a=n.n(i),c=n("ujKp"),u=n("MQ2h"),l=n.n(u),s=n("y2lE"),g=n("gEaE");function d(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(e){p(t,e,n[e])})}return t}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var w=function e(t,n,r,o,i,a,c,u,l,s){if(!s&&void 0!==u&&void 0!==n&&void 0!==a&&void 0!==c&&i){var p=i.carousel_slots,f=i.id;n(108,d({},l,{objectId:t,component:u,view:c,viewParameter:a,eventData:{pinCarouselSlotEventData:{carouselSlotId:p[r]&&Number(p[r].id),carouselDataId:Number(f),carouselSlotIndex:r,toCarouselSlotIndex:o}}}))}},_=function e(t,n,r,o,i,a){a||void 0===o||(t.preventDefault(),t.stopPropagation(),o(n,r)),void 0!==i&&i(r)},f=function e(t){var n=t.carouselIndex,r=t.carousel_data,o=t.changeCarouselSlotIndex,i=t.handleCarouselSwipe,a=t.pinId,c=t.contextLog,u=t.contextLogData,l=t.viewParameter,s=t.viewType,p=t.componentType,f=t.isEditMode,d=r.carousel_slots,m=r.index,y=void 0!==n?n:m,h=Math.max(0,y-1),b=Math.min(d.length-1,y+1);return v.a.createElement(g.b,{display:"flex",justifyContent:"between",position:"absolute",left:!0,right:!0,bottom:!0,top:!0},v.a.createElement("div",{"data-test-id":"carousel-slider-left",role:"presentation",onClick:function e(t){_(t,a,h,o,i,f),w(a,c,y,h,r,l,s,p,u,f)},onKeyUp:function e(t){_(t,a,h,o,i,f),w(a,c,y,h,r,l,s,p,u,f)},className:"carouselSlider"},0<y&&v.a.createElement(g.b,{height:"100%",width:"100%",display:"flex",alignItems:"center",justifyContent:"center"},v.a.createElement(g.n,{color:"white",icon:"arrow-back",accessibilityLabel:"carousel slider left"}))),v.a.createElement("div",{"data-test-id":"carousel-slider-right",role:"presentation",onClick:function e(t){_(t,a,b,o,i,f),w(a,c,y,b,r,l,s,p,u,f)},onKeyUp:function e(t){_(t,a,b,o,i,f),w(a,c,y,b,r,l,s,p,u,f)},className:"carouselSlider"},y<d.length-1&&v.a.createElement(g.b,{height:"100%",width:"100%",display:"flex",alignItems:"center",justifyContent:"center"},v.a.createElement(g.n,{color:"white",icon:"arrow-forward",accessibilityLabel:"carousel slider left"}))))},m=function e(t,n){var r=t.pins,o=n.pinId;return{carousel_data:r[o]&&r[o].carousel_data}},y=function e(r){return{changeCarouselSlotIndex:function e(t,n){return r(Object(c.a)(t,n))}}};t.a=Object(u.compose)(s.a,Object(o.connect)(m,y))(f)},uOsP:function(e,t,n){"use strict";function r(e){var t=Math.floor(e/6e4),n=(e%6e4/1e3).toFixed(0);return t+":"+(n<10?"0":"")+n}t.a=r},ujKp:function(e,t,n){"use strict";function r(e,t){return{type:"CHANGE_CAROUSEL_SLOT_INDEX",payload:{pinId:e,index:t}}}t.a=r},vCSV:function(e,t,n){"use strict";n.d(t,"a",function(){return h});var r=n("d6ZO"),o=n.n(r),i=n("IaRT"),a=n.n(i);function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),e}function p(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?f(e):t}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function m(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}function y(e,t){return(y=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}var h=function(e){function r(e,t){var n;return u(this,r),(n=p(this,d(r).call(this,e,t))).state={setSrc:!1},n}return m(r,e),s(r,[{key:"componentDidMount",value:function e(){this.setState({setSrc:!0})}},{key:"render",value:function e(){var t="";this.props.lazyLoading&&!this.state.setSrc||(t=this.props.src);var n=function e(){};this.props.onImageError&&"pending"===this.props.loadState?n=this.props.onImageError:this.props.onImageError&&"error"===this.props.loadState&&this.props.onImageError.call(this);var r=""===this.props.alt?"presentation":null;return o.a.createElement("img",{alt:this.props.alt,className:this.props.className,height:this.props.height,itemProp:this.props.itemProp,onError:n,role:r,src:t,width:this.props.width})}}]),r}(r.Component)},w1jd:function(e,t,n){"use strict";n.d(t,"d",function(){return f}),n.d(t,"a",function(){return Z}),n.d(t,"b",function(){return q}),n.d(t,"c",function(){return d});var r=n("Esb+"),o=n.n(r),i=n("Awha"),a=n.n(i),c=n("mZ/m"),u;function W(e){return p(e)||s(e)||l()}function l(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function s(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function p(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}function G(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(e){K(t,e,n[e])})}return t}function K(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f={boardactivity:"BoardActivityResource",boardactivitycomment:"BoardActivityCommentResource",communitycomment:"CommunityCommentResource",communitypost:"CommunityPostResource"},Z={BOARD:"board",BOARD_ACTIVITY:"boardactivity",BOARD_ACTIVITY_COMMENT:"boardactivitycomment"},q={COMMUNITY:"community",COMMUNITY_COMMENT:"communitycomment",COMMUNITY_POST:"communitypost"},d=(K(u={},Z.BOARD,c.b.BOARD_ACTIVITYITEMS),K(u,Z.BOARD_ACTIVITY,c.b.BOARD_ACTIVITYCOMMENTS),K(u,Z.BOARD_ACTIVITY_COMMENT,c.b.BOARD_ACTIVITYCOMMENTS),K(u,q.COMMUNITY,c.b.COMMUNITY_POSTS),K(u,q.COMMUNITY_POST,c.b.COMMUNITY_COMMENTS),K(u,q.COMMUNITY_COMMENT,c.b.COMMUNITY_COMMENTS),u),X={},Q=function e(t,n){var r=G({},a()({},t,n),n.content?{content:n.content}:{},n.reaction_counts?{reaction_counts:n.reaction_counts}:{});return o()(t,r)?t:r},J=function e(t){return t.reduce(function(e,t){if(11===t.activity_type&&t.comment&&t.ref_board_activity){var n=t.comment,r=t.ref_board_activity;n&&r&&(e.push(G({},n,{user:t.user})),e.push(r),e.push(G({},t,{comment:{id:n.id},ref_board_activity:{id:r.id}})))}else e.push(t);return e},[])},m=function e(){var r=0<arguments.length&&void 0!==arguments[0]?arguments[0]:X,t=1<arguments.length?arguments[1]:void 0;if("RESOURCE_FETCH_COMPLETE"===t.type||"RESOURCE_FETCH_MORE_COMPLETE"===t.type){var n=t.payload,o=n.data,i=n.name,a=n.options;if("BoardActivityCommentFeedResource"===i||"CommunityItemCommentsFeedResource"===i){var c,u=(o||[]).reduce(function(e,t){return e[t.id]=Q(r[t.id],t),e},{});return G({},r,u)}if("CommunityPostActivityFeedResource"===i||"CommunityPostFeedResource"===i){var l,s=(o||[]).reduce(function(t,e){return e.preview_comments&&e.preview_comments.map(function(e){return t[e.id]=e}),t[e.id]=e,t},{});return G({},r,s)}if("BoardActivityFeedResource"===i){var p,f,d=J(o||[]).reduce(function(e,t){return e[t.id]=Q(r[t.id],t),e},{});return G({},r,d)}if(("BoardActivityResource"===i||"CommunityPostResource"===i)&&o){var m=o;return G({},r,K({},m.id,Q(r[m.id],m)))}if("BoardActivityCommentResource"===i&&o){var y=o,h=K({},y.id,Q(r[y.id],y));if(y.root_board_activity){var b=y.root_board_activity.id;h[b]=Q(r[b],y.root_board_activity)}return G({},r,h)}if("CommunityCommentResource"===i&&o){var v=o,g=K({},v.id,v);return v.root_post&&(g[v.root_post.id]=v.root_post),v.parent_comment&&(g[v.parent_comment.id]=v.parent_comment),v.reply_to_comment&&(g[v.reply_to_comment.id]=v.reply_to_comment),G({},r,g)}if("NewsHubDetailsResource"===i&&o&&0<o.length&&o[0].content_items){var w={};return o.forEach(function(e){e.content_items.forEach(function(e){var t=e.content_object&&e.content_object.type;if(t===q.COMMUNITY_POST||t===q.COMMUNITY_COMMENT){var n=e.content_object,r;[n].concat(W(n.preview_comments.map(function(e){return e}))).forEach(function(e){return w[e.id]=e})}if(t===Z.BOARD_ACTIVITY_COMMENT||t===Z.BOARD_ACTIVITY){var o=e.content_object;J([o]).forEach(function(e){return w[e.id]=e})}})}),G({},r,w)}if("PinResource"===i&&o&&o.board_activity){var _=o.board_activity;return _.board=o.board,G({},r,K({},_.id,Q(r[_.id],_)))}if(("BoardFeedResource"===i||"BoardSectionPinsResource"===i)&&("react_grid_pin_with_board_activity"===a.field_set_key||"partner_react_grid_pin_with_board_activity"===a.field_set_key)||"BoardActivityPinsFeedResource"===i){var O,E=(o||[]).reduce(function(e,t){var n=t.board_activity;return n&&n.id&&(e[n.id]=Q(r[n.id],n)),e},{});return G({},r,E)}}else{if("ACTIVITY_ITEM_CREATED"===t.type){var T=t.payload.activityItem;return G({},r,K({},T.id,T))}if("ACTIVITY_ITEM_DELETED"===t.type){var S=t.payload,P=S.activityId,C=S.activityType;if(C===Z.BOARD_ACTIVITY_COMMENT||C===Z.BOARD_ACTIVITY||C===q.COMMUNITY_POST){var k=G({},r);return delete k[P],k}if(C===q.COMMUNITY_COMMENT)return G({},r,K({},P,Q(r[P],{visibility:2})))}else{if("ACTIVITY_ITEM_UPDATED"===t.type){var I=t.payload.data;return G({},r,K({},I.id,Q(r[I.id],I)))}if("COMMUNITY_ITEM_EDITED"===t.type){var j=t.payload.data;return G({},r,K({},j.id,j))}if("UPDATE_ACTIVITY_ITEM_COMMENT_COUNT"===t.type){var x=t.payload,R=x.increment,A=x.id,D=r[A];if(D&&[q.COMMUNITY_POST,q.COMMUNITY_COMMENT,Z.BOARD_ACTIVITY_COMMENT,Z.BOARD_ACTIVITY].includes(D.type)){var M=G({},D,{comment_count:R?D.comment_count+1:D.comment_count-1});return G({},r,K({},A,M))}}else if("COMMUNITY_ITEM_UPDATE_LIKE_COUNT"===t.type||"ACTIVITY_ITEM_UPDATE_LIKE_COUNT"===t.type){var N=t.payload,L=N.increment,U=N.id,B=r[U],F=B.reaction_counts[1]||0,H,Y=L?1:0,z,V=G({},B,{reaction_counts:K({},1,L?F+1:F-1),reaction_by_me:Y});return G({},r,K({},U,V))}}}return r};t.e=m},xfx3:function(e,t,n){"use strict";var r=n("d6ZO"),s=n.n(r),p=n("dZgC"),f=n("mnfW"),o=function e(t){var n=t.currency,r=t.maximumFractionDigits,o=t.minimumFractionDigits,i=t.shortform,a=t.shortformMaximumFractionDigits,c=t.formatStyle,u=t.uplimit,l=t.value;return s.a.createElement(p.b,null,function(e){return Object(f.c)(e.locale,l,{currency:n,maximum_fraction_digits:r,minimum_fraction_digits:o,shortform:i,shortform_maximum_fraction_digits:a,style:c,uplimit:u})})};t.a=o},yPpl:function(e,t,n){"use strict";var l=n("d6ZO"),r=n.n(l),o=n("OIxG"),s=n("gEaE"),c=n("+B8E");function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}function f(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?h(e):t}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function m(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}function y(e,t){return(y=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var v=function(e){function o(){var e,a;u(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return b(h(h(a=f(this,(e=d(o)).call.apply(e,[this].concat(n))))),"state",{href:void 0}),b(h(h(a)),"onEvent",function(){if("undefined"!=typeof window){var e=a.props,t=e.imgSrc,n=e.filename,r=e.requestContext,o=e.isUnauth,i;null==a.state.href&&fetch(t,{headers:new Headers({Origin:location.origin}),mode:"cors"}).then(function(e){return e.blob()}).then(function(e){a.setState({href:window.URL.createObjectURL(e)},function(){if(a.imageDownload&&n){var e=!1,t;if(o)e=!0;else new c.c(r,"web_pin_download_good_filenames").enabled()&&(e=!0);if(a.imageDownload&&e)return void a.imageDownload.click()}a.imageDownloadFallback&&a.imageDownloadFallback.click()})}).catch(function(){return a.setState({href:a.DOWNLOAD_ERROR})})}}),b(h(h(a)),"DOWNLOAD_ERROR","error"),a}return m(o,e),p(o,[{key:"render",value:function e(){var n=this,t=this.props,r=t.children,o=t.imgSrc,i=this.props.filename,a=this.state.href,c=null!=a&&a!==this.DOWNLOAD_ERROR,u=o.split("\\").pop().split("/").pop();return l.createElement(l.Fragment,null,r(this.onEvent),c&&l.createElement(s.b,{display:"none"},l.createElement("a",{ref:function e(t){return n.imageDownloadFallback=t},tabIndex:-1,download:u,href:a}),l.createElement("a",{ref:function e(t){return n.imageDownload=t},tabIndex:-1,download:i,href:a})))}}]),o}(l.Component);t.a=Object(o.b)(v)},yzr7:function(e,t,n){"use strict";var r=n("d6ZO"),o=n.n(r);t.a=r.createContext(0)},zF3j:function(e,t,n){"use strict";n.d(t,"b",function(){return o}),n.d(t,"a",function(){return a}),n.d(t,"i",function(){return s}),n.d(t,"c",function(){return p}),n.d(t,"h",function(){return f}),n.d(t,"g",function(){return d}),n.d(t,"d",function(){return h}),n.d(t,"f",function(){return b}),n.d(t,"e",function(){return g});var r=n("+lsj"),u=n.n(r),o=6e4,i=60*o,a=24*i,c=30*a,l=365*a,s=function e(t){var n=new Date(t)-new Date,r=Math.abs(n);return{year:Math.floor(r/l),month:Math.floor(r%l/c),day:Math.floor(r%c/a),hour:Math.floor(r%a/i),minute:Math.floor(r%i/o),milli:n,ms:r}},p=function e(t,n){var r=new Date(t);return r.setDate(t.getDate()+n),r},f=function e(t,n){var r=n.getUTCDate()-t,o=new Date(n);return o.setUTCDate(r),o},d=function e(t,n){var r=t.getTime(),o;return n.getTime()<r},m=function e(t){return new Date(1e3*t).toISOString()},y=function e(t){return m(t).substring(0,10)},h=function e(t){return u()(t,["MM/DD/YYYY","YYYY"],!0).isValid()?u.a.utc(t,["MM/DD/YYYY","YYYY"]).unix():-1},b=function e(t,n){var r=new Date;if(u()(t,"MM/DD/YYYY",!0).isValid()){var o=new Date(r.getFullYear()-n,r.getMonth(),r.getDate()),i;return new Date(t)<=o}if(u()(t,"YYYY",!0).isValid()){var a=r.getFullYear()-n-1,c;return new Date(t).getFullYear()<=a}return!1},v=function e(t){var n=new Date(t);return new Date(n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate())},g=function e(t){return t.getFullYear()+"-"+("0"+(t.getMonth()+1)).slice(-2)+"-"+("0"+t.getDate()).slice(-2)}}});